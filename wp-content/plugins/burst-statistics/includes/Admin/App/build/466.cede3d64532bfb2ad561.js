"use strict";(self.webpackChunk_burst_statistics_burst_statistics=self.webpackChunk_burst_statistics_burst_statistics||[]).push([[466],{8353:(e,t,r)=>{r.d(t,{A:()=>b});var n=r(91637),a=r(51609),s=r.n(a),i=r(88432),o=r(61445),l=r(39988),c=r(88887),u=r(28786),d=r(53411),f=r(27723),m=r(21587),p=r(91788),g=r(86274),h=function(e,t,r){if(r||2===arguments.length)for(var n,a=0,s=t.length;a<s;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))};const b=s().memo(function(e){var t=e.filter,r=e.filterValue,s=e.label,b=e.children,v=e.startDate,y=e.endDate,x=e.row,j=(0,i.R7)(),_=j.setFilters,w=j.filtersConf,N=j.getActiveFilters,k=(0,o.A)().getGoal,C=(0,l.G)(function(e){return e.setMetrics}),A=(0,l.G)(function(e){return e.getMetrics()}),O=(0,c.S)(function(e){return e.setStartDate}),S=(0,c.S)(function(e){return e.setEndDate}),D=(0,c.S)(function(e){return e.setRange}),M=(0,(0,g.A)().getValue)("filtering_by_domain"),F=(0,a.useMemo)(function(){return t&&w&&Object.prototype.hasOwnProperty.call(w,t)},[t,w]),E=(0,a.useMemo)(function(){if(!r)return!1;if(["page_url","referrer"].includes(t))return!0;try{return/^https?:\/\/.+/i.test(r)}catch(e){return!1}},[t,r]),T=(0,a.useCallback)(function(e){var n;e.stopPropagation();var a=r;if("page_url"===t&&!r.startsWith("http")){var s=(null===(n=window.burst_admin)||void 0===n?void 0:n.site_url)||window.location.origin;if(M){var i=N(),o=-1!==s.indexOf("https:")?"https://":"http://";Object.prototype.hasOwnProperty.call(x,"host")?s="".concat(o).concat(x.host):Object.prototype.hasOwnProperty.call(i,"host")&&(s="".concat(o).concat(i.host))}a="".concat(s).concat(r.startsWith("/")?"":"/").concat(r)}"referrer"!==t||r.startsWith("http")||(a="https://".concat(r)),window.open(a,"_blank","noopener,noreferrer")},[t,r]),I=(0,a.useMemo)(function(){return s?"".concat((0,f.__)("Click to filter by:","burst-statistics")," ").concat(s):(0,f.__)("Click to filter","burst-statistics")},[s]),R=(0,a.useMemo)(function(){return(0,f.__)("Open in new tab","burst-statistics")},[]),P=(0,a.useCallback)(function(){if(v){var e="",t="";if(/^\d+$/.test(v)){var r=10===v.toString().length?1e3*v:v;e=new Date(r).toISOString().split("T")[0]}else/\d{4}-\d{2}-\d{2}/.test(v)&&(e=v);y?/^\d+$/.test(y)?(r=10===y.toString().length?1e3*y:y,t=new Date(r).toISOString().split("T")[0]):/\d{4}-\d{2}-\d{2}/.test(y)&&(t=y):t=(new Date).toISOString().split("T")[0],(0,p.vd)(e)&&(0,p.vd)(t)&&(O(e),S(t),D("custom"))}},[v,y,O,S,D]),L=(0,a.useCallback)(function(e){var t=k(e);(null==t?void 0:t.goal_specific_page)?(_("page_url",t.goal_specific_page),_("goal_id",e),m.oR.info((0,f.__)("Filtering by goal & goal specific page","burst-statistics"))):(_("goal_id",e),m.oR.info((0,f.__)("Filtering by goal","burst-statistics"))),A.includes("conversions")||C(h(h([],A,!0),["conversions"],!1))},[k,_,A,C]),z=(0,a.useCallback)(function(e){e.stopPropagation(),F?("goal_id"===t?L(r):_(t,r),P()):console.warn('ClickToFilter: Invalid filter "'.concat(t,'" - not found in filter configuration'))},[t,r,F,L,_,P]);return t&&r&&F?(0,n.jsxs)("div",{className:"group flex items-center gap-2",children:[(0,n.jsx)("div",{className:"flex-1",children:b}),(0,n.jsxs)("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:[(0,n.jsx)(u.A,{content:I,children:(0,n.jsx)("div",{onClick:z,className:"flex items-center justify-center w-6 h-6 bg-white/90 hover:bg-white border border-gray-200 rounded shadow-sm hover:shadow-md transition-all duration-150 cursor-pointer",children:(0,n.jsx)(d.A,{name:"filter",size:14,color:"black"})})}),E&&(0,n.jsx)(u.A,{content:R,children:(0,n.jsx)("div",{onClick:T,className:"flex items-center justify-center w-6 h-6 bg-white/90 hover:bg-white border border-gray-200 rounded shadow-sm hover:shadow-md transition-all duration-150 cursor-pointer",children:(0,n.jsx)(d.A,{name:"referrers",size:14,color:"black"})})})]})]}):(0,n.jsx)(n.Fragment,{children:b})})},10371:(e,t,r)=>{r.d(t,{A:()=>o});var n=r(91637),a=r(51609),s=function(){return s=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},s.apply(this,arguments)},i=(0,a.forwardRef)(function(e,t){var r=e.type,a=void 0===r?"text":r,i=e.className,o=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r}(e,["type","className"]);return(0,n.jsx)("input",s({ref:t,type:a,className:"w-full rounded-md border border-gray-400 p-2 focus:border-primary-dark focus:outline-none focus:ring disabled:cursor-not-allowed disabled:border-gray-200 disabled:bg-gray-200 ".concat(i||"")},o))});i.displayName="TextInput";const o=i},11989:(e,t,r)=>{r.d(t,{t:()=>o});var n=r(91637),a=r(51609),s=r(2573),i=function(e){void 0===e&&(e="");var t=/\bp-\S+/.test(e),r=/\bpx-\S+/.test(e),n=/\bpy-\S+/.test(e),a=/\bpt-\S+/.test(e),s=/\bpr-\S+/.test(e),i=/\bpb-\S+/.test(e),o=/\bpl-\S+/.test(e),l=[];return t||r||l.push("px-2.5","md:px-6"),t||n||l.push("py-6"),t||r||o||l.push("pl-2.5","md:pl-6"),t||r||s||l.push("pr-2.5","md:pr-6"),t||n||a||l.push("pt-6"),t||n||i||l.push("pb-6"),l.join(" ")},o=(0,a.memo)(function(e){var t=e.children,r=e.className,a=void 0===r?"":r;return(0,n.jsx)("div",{className:(0,s.A)("flex-grow",i(a),a),children:t})});o.displayName="BlockContent"},22352:(e,t,r)=>{r.d(t,{A:()=>f});var n=r(91637),a=r(51609),s=r(21587),i=r(27723),o=r(53411),l=r(3663),c=r(50616),u=r(84400),d=function(e){var t=e.title,r=e.description,a=e.url;return(0,n.jsxs)("div",{className:"flex items-start gap-3",children:[(0,n.jsx)("div",{className:"inline-flex rounded-full bg-green-light border border-gray-100 transition-colors p-1",children:(0,n.jsx)(o.A,{color:"green",name:"sprout",size:14,strokeWidth:2})}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("h5",{className:"font-semibold text-gray-900 mb-1",children:t}),(0,n.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:(0,i.sprintf)(
// translators: %s is description of the trial feature.
// translators: %s is description of the trial feature.
(0,i.__)("%s Enjoy full access for the remainder of your trial.","burst-statistics"),r)}),(0,n.jsx)("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:text-blue-800 underline",children:(0,i.__)("Compare all plans","burst-statistics")})]})]})};const f=function(e){var t=e.type,r=void 0===t?"sources":t,o=(0,u.A)().isTrial;return(0,a.useEffect)(function(){o&&((0,l.Lg)("trial_popup_".concat(r,"_dismissed"),!1)||function(){var e,t;switch(r){case"sources":e=(0,i.__)("You're exploring the Sources dashboard","burst-statistics"),t=(0,i.__)("A key feature of our all premium plans.","burst-statistics");break;case"reporting":e=(0,i.__)("You're exploring the Reporting dashboard","burst-statistics"),t=(0,i.__)("A key feature of our Agency plan.","burst-statistics");break;default:e=(0,i.__)("You're exploring the Sales dashboard","burst-statistics"),t=(0,i.__)("A key feature of our Business and Agency plans.","burst-statistics")}var a=(0,c.U)("pricing/#pricing",{utm_source:"trial-popup",utm_content:r}),o=(0,s.oR)(function(r){var s=r.toastProps;return(0,n.jsx)(d,{toastProps:s,title:e,description:t,url:a})},{toastId:"trial_popup_"+r,autoClose:!1}),u=s.oR.onChange(function(e){e.id===o&&"removed"===e.status&&((0,l.ZB)("trial_popup_".concat(r,"_dismissed"),!0),u())})}())},[o,r]),null}},24454:(e,t,r)=>{r.d(t,{A:()=>u});var n=r(91637),a=r(51609),s=r(29436),i=r(66087),o=function(){return o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},o.apply(this,arguments)},l=function(e,t,r){if(r||2===arguments.length)for(var n,a=0,s=t.length;a<s;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))},c=(0,a.forwardRef)(function(e,t){var r=e.value,c=e.onChange,u=e.loadOptions,d=e.defaultOptions,f=void 0===d?[]:d,m=e.isLoading,p=void 0!==m&&m,g=e.isSearchable,h=void 0===g||g,b=e.name,v=e.disabled,y=void 0!==v&&v,x=e.placeholder,j=void 0===x?"Select an option...":x,_=e.insideModal,w=void 0!==_&&_,N=e.maxSelections,k=void 0===N?1:N,C=e.showRemoveButton,A=void 0===C||C,O=e.allowCustomValue,S=void 0===O||O,D=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r}(e,["value","onChange","loadOptions","defaultOptions","isLoading","isSearchable","name","disabled","placeholder","insideModal","maxSelections","showRemoveButton","allowCustomValue"]),M=(0,a.useState)([]),F=M[0],E=M[1],T=(0,a.useState)(""),I=T[0],R=T[1],P=(0,a.useState)(p),L=P[0],z=P[1];(0,a.useEffect)(function(){z(p)},[p]);var V=(0,a.useMemo)(function(){return(0,i.debounce)(function(e){u&&(z(!0),u(e,function(e){E(e),z(!1)}))},150)},[u]);(0,a.useEffect)(function(){return function(){V.cancel()}},[V]),(0,a.useEffect)(function(){Array.isArray(f)?E(f):!0===f&&u&&(z(!0),u("",function(e){E(e),z(!1)}))},[f,u]);var B=function(){if(!r)return[];if(Array.isArray(r))return r.map(function(e){return"object"==typeof e&&Object.prototype.hasOwnProperty.call(e,"value")&&Object.prototype.hasOwnProperty.call(e,"label")?e:F.find(function(t){return t.value===e})||{value:e,label:e.toString()}});if("object"==typeof r&&Object.prototype.hasOwnProperty.call(r,"value")&&Object.prototype.hasOwnProperty.call(r,"label"))return[r];var e=F.find(function(e){return e.value===r});return e?[e]:[{value:r,label:r.toString()}]}(),G=F.filter(function(e){return!B.some(function(t){return t.value===e.value})}),q=S&&""!==I.trim()&&(0===F.length||!F.some(function(e){var t;return(null!==(t=e.label)&&void 0!==t?t:"").toLowerCase()===I.toLowerCase()})&&!B.some(function(e){var t;return(null!==(t=e.label)&&void 0!==t?t:"").toLowerCase()===I.toLowerCase()}));q&&(G=l([{value:I.trim(),label:I.trim(),isCustom:!0}],G,!0));var W=(0,s.mH)({selectedItems:B,onStateChange:function(e){var t=e.selectedItems;switch(e.type){case s.mH.stateChangeTypes.SelectedItemKeyDownBackspace:case s.mH.stateChangeTypes.SelectedItemKeyDownDelete:case s.mH.stateChangeTypes.DropdownKeyDownBackspace:case s.mH.stateChangeTypes.FunctionRemoveSelectedItem:t&&c(1===k?0<t.length?t[0]:null:t)}}}),U=W.getSelectedItemProps,K=W.getDropdownProps,Z=(0,s.Bp)({items:G,selectedItem:null,inputValue:I,stateReducer:function(e,t){var r=t.changes;switch(t.type){case s.Bp.stateChangeTypes.InputKeyDownEnter:case s.Bp.stateChangeTypes.ItemClick:return o(o({},r),{isOpen:1<k,highlightedIndex:0,inputValue:""});default:return r}},onStateChange:function(e){var t=e.type,r=e.selectedItem,n=e.inputValue;switch(t){case s.Bp.stateChangeTypes.InputKeyDownEnter:case s.Bp.stateChangeTypes.ItemClick:if(r)if(1===k)c(r),R("");else if(B.length<k){var a=l(l([],B,!0),[r],!1);c(a),R("")}break;case s.Bp.stateChangeTypes.InputChange:R(n||""),u&&h&&V(n||"")}},itemToString:function(e){return e?e.label:""}}),H=Z.isOpen,Y=Z.getToggleButtonProps,Q=Z.getInputProps,$=Z.getMenuProps,J=Z.getItemProps,X=Z.highlightedIndex,ee=Z.getComboboxProps,te=function(e){var t=B.filter(function(t){return t.value!==e.value});c(1===k?0<t.length?t[0]:null:t)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",o({},ee(),{className:"flex min-h-[2.5rem] w-full rounded-md border border-gray-400 bg-white focus-within:border-primary-dark focus-within:ring disabled:cursor-not-allowed disabled:border-gray-200 disabled:bg-gray-200",children:[(0,n.jsxs)("div",{className:"flex flex-1 flex-wrap items-center gap-1 p-1",children:[B.map(function(e,t){return(0,n.jsxs)("span",o({},U({selectedItem:e,index:t}),{className:"inline-flex items-center gap-1 rounded bg-primary-light px-2 py-1 text-xs text-primary-dark focus:bg-primary focus:text-white focus:outline-none",children:[e.label,A&&(0,n.jsx)("button",{type:"button",onClick:function(t){t.stopPropagation(),te(e)},className:"ml-1 rounded-full hover:bg-primary hover:text-white focus:bg-primary focus:text-white focus:outline-none","aria-label":"Remove ".concat(e.label),children:(0,n.jsx)("svg",{className:"h-3 w-3",fill:"currentColor",viewBox:"0 0 20 20",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),"selected-item-".concat(t))}),(1===k||B.length<k)&&(0,n.jsx)("input",o({},Q(K(o(o(o({preventKeyAction:H},t?{ref:t}:{}),{name:b,disabled:y,placeholder:0===B.length?j:1<k?"Add ".concat(k-B.length," more..."):"",readOnly:!h,onKeyDown:function(e){if("Backspace"===e.key&&""===I&&0<B.length){e.preventDefault();var t=B[B.length-1];te(t)}}}),D))),{className:"flex-1 min-w-[120px] border-none bg-transparent p-1 focus:outline-none disabled:cursor-not-allowed",style:{outline:"none"}}))]}),(0,n.jsxs)("div",{className:"flex items-center border-l border-gray-300",children:[0<k&&(0,n.jsxs)("span",{className:"px-2 text-xs text-gray-500 border-r border-gray-200",children:[B.length,"/",k]}),(0,n.jsx)("button",o({type:"button"},Y({disabled:y}),{className:"flex items-center justify-center bg-transparent px-2 py-2 hover:bg-gray-100 focus:border-primary-dark focus:outline-none disabled:cursor-not-allowed disabled:bg-gray-200","aria-label":"Toggle menu",children:L?(0,n.jsx)("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-gray-300 border-t-primary"}):(0,n.jsx)("svg",{className:"h-4 w-4 transition-transform ".concat(H?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})}))]})]})),(0,n.jsx)("div",o({},$(),{className:"w-full ".concat(w?"fixed":""," ").concat(H?"":"hidden"),children:(0,n.jsxs)("ul",{className:"relative top-0 z-[9999] max-h-60 overflow-y-auto w-full rounded-md border border-gray-300 bg-white shadow-lg ".concat(H&&G.length?"":"hidden"),children:[G.map(function(e,t){return(0,n.jsx)("li",o({},J({item:e,index:t}),{className:"cursor-pointer px-3 py-2 text-sm first:rounded-t-md last:rounded-b-md ".concat(X===t?"bg-primary-light text-primary-dark":"hover:bg-gray-100"),children:e.isCustom?(0,n.jsxs)("span",{className:"flex items-center gap-2",children:[(0,n.jsx)("svg",{className:"h-4 w-4 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),'Create "',e.label,'"']}):e.label}),e.value)}),0===G.length&&!L&&(0,n.jsx)("li",{className:"px-3 py-2 text-sm text-gray-500",children:B.length>=k?"Maximum ".concat(k," selection").concat(1<k?"s":""," reached"):"No options found"})]})}))]})});c.displayName="AsyncSelectInput";const u=c},25323:(e,t,r)=>{r.d(t,{z:()=>B});var n=r(91637),a=r(51956),s=r(48677),i=r(86087),o=r(27723),l=r(30533),c=r(71882),u=r(77363),d=r(3663),f=r(21587),m=r(84400),p=r(78102),g=r(88432),h=r(95217),b=r(98371),v=r(94304),y=r(50552),x=r(53411),j=r(97813),_=r(23568),w=r(91788),N=r(74020),k=function(){return k=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},k.apply(this,arguments)},C=function(e,t,r,n){return new(r||(r=Promise))(function(a,s){function i(e){try{l(n.next(e))}catch(e){s(e)}}function o(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})},A=function(e,t){var r,n,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(s=0)),s;)try{if(r=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((a=(a=s.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){s.label=o[1];break}if(6===o[0]&&s.label<a[1]){s.label=a[1],a=o;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(o);break}a[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},O=function(e,t,r){if(r||2===arguments.length)for(var n,a=0,s=t.length;a<s;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))},S=[{value:"24h",label:(0,o.__)("24 hours","burst-statistics")},{value:"7d",label:(0,o.__)("7 days","burst-statistics")},{value:"30d",label:(0,o.__)("30 days","burst-statistics")},{value:"never",label:(0,o.__)("Never","burst-statistics")}],D={can_change_date:!1,can_filter:!1},M={can_change_date:(0,o.__)("Change date range","burst-statistics"),can_filter:(0,o.__)("Change filters","burst-statistics")},F=function(e){var t=(Array.isArray(burst_settings.menu)?burst_settings.menu:Object.values(burst_settings.menu||{})).find(function(t){return t.id===e});return(null==t?void 0:t.title)||e},E=function(e){return C(void 0,void 0,void 0,function(){var t,r;return A(this,function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),navigator.clipboard&&navigator.clipboard.writeText?[4,navigator.clipboard.writeText(e)]:[3,2];case 1:return n.sent(),[2];case 2:return[3,4];case 3:return t=n.sent(),console.warn("Clipboard API failed, trying fallback",t),[3,4];case 4:return(r=document.createElement("textarea")).value=e,r.style.position="fixed",r.style.left="-999999px",document.body.appendChild(r),r.select(),r.focus(),document.execCommand("copy"),document.body.removeChild(r),[2]}})})},T=function(e){if(0===e)return(0,o.__)("Never expires","burst-statistics");var t=e-Date.now()/1e3;if(0>t)return(0,o.__)("Expired","burst-statistics");var r=Math.floor(t/86400),n=Math.floor(t%86400/3600);return 0<r?1===r?(0,o.__)("Expires in 1 day","burst-statistics"):
// translators: %d is the number of days.
// translators: %d is the number of days.
(0,o.__)("Expires in ".concat(r," days"),"burst-statistics"):0<n?1===n?(0,o.__)("Expires in 1 hour","burst-statistics"):
// translators: %d is the number of hours.
// translators: %d is the number of hours.
(0,o.__)("Expires in ".concat(n," hours"),"burst-statistics"):(0,o.__)("Expires soon","burst-statistics")},I=function(e){var t=e.currentTab,r=e.startDate,a=e.endDate,s=e.filters,l=(0,i.useMemo)(function(){return Object.entries(s||{}).filter(function(e){var t=e[1];return t&&""!==t}).map(function(e){var t,r=e[0],n=e[1];return{key:r,label:(null===(t=_.OF[r])||void 0===t?void 0:t.label)||r,value:n}})},[s]),c=r&&a,u=0<l.length;return(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("h4",{className:"text-md font-medium text-black",children:(0,o.__)("What you're sharing:","burst-statistics")}),(0,n.jsxs)("dl",{className:"grid grid-cols-[auto_1fr] gap-x-3 gap-y-1 text-sm",children:[(0,n.jsx)("dt",{className:"font-base text-gray",children:(0,o.__)("Initial tab:","burst-statistics")}),(0,n.jsx)("dd",{className:"font-medium text-black",children:F(t)}),c&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("dt",{className:"font-base text-gray",children:(0,o.__)("Date range:","burst-statistics")}),(0,n.jsxs)("dd",{className:"font-medium text-black",children:[(0,w.kz)(r)," – ",(0,w.kz)(a)]})]}),u&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("dt",{className:"font-base text-gray",children:(0,o.sprintf)((0,o._n)("Filter:","Filters:",l.length,"burst-statistics"))}),(0,n.jsx)("dd",{className:"font-medium text-black",children:l.map(function(e,t){return 0===t?(0,n.jsx)("span",{children:(0,i.createInterpolateElement)((0,o.sprintf)(/* translators: 1: filter label, 2: filter value */ /* translators: 1: filter label, 2: filter value */
(0,o.__)("%1$s is %2$s","burst-statistics"),"<strong>"+e.label+"</strong>","<em>"+e.value+"</em>"),{strong:(0,n.jsx)("span",{className:"font-medium text-black"}),em:(0,n.jsx)("span",{className:"font-light text-gray"})})},e.key):(0,n.jsx)("span",{children:(0,i.createInterpolateElement)((0,o.sprintf)(/* translators: 1: filter label, 2: filter value */ /* translators: 1: filter label, 2: filter value */
(0,o.__)(" and %1$s is %2$s","burst-statistics"),"<strong>"+e.label+"</strong>","<em>"+e.value+"</em>"),{strong:(0,n.jsx)("span",{className:"font-medium text-black"}),em:(0,n.jsx)("span",{className:"font-light text-gray"})})},e.key)})})]})]})]})},R=function(e){var t=e.isOpen,r=e.onToggle,a=e.permissions,s=e.onPermissionToggle,i=e.sharedTabs,u=e.onTabToggle,d=e.shareableTabs,f=e.currentTab;return(0,n.jsxs)("div",{className:"border-t border-gray-200 -mx-4 px-4 pt-3",children:[(0,n.jsxs)("button",{type:"button",onClick:r,className:"flex w-full items-center gap-2 text-left text-sm font-medium text-gray-600 hover:text-gray-800 transition-colors",children:[(0,n.jsx)(x.A,{name:"chevron-right",size:14,className:"text-gray-700 transition-transform duration-200 ".concat(t?"rotate-90":"")}),(0,n.jsx)("span",{children:(0,o.__)("Advanced options","burst-statistics")})]}),(0,n.jsx)(l.N,{children:t&&(0,n.jsx)(c.P.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden",children:(0,n.jsxs)("div",{className:"space-y-4 pt-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("span",{className:"text-sm text-gray-600",children:(0,o.__)("Allow viewer to:","burst-statistics")}),(0,n.jsx)("div",{className:"flex flex-wrap gap-x-6 gap-y-2",children:Object.entries(M).map(function(e){var t=e[0],r=e[1];return(0,n.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer text-sm",children:[(0,n.jsx)("input",{type:"checkbox",checked:a[t]||!1,onChange:function(){return s(t)},className:"rounded border-gray-400 text-wp-blue focus:ring-wp-blue cursor-pointer"}),(0,n.jsx)("span",{className:"text-gray",children:r})]},t)})})]}),1<d.length&&(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("span",{className:"text-sm text-gray-600",children:(0,o.__)("Allow access to these tabs:","burst-statistics")}),(0,n.jsx)("div",{className:"flex flex-wrap gap-x-6 gap-y-2",children:d.map(function(e){var t=e.id===f,r=i.includes(e.id);return(0,n.jsxs)("label",{className:"flex items-center gap-2 text-sm ".concat(t?"cursor-default":"cursor-pointer"),children:[(0,n.jsx)("input",{type:"checkbox",checked:r,onChange:function(){return u(e.id)},disabled:t,className:"rounded border-gray-400 text-wp-blue focus:ring-wp-blue cursor-pointer disabled:cursor-default disabled:opacity-60"}),(0,n.jsxs)("span",{className:t?"text-gray-500":"text-gray",children:[e.title,t&&(0,n.jsxs)("span",{className:"ml-1 text-xs text-gray-400",children:["(",(0,o.__)("current view","burst-statistics"),")"]})]})]},e.id)})})]})]})})})]})},P=function(e){var t=e.link,r=e.copiedId,a=e.onCopy,s=e.onRevoke,l=e.isRevoking,u=r===t.token,d=(0,i.useMemo)(function(){return t.shared_tabs&&0!==t.shared_tabs.length?t.shared_tabs.map(function(e){return F(e)}):[]},[t.shared_tabs]),f=(0,i.useMemo)(function(){var e,r,n=null==t?void 0:t.initial_state;return(null===(e=null==n?void 0:n.date_range)||void 0===e?void 0:e.start)&&(null===(r=null==n?void 0:n.date_range)||void 0===r?void 0:r.end)?"".concat((0,w.kz)(n.date_range.start)," – ").concat((0,w.kz)(n.date_range.end)):null},[t]),m=(0,i.useMemo)(function(){var e=null==t?void 0:t.initial_state;return(null==e?void 0:e.filters)?Object.entries(e.filters).filter(function(e){var t=e[1];return t&&""!==t}).map(function(e){var t,r=e[0],n=e[1];return{key:r,label:(null===(t=_.OF[r])||void 0===t?void 0:t.label)||r,value:n}}):[]},[t]),p=(0,i.useMemo)(function(){return(e=t.permissions)?Object.entries(e).filter(function(e){return e[1]}).map(function(e){var t=e[0];return M[t]}).filter(Boolean):[];var e},[t.permissions]);return(0,n.jsx)(c.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"rounded-md border p-3 ".concat(u?"border-green bg-green-50":"border-gray-200 bg-white"," transition-colors duration-200"),children:(0,n.jsxs)("div",{className:"flex gap-2 mb-2 flex-col",children:[(0,n.jsxs)("div",{className:"flex flex-row gap-1.5",children:[(0,n.jsx)("span",{className:"text-base font-medium text-gray-700",children:new Intl.ListFormat(void 0,{style:"long"}).format(d)}),f&&(0,n.jsxs)("span",{className:"inline-flex items-center gap-1 text-xs font-light text-gray-800",children:[(0,n.jsx)(x.A,{name:"calendar",size:10}),f]}),(0,n.jsx)("span",{className:"ml-auto text-xs text-gray-600",children:T(t.expires)})]}),(0,n.jsxs)("div",{className:"flex gap-1.5",children:[(0,n.jsx)("input",{type:"text",readOnly:!0,title:t.url,value:t.url,onClick:function(e){return e.target.select()},className:"max-w-full truncate text-sm text-gray-800 font-mono w-full bg-gray-50 px-2 py-1.5 rounded border border-gray-300 cursor-text focus:border-wp-blue focus:ring-1 focus:ring-wp-blue/20"}),(0,n.jsx)(j.A,{content:u?(0,o.__)("Copied!","burst-statistics"):(0,o.__)("Copy link","burst-statistics"),children:(0,n.jsx)("button",{onClick:function(){return a(t)},className:"rounded p-1 text-gray-400 transition-colors hover:bg-gray-200 hover:text-gray-600",children:u?(0,n.jsx)(x.A,{name:"check",size:14,color:"green"}):(0,n.jsx)(x.A,{name:"copy",size:14})})}),(0,n.jsx)(j.A,{content:(0,o.__)("Revoke","burst-statistics"),children:(0,n.jsx)("button",{onClick:function(){return s(t.token)},disabled:l,className:"rounded p-1 text-gray-400 transition-colors hover:bg-red-50 hover:text-red disabled:opacity-50",children:(0,n.jsx)(x.A,{name:"times",size:14})})})]}),0<m.length||0<p.length&&(0,n.jsxs)("div",{className:"flex flex-wrap items-center gap-1.5",children:[m.map(function(e){return(0,n.jsx)(j.A,{content:"".concat(e.label,": ").concat(e.value),children:(0,n.jsxs)("span",{className:"inline-flex items-center gap-1 rounded bg-gray-100 border border-gray-300 px-1.5 py-0.5 text-xs font-light text-gray-800",children:[(0,n.jsx)(x.A,{name:"filter",size:10}),e.label]})},e.key)}),p.map(function(e){return(0,n.jsxs)("span",{className:"inline-flex items-center gap-1 rounded bg-gray-100 border border-gray-300 px-1.5 py-0.5 text-xs font-light text-gray-800",children:[(0,n.jsx)(x.A,{name:"check",size:10}),e]},e)})]})]})})},L=function(e){var t=e.isOpen,r=e.onToggle,a=e.links,s=e.isLoading,i=e.copiedId,u=e.onCopy,d=e.onRevoke,f=e.isRevoking,m=a.length;return s||0!==m?(0,n.jsxs)("div",{className:"border-t border-gray-200 pt-4 mt-4",children:[(0,n.jsxs)("button",{type:"button",onClick:r,className:"flex w-full items-center gap-2 text-left text-sm font-medium text-gray-600 hover:text-gray-800 transition-colors",children:[(0,n.jsx)(x.A,{name:"chevron-right",size:14,className:"text-gray-600 transition-transform duration-200 ".concat(t?"rotate-90":"")}),(0,n.jsxs)("span",{children:[(0,o.__)("Active shared links","burst-statistics"),!s&&0<m&&(0,n.jsxs)("span",{className:"ml-1.5 text-gray-500",children:["(",m,")"]})]})]}),(0,n.jsx)(l.N,{children:t&&(0,n.jsx)(c.P.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden",children:(0,n.jsx)("div",{className:"pt-3 space-y-2",children:s?(0,n.jsx)("p",{className:"text-sm text-gray-500 py-2",children:(0,o.__)("Loading…","burst-statistics")}):(0,n.jsx)(l.N,{children:a.map(function(e){return(0,n.jsx)(P,{link:e,copiedId:i,onCopy:u,onRevoke:d,isRevoking:f},e.token)})})})})})]}):null},z=function(){var e=(0,m.A)().isLicenseValidFor,t=(0,u.z)(),r=(0,p.A)(),a=r.startDate,s=r.endDate,l=(0,g.R7)().filters,c=(0,i.useMemo)(function(){return t.pathname.replace(/^\//,"").split("/")[0]||"dashboard"},[t.pathname]),x=(0,i.useMemo)(function(){return(Array.isArray(burst_settings.menu)?burst_settings.menu:Object.values(burst_settings.menu||{})).filter(function(e){return e.shareable}).map(function(e){return{id:e.id,title:e.title}})},[]),j=(0,i.useState)(!1),_=j[0],w=j[1],M=(0,i.useState)("7d"),F=M[0],T=M[1],P=(0,i.useState)(D),z=P[0],V=P[1],B=(0,i.useState)(!1),G=B[0],q=B[1],W=(0,i.useState)(!1),U=W[0],K=W[1],Z=(0,i.useState)([]),H=Z[0],Y=Z[1];(0,i.useEffect)(function(){if(_){var e=x.map(function(e){return e.id});e.includes(c)?Y([c]):0<e.length&&Y([e[0]])}},[_,c,x]);var Q=(0,i.useState)([]),$=Q[0],J=Q[1],X=(0,i.useState)(!1),ee=X[0],te=X[1],re=(0,i.useState)(!1),ne=re[0],ae=re[1],se=(0,i.useState)(!1),ie=se[0],oe=se[1],le=(0,i.useState)(null),ce=le[0],ue=le[1],de=(0,N.A)(function(e){return e.isShareableLinkViewer}),fe=(0,i.useCallback)(function(e){V(function(t){var r;return k(k({},t),((r={})[e]=!t[e],r))})},[]),me=(0,i.useCallback)(function(e){e!==c&&Y(function(t){return t.includes(e)?t.filter(function(t){return t!==e}):O(O([],t,!0),[e],!1)})},[c]),pe=(0,i.useCallback)(function(){return C(void 0,void 0,void 0,function(){var e,t;return A(this,function(r){switch(r.label){case 0:te(!0),r.label=1;case 1:return r.trys.push([1,3,4,5]),[4,(0,d.Eo)("get_share_links")];case 2:return e=r.sent(),J(e.share_links||[]),[3,5];case 3:return t=r.sent(),console.error("Failed to fetch share links:",t),[3,5];case 4:return te(!1),[7];case 5:return[2]}})})},[]);(0,i.useEffect)(function(){_&&pe()},[_,pe]);var ge=(0,i.useCallback)(function(){w(!1),ue(null),q(!1),K(!1),V(D)},[]),he=(0,i.useCallback)(function(){return C(void 0,void 0,void 0,function(){var e,t,r,n,i,c;return A(this,function(u){switch(u.label){case 0:ae(!0),u.label=1;case 1:return u.trys.push([1,5,6,7]),e=window.location.href,t=e.replace(/wp-admin\/admin\.php\?page=burst/,"burst-dashboard"),r={date_range:{start:a||"",end:s||""},filters:{}},l&&Object.entries(l).forEach(function(e){var t=e[0],n=e[1];n&&""!==n&&(r.filters[t]=n)}),[4,(0,d.Eo)("get_share_token",{expiration:F,view_url:t,permissions:z,shared_tabs:H,initial_state:r})];case 2:return(n=u.sent()).share_token&&n.share_url?(i=n.share_url,[4,E(i)]):(f.oR.error((0,o.__)("Failed to generate share link","burst-statistics")),[2]);case 3:return u.sent(),[4,pe()];case 4:return u.sent(),K(!0),ue(n.share_token),f.oR.success((0,o.__)("Link created and copied to clipboard!","burst-statistics")),setTimeout(function(){return ue(null)},3e3),[3,7];case 5:return c=u.sent(),console.error("Failed to generate share link:",c),f.oR.error((0,o.__)("Failed to generate share link","burst-statistics")),[3,7];case 6:return ae(!1),[7];case 7:return[2]}})})},[F,z,H,a,s,l,pe]),be=(0,i.useCallback)(function(e){return C(void 0,void 0,void 0,function(){var t;return A(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,E(e.url)];case 1:return r.sent(),ue(e.token),f.oR.success((0,o.__)("Link copied!","burst-statistics")),setTimeout(function(){return ue(null)},2e3),[3,3];case 2:return t=r.sent(),console.error("Failed to copy link:",t),f.oR.error((0,o.__)("Failed to copy link","burst-statistics")),[3,3];case 3:return[2]}})})},[]),ve=(0,i.useCallback)(function(e){return C(void 0,void 0,void 0,function(){var t,r;return A(this,function(n){switch(n.label){case 0:oe(!0),n.label=1;case 1:return n.trys.push([1,3,4,5]),[4,(0,d.Eo)("revoke_share_link",{token:e})];case 2:return(t=n.sent()).success&&(J(t.share_links||[]),f.oR.success((0,o.__)("Link revoked","burst-statistics"))),[3,5];case 3:return r=n.sent(),console.error("Failed to revoke link:",r),f.oR.error((0,o.__)("Failed to revoke link","burst-statistics")),[3,5];case 4:return oe(!1),[7];case 5:return[2]}})})},[]);return de?null:e("share-link")?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(h.wk,{label:"",icon:"referrer",onClick:function(){return w(!0)}}),(0,n.jsx)(b.A,{isOpen:_,onClose:ge,title:(0,o.__)("Share dashboard","burst-statistics"),content:(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)("p",{className:"text-gray text-sm",children:(0,o.__)("Generate a private, shareable link to a live view of this dashboard.","burst-statistics")}),(0,n.jsxs)("div",{className:"rounded-lg border border-gray-200 bg-white p-4 space-y-4",children:[(0,n.jsx)(I,{currentTab:c,startDate:a,endDate:s,filters:l}),(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("span",{className:"text-base font-medium text-gray-800",children:(0,o.__)("Link expires in:","burst-statistics")}),(0,n.jsx)(v.A,{value:F,onChange:T,options:S})]}),(0,n.jsx)(R,{isOpen:G,onToggle:function(){return q(function(e){return!e})},permissions:z,onPermissionToggle:fe,sharedTabs:H,onTabToggle:me,shareableTabs:x,currentTab:c}),(0,n.jsx)(y.A,{onClick:he,disabled:ne,btnVariant:"primary",className:"w-full justify-center",children:ne?(0,o.__)("Generating…","burst-statistics"):(0,o.__)("Generate shareable link","burst-statistics")})]}),(0,n.jsx)(L,{isOpen:U,onToggle:function(){return K(function(e){return!e})},links:$,isLoading:ee,copiedId:ce,onCopy:be,onRevoke:ve,isRevoking:ie})]})})]}):null},V=r(23130),B=function(){return(0,n.jsxs)("div",{className:"col-span-12 flex justify-between items-center flex-wrap gap-y-2",children:[(0,n.jsx)(V.A,{children:(0,n.jsx)(a.y,{})}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(V.A,{children:(0,n.jsx)(s.A,{})}),(0,n.jsx)(V.A,{children:(0,n.jsx)(z,{})})]})]})}},28786:(e,t,r)=>{r.d(t,{A:()=>i});var n=r(91637),a=r(9564),s=r(27723);const i=function(e){var t=e.content,r=e.side,i=void 0===r?"top":r,o=e.hasArrow,l=void 0===o||o,c=e.delayDuration,u=void 0===c?300:c,d=e.children;return(0,n.jsx)(a.Kq,{delayDuration:u,children:(0,n.jsxs)(a.bL,{children:[(0,n.jsx)(a.l9,{"aria-label":(0,s.__)("Help information","burst-statistics"),onClick:function(e){e.preventDefault(),e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},children:d}),(0,n.jsxs)(a.UC,{side:i,sideOffset:5,className:"z-[99999] max-w-xs bg-gray-200 text-gray border border-gray-300 px-2 py-1.5 text-base rounded shadow-md\n            animate-in fade-in-50 data-[state=closed]:animate-out data-[state=closed]:fade-out-0\n            data-[state=delayed-open]:data-[side=top]:slide-in-from-bottom-2\n            data-[state=delayed-open]:data-[side=bottom]:slide-in-from-top-2\n            data-[state=delayed-open]:data-[side=left]:slide-in-from-right-2\n            data-[state=delayed-open]:data-[side=right]:slide-in-from-left-2",onClick:function(e){return e.stopPropagation()},children:["string"==typeof t?(0,s.__)(t,"burst-statistics"):t,l&&(0,n.jsx)(a.i3,{className:"fill-gray-300",width:10,height:5})]})]})})}},34342:(e,t,r)=>{r.d(t,{A:()=>ue});var n=r(91637),a=r(27723),s=r(51609),i=r(41631),o=r(53411);const l=function(e){var t=e.value,r=void 0===t?"":t,i=e.onChange,l=e.placeholder,c=void 0===l?(0,a.__)("Search","burst-statistics"):l,u=e.className,d=void 0===u?"":u,f=(0,s.useState)(!1),m=f[0],p=f[1],g=(0,s.useRef)(null),h=(0,s.useCallback)(function(){p(function(e){var t=!e;return t?setTimeout(function(){var e;null===(e=g.current)||void 0===e||e.focus()},0):null==i||i(""),t})},[i]),b=(0,s.useCallback)(function(){""===r.trim()&&p(!1)},[r]),v=(0,s.useCallback)(function(e){null==i||i(e.target.value)},[i]),y=(0,s.useCallback)(function(){var e;null==i||i(""),null===(e=g.current)||void 0===e||e.focus()},[i]),x=m||""!==r.trim();return(0,n.jsx)("div",{className:"relative ".concat(d),children:x?(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("input",{ref:g,className:"bg-white border border-gray-300 rounded-full px-2.5 py-1 pr-10 min-w-48 transition-all duration-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 focus:outline-none focus:shadow-sm",type:"text",placeholder:c,value:r,onChange:v,onBlur:b,onKeyDown:function(e){"Escape"===e.key&&(null==i||i(""),p(!1))}}),r&&(0,n.jsx)("button",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors duration-200",onClick:y,onMouseDown:function(e){return e.preventDefault()},tabIndex:-1,"aria-label":(0,a.__)("Clear search","burst-statistics"),children:(0,n.jsx)(o.A,{name:"times",size:16})})]}):(0,n.jsx)("div",{className:"bg-gray-100 border border-gray-400 focus:ring-blue-500 cursor-pointer rounded-full p-2.5 transition-all duration-200 hover:bg-gray-400 hover:shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2 opacity-30 group-hover/root:opacity-100",onClick:h,onKeyDown:function(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),h())},tabIndex:0,role:"button","aria-label":c,children:(0,n.jsx)(o.A,{name:"search"})})})};var c=r(42617),u=r(65162);const d=function(e){var t=e.children,r=e.className,i=e.title,l=e.subtitle,c=e.bulletPoints,d=void 0===c?[]:c,f=e.primaryButtonUrl,m=e.secondaryButtonUrl,p=(0,s.useState)(!1),g=p[0],h=p[1];return(0,n.jsxs)(u.bL,{open:g,onOpenChange:h,children:[(0,n.jsx)(u.l9,{className:"cursor-pointer ".concat(r),onMouseEnter:function(){return h(!0)},children:t}),(0,n.jsx)(u.ZL,{children:(0,n.jsxs)(u.UC,{className:"z-[9999] min-w-[320px] max-w-[400px] rounded-lg border border-gray-200 bg-white p-0 shadow-xl",align:"start",sideOffset:10,arrowPadding:10,children:[(0,n.jsx)(u.i3,{className:"fill-white drop-shadow-sm"}),(0,n.jsxs)("div",{className:"relative border-b border-gray-100 px-6 py-4",children:[(0,n.jsx)(u.bm,{className:"absolute right-3 top-3 rounded-full p-1 transition-colors hover:bg-gray-100",children:(0,n.jsx)(o.A,{name:"times",size:16})}),(0,n.jsx)("h5",{className:"mb-1 pr-8 text-lg font-semibold text-black",children:i}),(0,n.jsx)("h6",{className:"m-0 text-sm text-gray",children:l})]}),(0,n.jsxs)("div",{className:"px-6 py-4",children:[(0,n.jsx)("p",{className:"mb-3 text-xs font-medium uppercase tracking-wide text-gray",children:(0,a.__)("Pro features include:","burst-statistics")}),(0,n.jsx)("div",{className:"space-y-2",children:d.map(function(e){var t=e.text,r=e.icon;return(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("div",{className:"flex h-5 w-5 flex-shrink-0 items-center justify-center",children:(0,n.jsx)(o.A,{name:r,size:16,color:"#2B8133"})}),(0,n.jsx)("p",{className:"m-0 text-sm text-gray",children:t})]},t)})})]}),(0,n.jsxs)("div",{className:"flex flex-col gap-2 rounded-b-lg border-t border-gray-100 bg-gray-50 px-6 py-4",children:[(0,n.jsx)("a",{href:f,target:"_blank",rel:"noopener noreferrer",className:"w-full rounded bg-primary px-4 py-1 text-center text-base font-normal text-white no-underline transition-all duration-200 hover:bg-primary hover:[box-shadow:0_0_0_3px_rgba(43,129,51,0.5)]",children:(0,a.__)("Upgrade to Pro","burst-statistics")}),(0,n.jsx)("a",{href:m,target:"_blank",rel:"noopener noreferrer",className:"w-full rounded border border-gray-400 bg-gray-100 px-4 py-1 text-center text-base font-normal text-gray no-underline transition-all duration-200 hover:bg-gray-200 hover:text-gray hover:[box-shadow:0_0_0_3px_rgba(0,0,0,0.1)]",children:(0,a.__)("Learn More","burst-statistics")})]})]})})]})};var f=r(84400);const m=(0,s.memo)(function(e){var t=e.value,r=e.onChange,a=e.options,i=(0,s.useCallback)(function(e){r(e)},[r]),l=(0,f.A)(),u=l.isLicenseValid,m=l.isPro,p=m&&u,g=(0,s.useMemo)(function(){return{hasProOptions:a.some(function(e){return e.pro}),firstOption:a[0]}},[a]),h=g.hasProOptions,b=g.firstOption;return h&&!p&&(null==b?void 0:b.upsellPopover)?(0,n.jsxs)(d,{title:b.upsellPopover.title,subtitle:b.upsellPopover.subtitle,bulletPoints:b.upsellPopover.bulletPoints,primaryButtonUrl:b.upsellPopover.primaryButtonUrl,secondaryButtonUrl:b.upsellPopover.secondaryButtonUrl,children:[(0,n.jsx)("h3",{className:"flex items-center gap-s burst-h4",children:b.label}),(0,n.jsx)(o.A,{name:"chevron-down"})]}):1===a.length?(0,n.jsx)("span",{className:"text-lg font-semibold",children:a[0].label}):(0,n.jsxs)(c.bL,{value:t,onValueChange:i,children:[(0,n.jsxs)(c.l9,{className:"inline-flex items-center justify-between cursor-pointer py-2 px-0 all-[unset]",children:[(0,n.jsx)(c.WT,{placeholder:"Select an option…"}),(0,n.jsx)(c.In,{className:"ml-2",children:(0,n.jsx)(o.A,{name:"chevron-down"})})]}),(0,n.jsx)(c.UC,{className:"bg-gray-100\n          z-[99]\n          border border-gray-400\n          rounded\n          flex flex-col flex-wrap\n          gap-4\n          left-0 right-0\n          shadow-[hsl(206_22%_7%_/_35%)_0px_10px_38px_-10px,hsl(206_22%_7%_/_20%)_0px_10px_20px_-15px]\n          [animation-duration:600ms]\n          [animation-timing-function:cubic-bezier(0.16,1,0.3,1)]\n          [will-change:transform,opacity]\n          data-[state=open]:animate-slideDownAndFade",position:"popper",alignOffset:-10,children:(0,n.jsx)(c.LM,{children:a.map(function(e){return(0,n.jsx)(c.q7,{value:e.key,className:"min-w-[min(100vw,150px)]\n                cursor-pointer\n                text-black\n                text-md\n                px-3 py-2.5\n                rounded\n                flex items-center\n                data-[disabled]:text-gray\n                data-[disabled]:bg-gray-100\n                data-[disabled]:cursor-not-allowed\n                data-[highlighted]:text-black\n                data-[highlighted]:outline-none\n                data-[highlighted]:bg-brand-lightest\n                data-[state=selected]:text-gray\n                data-[state=selected]:outline-none",disabled:e.pro&&!m,children:(0,n.jsx)(c.p4,{children:e.label})},e.key)})})})]})});var p=r(30346),g=r(14243),h=function(){return h=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},h.apply(this,arguments)},b=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r},v=(0,p.v)()((0,g.Zr)(function(e,t){return{selectedConfigs:{},columns:{},sortConfigs:{},getSelectedConfig:function(e,r){return t().selectedConfigs[e]||r},setSelectedConfig:function(t,r){e(function(e){var n;return{selectedConfigs:h(h({},e.selectedConfigs),(n={},n[t]=r,n))}})},getColumns:function(e,r){return t().columns[e]||r},setColumns:function(t,r){e(function(e){var n;return{columns:h(h({},e.columns),(n={},n[t]=r,n))}})},getSortConfig:function(e,r){return t().sortConfigs[e]||r},setSortConfig:function(t,r){e(function(e){var n;return{sortConfigs:h(h({},e.sortConfigs),(n={},n[t]=r,n))}})},clearSortConfig:function(t){e(function(e){var r=e.sortConfigs,n=t;return r[n],{sortConfigs:b(r,["symbol"==typeof n?n:n+""])}})}}},{name:"burst-datatable-storage",partialize:function(e){return{selectedConfigs:e.selectedConfigs,columns:e.columns,sortConfigs:e.sortConfigs}}})),y=function(e,t,r){if(r||2===arguments.length)for(var n,a=0,s=t.length;a<s;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))},x=function(e){var t=e.index,r=e.isLast,a="".concat(100*t,"ms"),s=["70%","85%","60%","90%","75%","80%","65%","88%","72%","78%"],i=s[t%s.length];return(0,n.jsxs)("div",{className:"flex items-center gap-4 px-6 max-xl:px-2.5 ".concat(r?"":"border-b border-gray-100"),style:{height:"".concat(48,"px")},children:[(0,n.jsx)("div",{className:"h-4 bg-gray-200 rounded animate-pulseSlow flex-1 max-w-[280px]",style:{animationDelay:a,width:i}}),(0,n.jsx)("div",{className:"h-4 bg-gray-200 rounded animate-pulseSlow w-16 ml-auto",style:{animationDelay:"".concat(100*t+50,"ms")}})]})},j=function(){return(0,n.jsxs)("div",{className:"flex items-center gap-4 px-6 max-xl:px-2.5 border-b border-gray-200 bg-gray-50",style:{height:"".concat(52,"px")},children:[(0,n.jsx)("div",{className:"flex items-center gap-2 flex-1",children:(0,n.jsx)("span",{className:"text-sm font-semibold text-gray-400 select-none animate-pulseSlow",style:{filter:"blur(4px)"},children:(0,a.__)("Page URL","burst-statistics")})}),(0,n.jsx)("div",{className:"flex items-center gap-2 ml-auto",children:(0,n.jsx)("span",{className:"text-sm font-semibold text-gray-400 select-none animate-pulseSlow",style:{filter:"blur(4px)"},children:(0,a.__)("Pageviews","burst-statistics")})})]})},_=function(){return(0,n.jsxs)("div",{className:"flex items-center justify-end gap-4 px-6 max-xl:px-2.5 border-t border-gray-200 bg-white",style:{height:"".concat(56,"px")},children:[(0,n.jsx)("div",{className:"flex items-center gap-2",children:(0,n.jsx)("div",{className:"h-8 w-16 bg-gray-100 rounded border border-gray-200 animate-pulseSlow",style:{animationDelay:"200ms"}})}),(0,n.jsxs)("span",{className:"text-sm text-gray-400 select-none animate-pulseSlow",style:{filter:"blur(3px)",animationDelay:"100ms"},children:["1-10 ",(0,a.__)("of","burst-statistics")," 100"]}),(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)("div",{className:"w-8 h-8 bg-gray-100 rounded border border-gray-200 animate-pulseSlow flex items-center justify-center",style:{animationDelay:"150ms"},children:(0,n.jsx)("svg",{className:"w-4 h-4 text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"})})}),(0,n.jsx)("div",{className:"w-8 h-8 bg-gray-100 rounded border border-gray-200 animate-pulseSlow flex items-center justify-center",style:{animationDelay:"200ms"},children:(0,n.jsx)("svg",{className:"w-4 h-4 text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,n.jsx)("div",{className:"w-8 h-8 bg-gray-100 rounded border border-gray-200 animate-pulseSlow flex items-center justify-center",style:{animationDelay:"250ms"},children:(0,n.jsx)("svg",{className:"w-4 h-4 text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),(0,n.jsx)("div",{className:"w-8 h-8 bg-gray-100 rounded border border-gray-200 animate-pulseSlow flex items-center justify-center",style:{animationDelay:"300ms"},children:(0,n.jsx)("svg",{className:"w-4 h-4 text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 5l7 7-7 7M5 5l7 7-7 7"})})})]})]})},w=function(){return(0,n.jsxs)("div",{className:"w-full",style:{minHeight:"".concat(588,"px")},children:[(0,n.jsx)(j,{}),(0,n.jsx)("div",{children:y([],Array(10),!0).map(function(e,t){return(0,n.jsx)(x,{index:t,isLast:9===t},t)})}),(0,n.jsx)(_,{})]})},N=function(){return(0,n.jsxs)("div",{className:"flex items-center justify-end gap-4 px-6 max-xl:px-2.5 border-t border-gray-200 bg-white opacity-40",style:{height:"".concat(56,"px")},children:[(0,n.jsx)("div",{className:"flex items-center gap-2",children:(0,n.jsx)("div",{className:"h-8 w-16 bg-gray-100 rounded border border-gray-200"})}),(0,n.jsxs)("span",{className:"text-sm text-gray-400 select-none",children:["0-0 ",(0,a.__)("of","burst-statistics")," 0"]}),(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)("div",{className:"w-8 h-8 bg-gray-100 rounded border border-gray-200 flex items-center justify-center",children:(0,n.jsx)("svg",{className:"w-4 h-4 text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"})})}),(0,n.jsx)("div",{className:"w-8 h-8 bg-gray-100 rounded border border-gray-200 flex items-center justify-center",children:(0,n.jsx)("svg",{className:"w-4 h-4 text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,n.jsx)("div",{className:"w-8 h-8 bg-gray-100 rounded border border-gray-200 flex items-center justify-center",children:(0,n.jsx)("svg",{className:"w-4 h-4 text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),(0,n.jsx)("div",{className:"w-8 h-8 bg-gray-100 rounded border border-gray-200 flex items-center justify-center",children:(0,n.jsx)("svg",{className:"w-4 h-4 text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 5l7 7-7 7M5 5l7 7-7 7"})})})]})]})},k=function(){return(0,n.jsxs)("div",{className:"w-full flex flex-col",style:{minHeight:"".concat(588,"px")},children:[(0,n.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center text-center",children:[(0,n.jsx)("div",{className:"mb-4",children:(0,n.jsx)("svg",{className:"w-16 h-16 text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1,children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,n.jsx)("h3",{className:"text-base font-medium text-gray-600 mb-1",children:(0,a.__)("No data to display","burst-statistics")}),(0,n.jsx)("p",{className:"text-sm text-gray-400 max-w-xs",children:(0,a.__)("There is no data available for the selected filters and date range.","burst-statistics")})]}),(0,n.jsx)(N,{})]})},C=function(e){var t=e.error;return(0,n.jsxs)("div",{className:"w-full flex flex-col",style:{minHeight:"".concat(588,"px")},children:[(0,n.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center text-center",children:[(0,n.jsx)("div",{className:"mb-4",children:(0,n.jsx)("svg",{className:"w-16 h-16 text-red-light",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1,children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),(0,n.jsx)("h3",{className:"text-base font-medium text-gray-600 mb-1",children:(0,a.__)("Something went wrong","burst-statistics")}),(0,n.jsx)("p",{className:"text-sm text-gray-400 max-w-xs",children:(null==t?void 0:t.message)||(0,a.__)("An unexpected error occurred while loading data.","burst-statistics")})]}),(0,n.jsx)(N,{})]})};const A=(0,s.memo)(function(e){var t=e.isLoading,r=e.error,a=e.noData;return t?(0,n.jsx)(w,{}):r?(0,n.jsx)(C,{error:r}):a?(0,n.jsx)(k,{}):(0,n.jsx)(C,{error:null})});var O,S=r(99696),D=r(88887),M=r(88432),F=r(61626),E=r(3663),T=r(91788),I=r(42552),R=r(8353),P=r(50616),L=r(28786),z=function(){return z=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},z.apply(this,arguments)},V=function(e,t,r){if(r||2===arguments.length)for(var n,a=0,s=t.length;a<s;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))},B={PERCENTAGE:"percentage",TIME:"time",COUNTRY:"country",CONTINENT:"continent",URL:"url",TEXT:"text",INTEGER:"integer",REFERRER:"referrer",FLOAT:"float",CURRENCY:"currency"},G=(0,s.memo)(R.A),q=(0,s.memo)(function(e){var t=e.value;return(0,n.jsx)(G,{filter:"country_code",filterValue:t,children:(0,n.jsx)(I.A,{country:t,countryNiceName:(0,T.qQ)(t)})})});q.displayName="CountryFilter";var W=(0,s.memo)(function(e){var t=e.value;return(0,n.jsx)(G,{filter:"continent_code",filterValue:t,children:(0,n.jsx)(n.Fragment,{children:(0,T.Iq)(t)})})});W.displayName="ContinentFilter";var U=(0,s.memo)(function(e){var t=e.value,r=e.row;return(0,n.jsx)(G,{filter:"page_url",filterValue:t,row:r,children:(0,P.S)(t)})});U.displayName="UrlFilter";var K=(0,s.memo)(function(e){var t=e.filter,r=e.value;return(0,n.jsx)(G,{filter:t,filterValue:r,children:r})});K.displayName="TextFilter";var Z=(0,s.memo)(function(e){var t=e.value;return(0,n.jsx)(G,{filter:"referrer",filterValue:t,children:(0,P.S)(t)})});Z.displayName="ReferrerFilter";var H=(0,s.memo)(function(e){var t=e.value,r=(null==t?void 0:t.value)||0;if(!t||!(null==t?void 0:t.currency)||isNaN(r))return"";var a=(0,T.Yo)(t.currency,r),s=!1;return 1e3<r&&(s=(0,T.vv)(t.currency,r)),s?(0,n.jsx)(L.A,{content:s,delayDuration:1e3,children:a}):a});H.displayName="CurrencyValue";var Y=((O={})[B.PERCENTAGE]=function(e){return(0,T.Ee)(e)},O[B.TIME]=function(e){return(0,T.fU)(e)},O[B.INTEGER]=function(e){return parseInt(e,10)},O[B.COUNTRY]=function(e){return e&&""!==e?(0,n.jsx)(q,{value:e}):(0,a.__)("Not set","burst-statistics")},O[B.CONTINENT]=function(e){return(0,n.jsx)(W,{value:e})},O[B.URL]=function(e,t,r){return(0,n.jsx)(U,{filter:t,value:e,row:r})},O[B.TEXT]=function(e,t){return(0,n.jsx)(K,{filter:t,value:e})},O[B.REFERRER]=function(e){return(0,n.jsx)(Z,{value:e})},O[B.FLOAT]=function(e){return parseFloat(e)},O[B.CURRENCY]=function(e){return(0,n.jsx)(H,{value:e})},O),Q=function(e,t){var r=[B.PERCENTAGE,B.TIME,B.INTEGER,B.FLOAT].includes(t),n=t===B.CURRENCY;return function(t,a){var s=t[e],i=a[e];if(null==s&&null==i)return 0;if(null==s)return 1;if(null==i)return-1;if(n){var o="object"==typeof s?parseFloat(s.value):parseFloat(s),l="object"==typeof i?parseFloat(i.value):parseFloat(i);return isNaN(o)&&isNaN(l)?0:isNaN(o)?1:isNaN(l)?-1:o-l}if(r){var c=parseFloat(s),u=parseFloat(i);return isNaN(c)&&isNaN(u)?0:isNaN(c)?1:isNaN(u)?-1:c-u}return String(s).toLowerCase().localeCompare(String(i).toLowerCase())}},$=function(e,t){var r=Y[e];return r?function(e){var s;try{var i=null!==(s=e[t])&&void 0!==s?s:"",l=r(i,t,e);return"conversion_rate"===t||"conversions"===t&&!("conversion_rate"in e)?function(e,t){return t.is_ab_test?("no_winner"===t.significant?(i=(0,a.__)("The test resulted in a tie. More hits might still result in a winner, but the difference will probably be very small.","burst-statistics"),s="gold",r="scale"):"still_running"===t.significant?(i=(0,a.__)("Not enough data yet to declare a winner or tie.","burst-statistics"),s="grey",r="hourglass"):(i=t.winner?(0,a.__)("Winner of the A/B test with a probability of >95%.","burst-statistics"):(0,a.__)("Least performant version of the A/B test with a probability of >95%.","burst-statistics"),s=t.winner?"gold":"black",r=t.winner?"trophy":"frown"),(0,n.jsxs)("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[(0,n.jsx)(o.A,{name:r,color:s,tooltip:i}),e]})):e;var r,s,i}(l,e):l}catch(r){return console.error("Error formatting cell value for column ".concat(t,":"),r),e[t]||""}}:(console.warn("Unknown column format: ".concat(e,". Using default text formatter.")),function(e){return e[t]||""})},J=function(e,t){try{return function(e){if(!e||"object"!=typeof e)throw new Error("Invalid response: expected object");if(!Array.isArray(e.columns))throw new Error("Invalid response: columns must be an array");if(!Array.isArray(e.data))throw new Error("Invalid response: data must be an array")}(e),{columns:e.columns.map(function(e){return function(e,t){var r=t[e.id];if(!r)return e;var n=r.format||B.INTEGER,a=r.align||"left";return z(z({},e),{selector:function(t){return t[e.id]},right:"left"!==a,sortFunction:Q(e.id,n),cell:$(n,e.id)})}(e,t)}),data:V([],e.data,!0)}}catch(e){return console.error("Data transformation error:",e),{columns:[],data:[],error:e.message}}};const X=function(e){return t=void 0,r=void 0,a=function(){var t,r,n,a,s,i,o,l,c;return function(e,t){var r,n,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(s=0)),s;)try{if(r=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((a=(a=s.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){s.label=o[1];break}if(6===o[0]&&s.label<a[1]){s.label=a[1],a=o;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(o);break}a[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),function(e){var t=e.startDate,r=e.endDate,n=e.range,a=e.columnsOptions;if(!t||!r||!n)throw new Error("Missing required parameters: startDate, endDate, range");if(!a||"object"!=typeof a)throw new Error("Missing or invalid columnsOptions parameter")}(e),t=e.startDate,r=e.endDate,n=e.range,a=e.args,s=e.columnsOptions,i=e.type,o="ecommerce-datatable"===i?"ecommerce/datatable":"datatable",[4,(0,E.bQ)(o,t,r,n,a)];case 1:if(!(l=u.sent().data))throw new Error("No data received from API");return[2,J(l,s)];case 2:return c=u.sent(),console.error("Error fetching data table data:",c),[2,{columns:[],data:[],error:c.message}];case 3:return[2]}})},new((n=void 0)||(n=Promise))(function(e,s){function i(e){try{l(a.next(e))}catch(e){s(e)}}function o(e){try{l(a.throw(e))}catch(e){s(e)}}function l(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n(function(e){e(r)})).then(i,o)}l((a=a.apply(t,r||[])).next())});var t,r,n,a};var ee=r(77902),te=r(67744),re=r(11989),ne=r(86274),ae=r(35256),se=r(97813),ie=function(e,t,r){for(var n in void 0===t&&(t=""),void 0===r&&(r={}),e){var a=e[n],s=t?"".concat(t,"__").concat(n):n;null===a?r[s]="":"object"!=typeof a||Array.isArray(a)?r[s]=a:ie(a,s,r)}return r};const oe=function(e){var t=e.data,i=e.filename,l=e.className,c=void 0===l?"":l,u=(0,(0,f.A)().isLicenseValidFor)("sources"),d=(0,s.useState)(!1),m=d[0],p=d[1],g=!t||0===t.length||m||!u,h=(0,s.useRef)(null),b=(0,s.useMemo)(function(){return(0,ae.df)({useKeysAsHeaders:!0,filename:i})},[i]),v=(0,s.useMemo)(function(){return g||t.length>=5e3?"":function(e,t){var r=e.map(function(e){return ie(e)});return(0,ae.Y_)(t)(r)}(t,b)},[t,b]);(0,s.useEffect)(function(){return function(){h.current&&(h.current.terminate(),h.current=null)}},[]);var y=function(){if(!g)if(t.length<5e3)v&&(0,ae.RG)(b)(v);else{p(!0),h.current||(h.current=new Worker(new URL(r.p+r.u(516),r.b),{type:void 0}));var e=h.current;e.onmessage=null,e.onerror=null,e.onmessage=function(e){var t=e.data;(0,ae.RG)(b)(t),p(!1)},e.onerror=function(){console.error("CSV Worker error"),p(!1)},e.postMessage({data:t,filename:i,csvConfig:b})}};return(0,n.jsx)(se.A,{content:u?void 0:(0,a.__)("Available in Burst Pro","burst-statistics"),children:(0,n.jsx)("div",{className:"relative ".concat(c),children:(0,n.jsx)("button",{className:"bg-gray-100 border border-gray-400 focus:ring-blue-500 rounded-full p-2.5 transition-all duration-200 hover:bg-gray-400 hover:shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2 opacity-30 group-hover/root:opacity-100 ".concat(g?"opacity-30 group-hover/root:opacity-30 cursor-not-allowed hover:bg-gray-100":""),onClick:y,onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),y())},"aria-label":i,disabled:g,children:m?(0,n.jsx)(o.A,{name:"loading"}):(0,n.jsx)(o.A,{name:"download"})})})})};var le=function(){return le=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},le.apply(this,arguments)},ce=function(e,t,r){if(r||2===arguments.length)for(var n,a=0,s=t.length;a<s;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))};const ue=(0,s.memo)(function(e){var t,r,o=e.allowedConfigs,c=void 0===o?["pages","referrers"]:o,u=e.id,d=e.isEcommerce,f=void 0!==d&&d,p=(0,D.S)(function(e){return e}),g=p.startDate,h=p.endDate,b=p.range,y=(0,M.R7)().filters,x=c[0],j=(0,(0,ne.A)().getValue)("filtering_by_domain"),_=(null===(t=window.burst_settings)||void 0===t?void 0:t.shouldLoadEcommerce)||!1,w={pages:{label:(0,a.__)("Pages","burst-statistics"),searchable:!0,defaultColumns:["page_url","pageviews","visitors","bounce_rate"],columnsOptions:le(le(le({},j&&{host:{label:(0,a.__)("Domain","burst-statistics"),default:!1,format:"url",align:"left",group_by:!1}}),{page_url:{label:(0,a.__)("Page","burst-statistics"),default:!0,format:"url",align:"left",group_by:!0},pageviews:{label:(0,a.__)("Pageviews","burst-statistics"),category:"traffic",align:"right"},visitors:{label:(0,a.__)("Visitors","burst-statistics"),category:"traffic",pro:!1,align:"right"},sessions:{label:(0,a.__)("Sessions","burst-statistics"),category:"traffic",pro:!0,align:"right"},bounce_rate:{label:(0,a.__)("Bounce rate","burst-statistics"),category:"engagement",format:"percentage",pro:!1,align:"right"},avg_time_on_page:{label:(0,a.__)("Avg. time on page","burst-statistics"),category:"engagement",pro:!0,format:"time",align:"right"},entrances:{label:(0,a.__)("Entrances","burst-statistics"),category:"engagement",pro:!0,align:"right"},exit_rate:{label:(0,a.__)("Exit rate","burst-statistics"),category:"engagement",pro:!0,format:"percentage",align:"right"},conversions:{label:(0,a.__)("Goal completions","burst-statistics"),category:"conversions",pro:!0,align:"right"},conversion_rate:{label:(0,a.__)("Goal conv. rate","burst-statistics"),category:"conversions",format:"percentage",pro:!0,align:"right"}}),_&&{sales:{label:(0,a.__)("Sales","burst-statistics"),category:"conversions",pro:!0,format:"integer",align:"right"},revenue:{label:(0,a.__)("Revenue","burst-statistics"),category:"conversions",pro:!0,format:"currency",align:"right"},sales_conversion_rate:{label:(0,a.__)("Sales conv. rate","burst-statistics"),category:"conversions",pro:!0,format:"percentage",align:"right"},page_value:{label:(0,a.__)("Page value","burst-statistics"),category:"conversions",pro:!0,format:"currency",align:"right"}})},referrers:{label:(0,a.__)("Referrers","burst-statistics"),searchable:!0,defaultColumns:ce(["referrer","visitors","bounce_rate"],_?["sales","revenue"]:["conversions"],!0),columnsOptions:le({referrer:{label:(0,a.__)("Referrer","burst-statistics"),default:!0,format:"referrer",align:"left",group_by:!0},visitors:{label:(0,a.__)("Visitors","burst-statistics"),category:"traffic",pro:!0,align:"right"},sessions:{label:(0,a.__)("Sessions","burst-statistics"),category:"traffic",pro:!0,align:"right"},bounce_rate:{label:(0,a.__)("Bounce rate","burst-statistics"),category:"engagement",format:"percentage",pro:!0,align:"right"},conversions:{label:(0,a.__)("Goal completions","burst-statistics"),category:"conversions",pro:!0,align:"right"}},_&&{sales:{label:(0,a.__)("Sales","burst-statistics"),category:"conversions",pro:!0,format:"integer",align:"right"},revenue:{label:(0,a.__)("Revenue","burst-statistics"),category:"conversions",pro:!0,format:"currency",align:"right"},page_value:{label:(0,a.__)("Page value","burst-statistics"),category:"conversions",pro:!0,format:"currency",align:"right"}})},countries:{label:(0,a.__)("Locations","burst-statistics"),pro:!0,searchable:!0,defaultColumns:ce(["country_code","visitors"],_?["revenue","sales_conversion_rate"]:[],!0),columnsOptions:le({country_code:{label:(0,a.__)("Country","burst-statistics"),default:!0,format:"country",align:"left",group_by:!0},state:{label:(0,a.__)("State","burst-statistics"),format:"text",align:"left",group_by:!0},city:{label:(0,a.__)("City","burst-statistics"),format:"text",align:"left",group_by:!0},continent:{label:(0,a.__)("Continent","burst-statistics"),format:"continent",align:"left",group_by:!0},visitors:{label:(0,a.__)("Visitors","burst-statistics"),category:"traffic",pro:!0,align:"right"},sessions:{label:(0,a.__)("Sessions","burst-statistics"),category:"traffic",pro:!0,align:"right"},bounce_rate:{label:(0,a.__)("Bounce rate","burst-statistics"),category:"engagement",format:"percentage",pro:!0,align:"right"},conversions:{label:(0,a.__)("Goal completions","burst-statistics"),category:"conversions",pro:!0,align:"right"}},_&&{sales:{label:(0,a.__)("Sales","burst-statistics"),category:"conversions",pro:!0,format:"integer",align:"right"},revenue:{label:(0,a.__)("Revenue","burst-statistics"),category:"conversions",pro:!0,format:"currency",align:"right"},sales_conversion_rate:{label:(0,a.__)("Sales conv. rate","burst-statistics"),category:"conversions",pro:!0,format:"percentage",align:"right"},avg_order_value:{label:(0,a.__)("Avg. order value","burst-statistics"),category:"conversions",pro:!0,format:"currency",align:"right"}})},campaigns:{label:(0,a.__)("Campaigns","burst-statistics"),pro:!0,searchable:!0,defaultColumns:ce(["campaign","visitors"],_?["sales","revenue"]:["conversions"],!0),columnsOptions:le({campaign:{label:(0,a.__)("Campaign","burst-statistics"),default:!0,format:"text",align:"left",group_by:!0},source:{label:(0,a.__)("Source","burst-statistics"),format:"text",align:"left",group_by:!0},medium:{label:(0,a.__)("Medium","burst-statistics"),format:"text",align:"left",group_by:!0},term:{label:(0,a.__)("Term","burst-statistics"),format:"text",align:"left",group_by:!0},content:{label:(0,a.__)("Content","burst-statistics"),format:"text",align:"left",group_by:!0},visitors:{label:(0,a.__)("Visitors","burst-statistics"),category:"traffic",pro:!0,align:"right"},bounce_rate:{label:(0,a.__)("Bounce rate","burst-statistics"),category:"engagement",format:"percentage",pro:!0,align:"right"},conversions:{label:(0,a.__)("Goal completions","burst-statistics"),category:"conversions",pro:!0,align:"right"},conversion_rate:{label:(0,a.__)("Goal conv. rate","burst-statistics"),category:"conversions",format:"percentage",pro:!0,align:"right"}},_&&{sales:{label:(0,a.__)("Sales","burst-statistics"),category:"conversions",pro:!0,format:"integer",align:"right"},revenue:{label:(0,a.__)("Revenue","burst-statistics"),category:"conversions",pro:!0,format:"currency",align:"right"},sales_conversion_rate:{label:(0,a.__)("Sales conv. rate","burst-statistics"),category:"conversions",pro:!0,format:"percentage",align:"right"},page_value:{label:(0,a.__)("Page value","burst-statistics"),category:"conversions",pro:!0,format:"currency",align:"right"}})},parameters:{label:(0,a.__)("Parameters","burst-statistics"),searchable:!0,pro:!0,defaultColumns:["parameter","visitors"],columnsOptions:le({parameter:{label:(0,a.__)("Parameter","burst-statistics"),default:!0,format:"text",align:"left",group_by:!0},parameters:{label:(0,a.__)("Parameters","burst-statistics"),format:"text",align:"left",group_by:!0},visitors:{label:(0,a.__)("Visitors","burst-statistics"),category:"traffic",pro:!0,align:"right"},bounce_rate:{label:(0,a.__)("Bounce rate","burst-statistics"),category:"engagement",format:"percentage",pro:!0,align:"right"},conversions:{label:(0,a.__)("Goal completions","burst-statistics"),category:"conversions",pro:!0,align:"right"}},_&&{sales:{label:(0,a.__)("Sales","burst-statistics"),category:"conversions",pro:!0,format:"integer",align:"right"},revenue:{label:(0,a.__)("Revenue","burst-statistics"),category:"conversions",pro:!0,format:"currency",align:"right"},sales_conversion_rate:{label:(0,a.__)("Sales conv. rate","burst-statistics"),category:"conversions",pro:!0,format:"percentage",align:"right"}})},ghost:{label:(0,a.__)("Dummy","burst-statistics"),searchable:!0,defaultColumns:["pageviews"],columnsOptions:{pageviews:{label:(0,a.__)("Pageviews","burst-statistics"),align:"right"},visitors:{label:(0,a.__)("Visitors","burst-statistics"),pro:!0,align:"right"},sessions:{label:(0,a.__)("Sessions","burst-statistics"),pro:!0,align:"right"}}},products:{label:(0,a.__)("Products","burst-statistics"),pro:!0,searchable:!0,defaultColumns:["product","sales","revenue"],columnsOptions:{product:{label:(0,a.__)("Product","burst-statistics"),default:!0,format:"text",align:"left",group_by:!0},adds_to_cart:{label:(0,a.__)("Adds to cart","burst-statistics"),pro:!0,align:"right"},sales:{label:(0,a.__)("Sales","burst-statistics"),pro:!0,align:"right"},revenue:{label:(0,a.__)("Revenue","burst-statistics"),pro:!0,format:"currency",align:"right"}}}},N=v(),k=N.getSelectedConfig,C=N.setSelectedConfig,O=N.getColumns,E=N.setColumns,I=N.getSortConfig,R=N.setSortConfig,P=(0,s.useState)(function(){return k(u,x)}),L=P[0],z=P[1],V=(0,s.useMemo)(function(){return w[L]},[L]),G=(0,s.useMemo)(function(){return(null==V?void 0:V.columnsOptions)||{}},[V]),q=(0,s.useMemo)(function(){return(null==V?void 0:V.defaultColumns)||[]},[V]),W=(0,s.useState)(function(){var e=O(L,q),t=Object.keys(G);return e.filter(function(e){return t.includes(e)})}),U=W[0],K=W[1],Z=(0,s.useState)(function(){var e,t=I(L);return null!==(e=null==t?void 0:t.fieldId)&&void 0!==e?e:2}),H=Z[0],Q=Z[1],$=(0,s.useState)(function(){var e,t=I(L);return null!==(e=null==t?void 0:t.direction)&&void 0!==e?e:"desc"}),J=$[0],ae=$[1],se=(0,s.useCallback)(function(e){var t=e.filter(function(e){return Object.keys(G).includes(e)});JSON.stringify(t)!==JSON.stringify(U)&&(K(t),E(L,t))},[L,U,G,E]),ie=(0,s.useCallback)(function(e){return t=void 0,r=void 0,a=function(){return function(e,t){var r,n,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(s=0)),s;)try{if(r=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((a=(a=s.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){s.label=o[1];break}if(6===o[0]&&s.label<a[1]){s.label=a[1],a=o;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(o);break}a[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}(this,function(t){return z(e),C(u,e),[2]})},new((n=void 0)||(n=Promise))(function(e,s){function i(e){try{l(a.next(e))}catch(e){s(e)}}function o(e){try{l(a.throw(e))}catch(e){s(e)}}function l(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n(function(e){e(r)})).then(i,o)}l((a=a.apply(t,r||[])).next())});var t,r,n,a},[u,C]);(0,s.useEffect)(function(){var e,t=O(L,(null===(e=w[L])||void 0===e?void 0:e.defaultColumns)||[]);se(t);var r=I(L);r?(Q(r.fieldId),ae(r.direction)):(Q(2),ae("desc"))},[L,se,O,I]);var ue=(0,s.useCallback)(function(e,t){var r=e.id||e.selector,n=t.toLowerCase();Q(r),ae(n),R(L,{fieldId:r,direction:n})},[L,R]),de=(0,s.useState)(""),fe=de[0],me=de[1],pe=(0,s.useMemo)(function(){return Object.keys(w).filter(function(e){return c.includes(e)}).map(function(e){return{key:e,label:w[e].label,pro:!!w[e].pro,upsellPopover:w[e].upsellPopover||null}})},[c]),ge=(0,s.useMemo)(function(){var e={filters:y,metrics:Object.keys(G).filter(function(e){return U.includes(e)}),group_by:[]};return U.forEach(function(t){var r;(null===(r=G[t])||void 0===r?void 0:r.group_by)&&e.group_by.push(t)}),e},[y,G,U]),he=(0,F.I)({queryKey:[L,g,h,ge],queryFn:function(){return X({type:f?"ecommerce-datatable":"datatable",startDate:g,endDate:h,range:b,args:ge,columnsOptions:G})},enabled:!!L}),be=he.data||{},ve=(0,s.useMemo)(function(){return be.data||[]},[be.data]),ye=be.columns,xe=(0,s.useMemo)(function(){if(!ye||!G)return[];var e=Object.keys(G);return ye.sort(function(t,r){return e.indexOf(t.selector)-e.indexOf(r.selector)})},[ye,G]),je=(0,s.useMemo)(function(){var e=[];if((null==V?void 0:V.searchable)&&Array.isArray(ve))if(""===fe.trim())e=ve;else{var t=fe.toLowerCase(),r=Object.keys(G).filter(function(e){var t;return null===(t=G[e])||void 0===t?void 0:t.group_by});e=ve.filter(function(e){return r.some(function(r){var n,a=e[r];if(null==a)return!1;var s=function(e,t,r){if(null==e)return"";var n=Y[t];if(!n)return e.toString();var a=n(e,r);return null==a?"":"object"==typeof a?t===B.COUNTRY?(0,T.qQ)(e)||e:t===B.CONTINENT?(0,T.Iq)(e)||e:e.toString():a.toString()}(a,null===(n=G[r])||void 0===n?void 0:n.format,r);return s.toLowerCase().includes(t)})})}else e=ve;return xe&&Array.isArray(xe)&&0!==xe.length?(e=ce([],e,!0).sort(function(e,t){var r=H;!r&&1<xe.length&&(r=xe[1].id);var n=e[r],a=t[r];if(null==n)return 1;if(null==a)return-1;var s=Number(n),i=Number(a),o=!isNaN(s)&&""!==n&&null!==n,l=!isNaN(i)&&""!==a&&null!==a;if(o&&l)return"asc"===J?s-i:i-s;var c=String(n).toLowerCase(),u=String(a).toLowerCase();return"asc"===J?c.localeCompare(u):u.localeCompare(c)}),Array.isArray(e)?e:[]):e},[H,J,ve,fe,null==V?void 0:V.searchable,G,xe]),_e=he.isLoading||he.isFetching,we=he.error,Ne=0===je.length;0<xe.length&&(xe[0]=le(le({},xe[0]),{allowOverflow:!0,wrap:!1,grow:2}));var ke=(0,s.useMemo)(function(){var e=xe.findIndex(function(e){return e.id===H});return{columns:xe,data:je,sortServer:!0,defaultSortFieldId:-1!==e?e+1:2,defaultSortAsc:"asc"===J,onSort:ue,pagination:!0,paginationRowsPerPageOptions:[10,25,50,100,200],paginationPerPage:10,paginationComponentOptions:{rowsPerPageText:"",rangeSeparatorText:(0,a.__)("of","burst-statistics"),noRowsPerPage:!1,selectAllRowsItem:!0,selectAllRowsItemText:(0,a.__)("All","burst-statistics")},noDataComponent:(0,n.jsx)(A,{noData:Ne,data:[],isLoading:_e,error:we}),progressPending:_e,progressComponent:(0,n.jsx)(A,{noData:Ne,data:[],isLoading:_e,error:we})}},[xe,je,H,J,ue,Ne,_e,we]);if(!V)return null;var Ce=(null===(r=window.burst_admin)||void 0===r?void 0:r.site_url)||window.location.origin,Ae=new URL(Ce).hostname.replace(/\./g,"-").replace(/[^a-zA-Z0-9-]/g,""),Oe="".concat(Ae,"-").concat(L,"-").concat(g,"-").concat(h);return(0,n.jsxs)(ee.e,{className:"row-span-2 overflow-hidden xl:col-span-6 group/root",children:[(0,n.jsx)(te.q,{className:"border-b border-gray-200",title:(0,n.jsx)(m,{value:L,onChange:ie,options:pe,disabled:[]}),controls:(0,n.jsxs)(n.Fragment,{children:[(null==V?void 0:V.searchable)&&(0,n.jsx)(l,{value:fe,onChange:me,className:"ml-auto"}),(0,n.jsx)(oe,{data:je,filename:Oe}),(0,n.jsx)(i.A,{selectedOptions:U,options:G,defaultOptions:q,onApply:se})]})}),(0,n.jsx)(re.t,{className:"px-0 py-0",children:(0,n.jsx)(S.Ay,le({},ke))})]})})},37891:(e,t,r)=>{r.d(t,{A:()=>g});var n=r(91637),a=r(50616),s=r(53411),i=r(50552),o=r(30346),l=r(14243),c=function(){return c=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},c.apply(this,arguments)},u=(0,o.v)((0,l.Zr)(function(e,t){return{testVariations:{},getTestVariation:function(e){var r;return(null===(r=t().testVariations[e])||void 0===r?void 0:r.variation)||null},setTestVariation:function(t,r){e(function(e){var n;return{testVariations:c(c({},e.testVariations),(n={},n[t]={variation:r,assignedAt:Date.now()},n))}})},assignRandomVariation:function(e,r){var n=r[Math.floor(Math.random()*r.length)];return t().setTestVariation(e,n),n},hasTestVariation:function(e){var r=t();return Boolean(r.testVariations[e])},getTestData:function(e){return t().testVariations[e]||null},removeTestVariation:function(t){e(function(e){var r=c({},e.testVariations);return delete r[t],{testVariations:r}})},clearAllTests:function(){e({testVariations:{}})},getTestsSummary:function(){var e=t();return Object.entries(e.testVariations).reduce(function(e,t){var r=t[0],n=t[1];return e[r]={variation:n.variation,assignedAt:n.assignedAt,assignedDate:new Date(n.assignedAt).toISOString()},e},{})}}},{name:"burst-ab-test-storage",partialize:function(e){return{testVariations:e.testVariations}}})),d=r(51609),f=r(27723),m=r(84400),p={sales:{upgradePlan:{header:(0,f.__)("Unlock Sales Performance","burst-statistics"),subTitle:(0,f.__)("Gain valuable insights into your store’s revenue, top products, and sales trends.","burst-statistics"),licenseInsufficient:(0,f.__)("Your current license does not include the Sales dashboard.","burst-statistics")},testID:"sales-upsell-copy-v1",variations:{A:{utm_medium:"sales-upsell-variation-a",title:(0,f.__)("Is your checkout costing you sales?","burst-statistics"),description:(0,f.__)("You work hard to bring visitors to your site. But do you know why some buy and others leave? Without the right insights, it’s impossible to see where your funnel is leaking revenue. Burst Pro reveals what’s working, what’s broken, and where you can make small changes that drive big results.","burst-statistics"),bullets:[{icon:"goals",text:(0,f.__)("Find drop-offs: See exactly where visitors leave in your checkout funnel.","burst-statistics")},{icon:"goals",text:(0,f.__)("Reduce cart abandonment: Identify checkout issues before they cost sales.","burst-statistics")},{icon:"goals",text:(0,f.__)("Spot opportunities: Learn which products, channels, and devices generate the most revenue.","burst-statistics")}]},B:{utm_medium:"sales-upsell-variation-b",title:(0,f.__)("Are your visitors buying, or just browsing?","burst-statistics"),description:"",bullets:[{icon:"goals",text:(0,f.__)("Uncover checkout drop‑offs","burst-statistics")},{icon:"goals",text:(0,f.__)("Spot and fix cart abandonment issues","burst-statistics")},{icon:"goals",text:(0,f.__)("See which products and channels earn revenue","burst-statistics")}]}}},sources:{upgradePlan:{header:(0,f.__)("Unlock Source Insights","burst-statistics"),subTitle:(0,f.__)("Get detailed insights into where your traffic comes from.","burst-statistics"),licenseInsufficient:""},testID:"upsell-copy-v1",variations:{A:{utm_medium:"upsell-variation-a",title:(0,f.__)("Are you just guessing with your marketing?","burst-statistics"),description:(0,f.__)("You spend time and money creating campaigns, but can't see what's actually working. Are your newsletters driving traffic or just getting opened? Is your social media budget paying off? Without clear tracking, you're making decisions in the dark, which is inefficient and frustrating.","burst-statistics"),bullets:[{icon:"goals",text:(0,f.__)("Stop guessing: Track UTM campaigns to see which channels deliver real visitors.","burst-statistics")},{icon:"filter",text:(0,f.__)("Optimize with confidence: Refine on-site promotions by analyzing custom URL parameters.","burst-statistics")},{icon:"world",text:(0,f.__)("Go beyond numbers: Visualize exactly where your visitors are with an interactive world map.","burst-statistics")}]},B:{utm_medium:"upsell-variation-b",title:(0,f.__)("Turn your traffic into targeted growth.","burst-statistics"),description:(0,f.__)("Effective growth comes from understanding your audience on a deeper level. Burst Pro provides the tools to see not just how many people visit, but who they are and what brought them to you, so you can focus your efforts where they matter most.","burst-statistics"),bullets:[{icon:"goals",text:(0,f.__)("Measure the success of your marketing with automatic UTM campaign tracking.","burst-statistics")},{icon:"filter",text:(0,f.__)("Optimize your website by tracking how visitors interact with specific parameters.","burst-statistics")},{icon:"world",text:(0,f.__)("Tailor your content by identifying key visitor locations, from country down to the city.","burst-statistics")}]}}}};const g=function(e){var t=e.className,r=void 0===t?"":t,o=e.type,l=void 0===o?"sources":o,c=(0,m.A)(),g=c.licenseActivated,h=c.isPro,b=p[l]||p.sources,v=function(e,t,r){void 0===t&&(t=["A","B"]),void 0===r&&(r={});var n=r.defaultVariation,a=void 0===n?t[0]:n,s=r.trafficAllocation,i=void 0===s?100:s,o=u(),l=o.getTestVariation,c=o.assignRandomVariation,f=o.getTestData,m=o.removeTestVariation;if(!e||"string"!=typeof e)throw new Error("useABTest: testId must be a non-empty string");if(!Array.isArray(t)||0===t.length)throw new Error("useABTest: variations must be a non-empty array");if(0>i||100<i)throw new Error("useABTest: trafficAllocation must be between 0 and 100");var p=(0,d.useMemo)(function(){if(!(100===i||100*Math.random()<i))return{variation:a,isNewAssignment:!1,testData:null,isInTest:!1};var r=l(e);if(r){if(t.includes(r))return{variation:r,isNewAssignment:!1,testData:f(e),isInTest:!0};console.warn('useABTest: Existing variation "'.concat(r,'" for test "').concat(e,'" is not in current variations list. Reassigning.')),m(e)}return{variation:c(e,t),isNewAssignment:!0,testData:f(e),isInTest:!0}},[e,t,a,i,l,f,m,c]);return{variation:p.variation,isNewAssignment:p.isNewAssignment,testData:p.testData,isInTest:p.isInTest,reassign:function(){return m(e),c(e,t)}}}(b.testID,Object.keys(b.variations)).variation,y=b.variations[v]||b.variations.A,x={utm_source:"plugin",utm_medium:y.utm_medium};return h?(0,n.jsxs)("div",{className:"text-center space-y-6",children:[(0,n.jsx)("h2",{className:"text-2xl font-semibold text-gray-900",children:b.upgradePlan.header}),(0,n.jsx)("p",{className:"text-lg text-gray-600 max-w-md mx-auto",children:b.upgradePlan.subTitle}),(0,n.jsxs)("p",{className:"text-base text-gray-500",children:[!g&&(0,f.__)("Already have a license? Activate it to access these features.","burst-statistics"),g&&b.upgradePlan.licenseInsufficient]}),(0,n.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[!g&&(0,n.jsx)(i.A,{btnVariant:"primary",size:"lg",link:{to:"/settings/license"},children:(0,f.__)("Activate License","burst-statistics")}),(0,n.jsx)(i.A,{btnVariant:"secondary",size:"lg",onClick:function(){window.open((0,a.U)("pricing",x),"_blank")},children:(0,f.__)("Upgrade Plan","burst-statistics")})]})]}):(0,n.jsxs)("div",{className:"mx-auto flex justify-center max-w-3xl gap-8 flex-wrap".concat(r),children:[(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("h2",{className:"mb-4 text-2xl font-bold leading-tight text-black md:text-3xl",children:y.title}),(0,n.jsx)("p",{className:"text-base leading-relaxed text-gray",children:y.description})]}),(0,n.jsx)("div",{className:"max-w-content mx-auto flex flex-col space-y-4",children:y.bullets.map(function(e,t){var r=e.text.split(":"),a=1<r.length;return(0,n.jsxs)("div",{className:"flex max-w-fit items-center space-x-4",children:[(0,n.jsx)("div",{className:"mt-0.5 flex-shrink-0",children:(0,n.jsx)("div",{className:"flex h-7 w-7 items-center justify-center rounded-full bg-primary-light",children:(0,n.jsx)(s.A,{name:e.icon,color:"black",size:14,strokeWidth:2})})}),(0,n.jsx)("div",{className:"pt-1",children:(0,n.jsx)("p",{className:"m-0 whitespace-nowrap text-md leading-relaxed text-gray",children:a?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("span",{className:"font-semibold text-gray",children:[r[0],":"]}),(0,n.jsx)("span",{className:"ml-1",children:r.slice(1).join(":")})]}):(0,n.jsx)("span",{className:"font-semibold text-gray",children:e.text})})})]},t)})}),(0,n.jsxs)("div",{className:"flex w-full flex-col items-center space-y-3 text-center",children:[(0,n.jsx)(i.A,{btnVariant:"primary",size:"lg",link:{to:(0,a.U)("pricing",x)},children:(0,f.__)("Upgrade to Pro","burst-statistics")}),(0,n.jsx)("div",{children:(0,n.jsx)(i.A,{btnVariant:"tertiary",size:"md",link:{to:(0,a.U)("/",x)},children:(0,f.__)("Learn about all features","burst-statistics")})})]}),!1]})}},39988:(e,t,r)=>{r.d(t,{G:()=>s});var n=r(30346),a=r(14243),s=(0,n.v)((0,a.Zr)(function(e,t){return{metrics:["visitors","pageviews"],loaded:!1,getMetrics:function(){if(t().loaded)return t().metrics;var r=t().metrics||["visitors","pageviews"];return r=r.filter(function(e){return"conversions"!==e}),e({metrics:r,loaded:!0}),r},setMetrics:function(t){e({metrics:t})}}},{name:"burst-insights-storage",partialize:function(e){return{metrics:e.metrics}},onRehydrateStorage:function(){return function(e){e&&e.metrics&&(e.metrics=e.metrics.filter(function(e){return"conversions"!==e}))}}}))},41631:(e,t,r)=>{r.d(t,{A:()=>g});var n=r(91637),a=r(51609),s=r(89668),i=r(65825),o=r(50552),l=r(53411),c=r(27723),u=r(35812),d=r(65162);const f=function(e){var t=e.title,r=e.children,a=e.footer,s=e.isOpen,i=e.setIsOpen,o=e.showFilterIcon,c=void 0===o||o;return(0,n.jsxs)(d.bL,{open:s,onOpenChange:i,children:[(0,n.jsx)(d.l9,{id:"burst-filter-button",onClick:function(){return i(!s)},children:c&&(0,n.jsx)("div",{className:"".concat(s?"bg-gray-300 shadow-lg":"bg-gray-100 shadow-sm"," border border-gray-400 focus:ring-blue-500 cursor-pointer rounded-full p-2.5 transition-all duration-200 hover:bg-gray-400 hover:shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2 opacity-30 group-hover/root:opacity-100"),children:(0,n.jsx)(l.A,{name:"filter"})})}),(0,n.jsx)(d.ZL,{container:document.querySelector(".burst"),children:(0,n.jsxs)(d.UC,{className:"z-50 min-w-[280px] max-w-[600px] rounded-lg border border-gray-200 bg-white p-0 shadow-xl",align:"start",sideOffset:10,arrowPadding:10,children:[(0,n.jsx)(d.i3,{className:"fill-white drop-shadow-sm"}),(0,n.jsx)("div",{className:"border-b border-gray-100 px-4 py-3",children:(0,n.jsx)("h5",{className:"m-0 text-base font-semibold text-black",children:t})}),(0,n.jsx)("div",{className:"px-4 py-2",children:r}),a&&(0,n.jsx)("div",{className:"flex gap-2 rounded-b-lg border-t border-gray-100 bg-gray-50 px-4 py-3",children:a})]})})]})};var m=r(84400),p=function(e,t,r){if(r||2===arguments.length)for(var n,a=0,s=t.length;a<s;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))};const g=function(e){var t=e.onApply,r=e.id,d=e.options,g=e.selectedOptions,h=e.defaultOptions,b=void 0===h?[]:h,v=e.selectionMode,y=void 0===v?"multiple":v,x=(0,a.useState)(!1),j=x[0],_=x[1],w=(0,a.useState)(g),N=w[0],k=w[1],C=(0,a.useMemo)(function(){var e={},t=[];return Object.keys(d).forEach(function(r){var n=d[r].category;n?(e[n]||(e[n]=[]),e[n].push(r)):t.push(r)}),{categories:e,uncategorized:t}},[d]),A=C.categories,O=C.uncategorized;(0,a.useEffect)(function(){k(g)},[g]);var S,D,M=(0,m.A)().isLicenseValid,F=function(e){if("single"!==y||e&&0!==e.length)t(e);else{var r=Object.keys(d)[0];r&&t([r])}_(!1)},E=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.A,{onClick:function(){return F(N),void _(!1)},btnVariant:"primary",size:"sm",className:"flex-1",children:(0,c.__)("Apply","burst-statistics")}),(0,n.jsx)(o.A,{onClick:function(){return function(){var e=0<b.length?b:Object.keys(d).filter(function(e){return d[e].default});if(e=e.filter(function(e){return Object.keys(d).includes(e)}),"single"===y){var t=0<e.length?e[0]:Object.keys(d)[0];k([t]),F([t])}else k(e),F(e);_(!1)}()},btnVariant:"tertiary",size:"sm",className:"flex-1",children:(0,c.__)("Reset to defaults","burst-statistics")})]});return(0,n.jsx)(f,{isOpen:j,setIsOpen:function(e){e?_(!0):(_(!1),k(g))},title:"single"===y?(0,c.__)("Select metric","burst-statistics"):(0,c.__)("Select metrics","burst-statistics"),footer:E,children:"single"===y?(0,n.jsx)("div",{className:"flex flex-col gap-2",children:Object.keys(d).map(function(e){return(0,n.jsx)(i.A,{id:r+"_"+e,name:r+"_radio_group",value:e,label:d[e].label,checked:N[0]===e,disabled:!0===d[e].disabled||d[e].pro&&!M,onChange:function(e){return k([e])},children:d[e].pro&&!M&&(0,n.jsx)(u.A,{label:"Pro"})},e)})}):(S={traffic:(0,c.__)("Traffic","burst-statistics"),engagement:(0,c.__)("Engagement","burst-statistics"),conversions:(0,c.__)("Conversions","burst-statistics")},D=function(e){return(0,n.jsxs)("div",{className:"flex items-center gap-2.5 py-1",children:[(0,n.jsx)(s.bL,{className:"focus:ring-blue-500 flex h-4 w-4 items-center justify-center rounded border-2 border-gray-300 bg-white transition-colors hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-offset-2",id:r+"_"+e,checked:N.includes(e),"aria-label":(0,c.__)("Change metrics","burst-statistics"),disabled:!0===d[e].disabled||d[e].pro&&!M,onCheckedChange:function(){return function(e){"single"===y?k([e]):N.includes(e)?k(N.filter(function(t){return t!==e})):k(p(p([],N,!0),[e],!1))}(e)},children:(0,n.jsx)(s.C1,{children:(0,n.jsx)(l.A,{name:"check",size:14,color:"green",strokeWidth:2})})}),(0,n.jsx)("label",{className:"flex-1 cursor-pointer text-sm text-gray",htmlFor:r+"_"+e,children:d[e].label}),(0,n.jsx)("div",{className:"flex-shrink-0",children:d[e].pro&&!M&&(0,n.jsx)(u.A,{label:"Pro"})})]},e)},0<Object.keys(A).length?(0,n.jsxs)("div",{className:"flex flex-col gap-3",children:[0<O.length&&(0,n.jsx)("div",{className:"flex flex-col",children:O.map(D)}),["traffic","engagement","conversions"].map(function(e){return A[e]&&0!==A[e].length?(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)("div",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-1 mt-2 first:mt-0",children:S[e]||e}),A[e].map(D)]},e):null})]}):Object.keys(d).map(D))})}},42552:(e,t,r)=>{r.d(t,{A:()=>i});var n=r(91637),a=r(85155),s=r(27723);const i=function(e){var t=e.country,r=e.countryNiceName,i=void 0===r?"":r,o=e.iconOnly,l=void 0!==o&&o;if("string"!=typeof t)return(0,n.jsx)("span",{className:"flex items-center justify-start gap-1.5",children:i});""===i&&(i=t),""===i&&(i=(0,s.__)("Unknown","burst-statistics")),t=t.toLowerCase();var c="".concat(burst_settings.plugin_url,"includes/Pro/assets/flags/4x3/").concat(t,".svg");return l?(0,n.jsx)(a.k,{src:c,className:"burst-flag [&_svg]:h-[13px] [&_svg]:w-auto [&_div]:flex burst-flag-".concat(t),title:i}):(0,n.jsxs)("span",{className:"flex items-center justify-start gap-1.5",children:[(0,n.jsx)(a.k,{src:c,className:"burst-flag [&_svg]:h-[13px] [&_svg]:w-auto [&_div]:flex burst-flag-".concat(t),title:i})," ",i]})}},48677:(e,t,r)=>{r.d(t,{A:()=>h});var n=r(91637),a=r(51609),s=r(33597),i=r(89717),o=r(20467),l=r(53411),c=r(78102),u=r(91788),d=r(65162),f=r(74020),m="yyyy-MM-dd",p=new Date(2022,0,1),g=function(e){var t=e.range,r=e.display,a=e.isOpen,s=e.setIsOpen,i=e.disabled;return(0,n.jsxs)(d.l9,{className:"burst-date-button flex min-w-[200px] items-center gap-2 rounded-md border px-3 py-2 shadow-sm transition-all duration-200 ".concat(i?"cursor-not-allowed border-gray-200 bg-gray-100 text-gray-800 opacity-60":"border-gray-300 bg-white hover:bg-gray-50 hover:[box-shadow:0_0_0_3px_rgba(0,0,0,0.05)]"),onClick:function(){return!i&&s(!a)},disabled:i,children:[(0,n.jsx)(l.A,{name:"calendar",size:"18"}),(0,n.jsx)("span",{className:"w-full text-base",children:"custom"===t?"".concat(r.startDate," - ").concat(r.endDate):u.cA[t].label}),(0,n.jsx)(l.A,{name:"chevron-down"})]})};const h=function(){var e=(0,f.A)(function(e){return e.userCanFilterDateRange}),t=(0,a.useState)(!1),r=t[0],l=t[1],h=(0,c.F)(),b=h.startDate,v=h.endDate,y=h.setDateRange,x=h.range,j=(0,a.useState)({startDate:(0,o.A)(b),endDate:(0,o.A)(v),key:"selection"}),_=j[0],w=j[1],N=(0,a.useRef)(0),k=burst_settings.date_ranges,C=(0,a.useMemo)(function(){return(0,u.cf)(k)},[k]),A=(0,a.useMemo)(function(){return(0,u.YP)(b,v)},[b,v]),O=(0,a.useCallback)(function(t){if(e)try{N.current++;var r=t.selection,n=r.startDate,a=r.endDate,s=(0,i.default)(n,m),c=(0,i.default)(a,m);w({startDate:(0,o.A)(s),endDate:(0,o.A)(c),key:"selection"});var d=Object.keys(u.cA).find(function(e){return u.cA[e].isSelected(t.selection)})||"custom";(2===N.current||"custom"!==d||s!==c)&&(N.current=0,y(d,s,c),l(!1))}catch(e){console.error("Error updating date range:",e)}},[y,e]);return(0,n.jsx)("div",{className:"ml-auto w-auto",children:(0,n.jsxs)(d.bL,{open:r&&e,onOpenChange:function(t){return e&&l(t)},children:[(0,n.jsx)(g,{range:x,display:A,isOpen:r,setIsOpen:l,disabled:!e}),(0,n.jsx)("div",{className:"burst-date-range-popover-container relative z-[2]",children:(0,n.jsx)(d.ZL,{container:document.querySelector(".burst-date-range-popover-container"),children:(0,n.jsxs)(d.UC,{align:"end",sideOffset:10,arrowPadding:10,id:"burst-statistics",children:[(0,n.jsx)("span",{className:"absolute right-4 mt-1 h-4 w-4 -translate-y-2 rotate-45 transform bg-green-light"}),(0,n.jsx)("div",{className:"z-50 rounded-lg border border-gray-200 bg-white shadow-md",children:(0,n.jsx)(s.Ur,{ranges:[_],rangeColors:["#2b8133"],dateDisplayFormat:"dd MMMM yyyy",monthDisplayFormat:"MMMM",onChange:O,inputRanges:[],showSelectionPreview:!0,months:2,direction:"horizontal",minDate:p,maxDate:(0,u.ii)(),staticRanges:C})})]})})})]})})}},51956:(e,t,r)=>{r.d(t,{y:()=>H});var n=r(91637),a=r(51609),s=r.n(a),i=r(88432),o=r(39988),l=r(70802),c=r(3663),u=r(61445),d=function(e,t,r,n){return new(r||(r=Promise))(function(a,s){function i(e){try{l(n.next(e))}catch(e){s(e)}}function o(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})},f=function(e,t){var r,n,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(s=0)),s;)try{if(r=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((a=(a=s.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){s.label=o[1];break}if(6===o[0]&&s.label<a[1]){s.label=a[1],a=o;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(o);break}a[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}};const m=function(){var e=(0,l.jE)(),t=(0,u.A)(),r=t.goals,n=t.getGoalAsync,s=(0,a.useCallback)(function(t,n){return d(void 0,void 0,void 0,function(){var a;return f(this,function(s){switch(s.label){case 0:return"goals"===t?[2,r]:[4,e.fetchQuery({queryKey:["filters_data",t,n],queryFn:function(){return function(e,t){return d(void 0,void 0,void 0,function(){var r,n;return f(this,function(a){switch(a.label){case 0:return[4,(0,c.Eo)("get_filter_options",{data_type:e,search:t})];case 1:return r=a.sent(),[2,(null===(n=r.data)||void 0===n?void 0:n[e])||[]]}})})}(t,n)},staleTime:3e5,cacheTime:18e5})];case 1:return a=s.sent(),[2,(Array.isArray(a)?a:Object.values(a||{})).map(function(e){return{id:e.ID,title:e.name,key:e.key||e.ID}})]}})})},[e,r]);return{getFilterOptions:s,getFilterOptionById:function(e,t){return d(void 0,void 0,void 0,function(){var r,a,i;return f(this,function(o){switch(o.label){case 0:return"goals"!==t?[3,2]:[4,n(e)];case 1:return[2,(r=o.sent())?r.title:e];case 2:return[4,s(t)];case 3:return a=o.sent(),[2,(null==(i=Array.isArray(a)?a.find(function(t){return String(t.id)===String(e)}):null)?void 0:i.title)||e]}})})},getFilterIdByTitle:function(e,t){return d(void 0,void 0,void 0,function(){var r,n;return f(this,function(a){switch(a.label){case 0:return[4,s(t)];case 1:return r=a.sent(),[2,(null==(n=Array.isArray(r)?r.find(function(t){return t.title===e}):null)?void 0:n.id)||null]}})})}}};var p=r(27723),g=function(e,t,r,n){return new(r||(r=Promise))(function(a,s){function i(e){try{l(n.next(e))}catch(e){s(e)}}function o(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})},h=function(e,t){var r,n,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(s=0)),s;)try{if(r=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((a=(a=s.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){s.label=o[1];break}if(6===o[0]&&s.label<a[1]){s.label=a[1],a=o;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(o);break}a[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}};var b=r(95217),v=r(98371),y=r(2573),x=r(53411),j=r(35812),_=r(84400);const w=function(e){var t,r=e.filterKey,a=e.config,s=e.isActive,o=void 0!==s&&s,l=e.onClick,c=e.gridPosition,u=(0,_.A)().isLicenseValid,d=(0,i.R7)(),f=d.isFavorite,m=d.toggleFavorite,g=a.pro&&!u||a.coming_soon,h=f(r),b=function(e){e.stopPropagation(),e.preventDefault(),g||m(r)},v=function(){g||l()};return(0,n.jsxs)("div",{className:(0,y.A)("relative rounded-lg border-2 p-4 transition-all duration-200 bg-white w-full group","focus-within:ring-2 focus-within:ring-primary focus-within:ring-offset-2",{"border-primary bg-primary-light":o,"border-gray-300 shadow-sm hover:border-gray-400":!o&&!g,"bg-gray-100 border-gray-200":g,"bg-gray-300 opacity-90":a.coming_soon}),role:c?"gridcell":void 0,"aria-posinset":null==c?void 0:c.position,"aria-setsize":null==c?void 0:c.total,children:[(0,n.jsx)("button",{onClick:v,onKeyDown:function(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),v())},disabled:g,"aria-label":(t="".concat(a.label," filter"),o&&(t+=", ".concat((0,p.__)("currently active","burst-statistics"))),a.pro&&(t+=", ".concat((0,p.__)("Pro feature","burst-statistics"))),a.coming_soon&&(t+=", ".concat((0,p.__)("coming soon","burst-statistics"))),g&&(t+=", ".concat((0,p.__)("disabled","burst-statistics"))),t),"aria-pressed":o,className:(0,y.A)("w-full h-full absolute inset-0 rounded-lg transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2",{"cursor-not-allowed":g,"cursor-pointer hover:bg-black hover:bg-opacity-5":!g}),tabIndex:g?-1:0}),(0,n.jsx)("div",{className:"absolute top-2 right-2 z-20 opacity-0 group-hover:opacity-100 group-focus-within:opacity-100 transition-opacity duration-200",children:(0,n.jsx)("button",{onClick:b,onKeyDown:function(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),b(e))},disabled:g,className:(0,y.A)("p-1 rounded-full transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-1","hover:bg-gray-200 active:bg-gray-300",{"text-yellow-500":h,"text-gray-400 hover:text-gray-600":!h,"cursor-not-allowed opacity-50":g}),"aria-label":h?(0,p.__)("Remove %s from favorites","burst-statistics").replace("%s",a.label):(0,p.__)("Add %s to favorites","burst-statistics").replace("%s",a.label),"aria-pressed":h,tabIndex:g?-1:0,children:(0,n.jsx)(x.A,{name:h?"star-filled":"star-outline",size:16,color:h?"yellow":"gray","aria-hidden":"true"})})}),o&&(0,n.jsx)("div",{className:"absolute top-2 left-2 z-10","aria-hidden":"true",children:(0,n.jsx)("div",{className:"h-2 w-2 rounded-full bg-primary"})}),(0,n.jsxs)("div",{className:"flex flex-col items-center space-y-3 relative z-10 pointer-events-none",children:[(0,n.jsx)("div",{className:(0,y.A)("flex h-12 w-12 items-center justify-center rounded-lg",{"bg-gray-100":!o,"bg-primary-light":o}),"aria-hidden":"true",children:(0,n.jsx)(x.A,{name:a.icon,color:"gray",size:24,"aria-hidden":"true"})}),(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("h3",{className:"text-sm font-medium text-gray-900",children:a.label}),a.pro&&(0,n.jsx)("div",{className:"mt-2",children:(0,n.jsx)(j.A,{label:(0,p.__)("Pro","burst-statistics")})}),a.coming_soon&&(0,n.jsx)("div",{className:"mt-2",children:(0,n.jsx)("span",{className:"inline-flex items-center rounded bg-blue-light px-2 py-0.5 text-xs font-medium text-gray",children:(0,p.__)("Coming soon","burst-statistics")})})]})]})]})};var N=r(86274),k=function(){return k=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},k.apply(this,arguments)};const C=function(e){var t=e.onSelectFilter,r=(0,i.R7)(),s=r.filtersConf,o=r.filterCategories,l=r.getActiveFilters,c=r.getFiltersByCategory,u=r.getFavoriteFilters,d=(0,N.A)().getValue,f=(0,a.useState)("favorites"),m=f[0],g=f[1],h=(0,a.useState)(""),b=h[0],v=h[1],j=(0,a.useState)({}),_=j[0],C=j[1],A=(0,a.useRef)(null),O=l(),S=c(),D=u(),M=d("filtering_by_domain");(0,a.useEffect)(function(){if(M)C(s);else{var e=Object.fromEntries(Object.entries(s).filter(function(e){return"host"!==e[0]}));C(e)}},[s,M]),(0,a.useEffect)(function(){A.current&&A.current.focus()},[]);var F=function(e,t,r){if(r||2===arguments.length)for(var n,a=0,s=t.length;a<s;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))}([{key:"favorites",label:(0,p.__)("Favorites","burst-statistics"),icon:"star-outline"},{key:"all",label:(0,p.__)("All","burst-statistics"),icon:"grid"}],Object.entries(o).sort(function(e,t){var r=e[1],n=t[1];return r.order-n.order}).map(function(e){var t=e[0],r=e[1];return{key:t,label:r.label,icon:r.icon}}),!0),E=function(e){if(!e.trim())return null;var t=e.toLowerCase(),r=Object.entries(_).filter(function(e){return e[0],e[1].type}).map(function(e){var t=e[0],r=e[1];return k({key:t},r)}),n=function(e){return e.label.toLowerCase().includes(t)||e.key.toLowerCase().includes(t)},a=[];"favorites"===m?a=D:"all"===m?a=r:m in S&&(a=S[m]||[]);var s=a.filter(n);return 0<s.length?{results:s,source:m,isFromCurrentTab:!0}:{results:r.filter(n),source:"all",isFromCurrentTab:!1}}(b),T=function(e,r){return 0===e.length?(0,n.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,n.jsx)(x.A,{name:"empty",size:48,color:"gray"}),(0,n.jsx)("p",{className:"mt-2",children:b.trim()?(0,p.__)("No filters match your search.","burst-statistics"):"favorites"===m?(0,p.__)("No favorite filters yet. Pin filters to add them here.","burst-statistics"):"all"===m?(0,p.__)("No filters available.","burst-statistics"):(0,p.__)("No filters in this category.","burst-statistics")})]}):(0,n.jsxs)("div",{children:[r&&!r.isFromCurrentTab&&(0,n.jsx)("div",{className:"mb-4 p-3 bg-blue-light border border-blue-200 rounded-lg",children:(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(x.A,{name:"help",size:16,color:"blue"}),(0,n.jsx)("span",{className:"text-sm text-blue-700",children:(0,p.__)("No results found in current tab. Showing results from all filters.","burst-statistics")})]})}),(0,n.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 justify-items-center",role:"grid","aria-label":(0,p.__)("Available filters","burst-statistics"),children:e.map(function(r,a){return(0,n.jsx)(w,{filterKey:r.key,config:r,isActive:Object.prototype.hasOwnProperty.call(O,r.key),onClick:function(){return t(r.key,r)},gridPosition:{position:a+1,total:e.length}},r.key)})})]})};return(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsx)("label",{htmlFor:"filter-search",className:"sr-only",children:(0,p.__)("Search filters","burst-statistics")}),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,n.jsx)(x.A,{name:"search",size:16,className:"text-gray-400","aria-hidden":"true"})}),(0,n.jsx)("input",{id:"filter-search",type:"text",placeholder:(0,p.__)("Search filters…","burst-statistics"),value:b,onChange:function(e){return v(e.target.value)},className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-primary focus:border-primary text-sm","aria-describedby":E?"search-results-info":void 0,ref:A}),b&&(0,n.jsx)("button",{onClick:function(){return v("")},className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 focus:outline-none focus:text-gray-900","aria-label":(0,p.__)("Clear search","burst-statistics"),type:"button",children:(0,n.jsx)(x.A,{name:"times",size:16,"aria-hidden":"true"})})]})]}),(0,n.jsx)("div",{className:"mb-6",children:(0,n.jsx)("div",{className:"border-b border-gray-200",children:(0,n.jsx)("nav",{className:"-mb-px flex space-x-8 overflow-x-auto scrollbar-hide",role:"tablist","aria-label":(0,p.__)("Filter categories","burst-statistics"),children:F.map(function(e){return(0,n.jsxs)("button",{id:"tab-".concat(e.key),onClick:function(){return g(e.key)},role:"tab","aria-selected":m===e.key,"aria-controls":"tabpanel-".concat(e.key),className:(0,y.A)("flex items-center space-x-2 py-2 px-1 border-b-2 font-medium text-sm transition-colors whitespace-nowrap flex-shrink-0","focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2",{"border-primary text-primary":m===e.key,"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300":m!==e.key}),children:[(0,n.jsx)("span",{className:(0,y.A)("flex items-center justify-center w-6 h-6 rounded-full transition-all duration-200",{"bg-primary-light text-white shadow-sm border-primary border-0.5":m===e.key,"bg-transparent":m!==e.key}),"aria-hidden":"true",children:(0,n.jsx)(x.A,{name:e.icon,size:16})}),(0,n.jsx)("span",{children:e.label})]},e.key)})})})}),(0,n.jsx)("div",{role:"tabpanel",id:"tabpanel-".concat(m),"aria-labelledby":"tab-".concat(m),children:E?(0,n.jsxs)("div",{children:[0<E.results.length&&(0,n.jsx)("div",{id:"search-results-info",className:"sr-only",children:(0,p.__)("Showing %d search results","burst-statistics").replace("%d",E.results.length.toString())}),T(E.results,E)]}):"favorites"===m?T(D):"all"===m?T(Object.entries(_).filter(function(e){return e[0],e[1].type}).map(function(e){var t=e[0],r=e[1];return k({key:t},r)})):m in S?T(S[m]||[]):null})]})};var A=r(24454),O=r(10371),S=r(53576),D=r.n(S),M=function(e,t,r,n){return new(r||(r=Promise))(function(a,s){function i(e){try{l(n.next(e))}catch(e){s(e)}}function o(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})},F=function(e,t){var r,n,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(s=0)),s;)try{if(r=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((a=(a=s.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){s.label=o[1];break}if(6===o[0]&&s.label<a[1]){s.label=a[1],a=o;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(o);break}a[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}};const E=function(e){var t=e.filterKey,r=e.config,s=e.initialValue,i=void 0===s?"":s,o=e.onChange,l=(0,a.useState)(i),c=l[0],u=l[1],d=(0,a.useRef)(null),f=(0,a.useRef)(null),g=(0,a.useState)([]),h=g[0],b=g[1],v=(0,a.useState)([]),y=v[0],x=v[1],j=(0,a.useState)(""),_=j[0],w=j[1],N=(0,a.useState)(!1),k=N[0],C=N[1],S=m().getFilterOptions;(0,a.useEffect)(function(){u(i)},[i]),(0,a.useEffect)(function(){M(void 0,void 0,void 0,function(){var e,t;return F(this,function(n){switch(n.label){case 0:return r.options?[4,S(r.options,"")]:[2];case 1:return e=n.sent(),t=Array.isArray(e)?e.map(function(e){return{value:e.id||e.title,label:e.title}}):[],b(t),x(t),C(1e3>t.length),[2]}})})},[r.options,S]);var E=(0,a.useMemo)(function(){return D()(function(e){return M(void 0,void 0,void 0,function(){var t,n;return F(this,function(a){switch(a.label){case 0:return r.options?[4,S(r.options,e)]:[2];case 1:return t=a.sent(),n=Array.isArray(t)?t.map(function(e){return{value:e.id||e.title,label:e.title}}):[],b(n),e||x(n),[2]}})})},300)},[r.options,S]);(0,a.useEffect)(function(){if(r.reloadOnSearch&&r.options&&!(3>_.length||k))return E(_),function(){E.cancel()}},[_,r.reloadOnSearch,k,E]),(0,a.useEffect)(function(){var e=setTimeout(function(){var e,t;r.options&&d.current?d.current.focus?d.current.focus():(null===(t=null===(e=d.current.select)||void 0===e?void 0:e.inputRef)||void 0===t?void 0:t.current)&&d.current.select.inputRef.current.focus():!r.options&&f.current&&f.current.focus()},100);return function(){return clearTimeout(e)}},[r.options]);var T=function(){if(r.options)return(0,p.__)("Search or select an option…","burst-statistics");switch(t){case"page_url":return(0,p.__)("Enter page URL (e.g., /about)","burst-statistics");case"referrer":return(0,p.__)("Enter referrer URL (e.g., google.com)","burst-statistics");case"campaign":return(0,p.__)("Enter campaign name","burst-statistics");case"source":return(0,p.__)("Enter traffic source","burst-statistics");case"medium":return(0,p.__)("Enter traffic medium","burst-statistics");case"term":return(0,p.__)("Enter search term","burst-statistics");case"content":return(0,p.__)("Enter content identifier","burst-statistics");case"parameter":return(0,p.__)("Enter URL parameter (e.g., utm_campaign)","burst-statistics");default:return(0,p.__)("Enter filter value…","burst-statistics")}};return(0,n.jsx)("div",{className:"space-y-4",children:(0,n.jsxs)("div",{className:"space-y-2 relative",children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:(0,p.__)("Filter value","burst-statistics")}),r.options?(0,n.jsx)(A.A,{ref:d,value:c?h.find(function(e){return e.value===c})||{value:c,label:c}:null,onChange:function(e){var t=e?e.value:"";u(t),o(t)},loadOptions:function(e,t){return M(void 0,void 0,void 0,function(){var r,n;return F(this,function(a){return r=String(null!=e?e:"").toLowerCase(),w(r),h.length?0===r.length?(null==t||t(h),x(h),[2]):(n=h.filter(function(e){var t,n,a=String(null!==(t=e.label)&&void 0!==t?t:"").toLowerCase(),s=String(null!==(n=e.value)&&void 0!==n?n:"").toLowerCase();return a.includes(r)||s.includes(r)}),null==t||t(n),x(n),[2]):(null==t||t([]),[2])})})},defaultOptions:y,placeholder:T(),isSearchable:!0,disabled:!1,insideModal:!0,allowCustomValue:0===y.length}):(0,n.jsx)(O.A,{ref:f,value:c,onChange:function(e){var t=e.target.value;u(t),o(t)},placeholder:T(),className:"w-full"})]})})};var T=r(78548);const I=function(e){var t=e.filterKey,r=e.initialValue,s=void 0===r?"":r,i=e.onChange,o=(0,a.useState)(s),l=o[0],c=o[1];(0,a.useEffect)(function(){c(s)},[s]);var u="bounces"===t?{"":{type:"",icon:"user",label:(0,p.__)("All visitors (default)","burst-statistics")},include:{type:"include",icon:"bounce",label:(0,p.__)("Bounced visitors","burst-statistics")},exclude:{type:"exclude",icon:"user-check",label:(0,p.__)("Active visitors","burst-statistics")}}:"new_visitor"===t?{"":{type:"",icon:"user",label:(0,p.__)("All visitors (default)","burst-statistics")},include:{type:"include",icon:"user-plus",label:(0,p.__)("New visitors","burst-statistics")},exclude:{type:"exclude",icon:"user-check",label:(0,p.__)("Returning visitors","burst-statistics")}}:"entry_exit_pages"===t?{"":{type:"",icon:"user",label:(0,p.__)("All pages","burst-statistics")},entry:{type:"entry",icon:"user-plus",label:(0,p.__)("Entry pages","burst-statistics")},exit:{type:"exit",icon:"user-check",label:(0,p.__)("Exit pages","burst-statistics")}}:{"":{type:"",icon:"user",label:(0,p.__)("All visitors (default)","burst-statistics"),description:(0,p.__)("Show all visitors without filtering","burst-statistics")},include:{type:"include",icon:"check",label:(0,p.__)("Include","burst-statistics"),description:(0,p.__)("Include visitors matching this criteria","burst-statistics")},exclude:{type:"exclude",icon:"times",label:(0,p.__)("Exclude","burst-statistics"),description:(0,p.__)("Exclude visitors matching this criteria","burst-statistics")}};return(0,n.jsx)("div",{className:"space-y-6",children:(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:(0,p.__)("Filter option","burst-statistics")}),(0,n.jsx)(T.A,{inputId:"".concat(t,"-boolean"),options:u,value:l,onChange:function(e){c(e),i(e)},columns:1})]})})};var R=r(90160),P=function(){return P=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},P.apply(this,arguments)},L=(0,a.forwardRef)(function(e,t){var r=e.min,s=void 0===r?0:r,i=e.max,o=void 0===i?100:i,l=e.step,c=void 0===l?1:l,u=e.value,d=void 0===u?[s,o]:u,f=e.onChange,m=e.formatValue,g=void 0===m?function(e){return e.toString()}:m,h=e.className,b=void 0===h?"":h,v=e.disabled,y=void 0!==v&&v,x=e.label,j=e.showLabels,_=void 0===j||j,w=e.showCurrentValue,N=void 0===w||w,k=e.allowSingleValue,C=void 0!==k&&k,A=e.rangeSeparator,O=void 0===A?" - ":A,S=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r}(e,["min","max","step","value","onChange","formatValue","className","disabled","label","showLabels","showCurrentValue","allowSingleValue","rangeSeparator"]),D=(0,a.useState)(d),M=D[0],F=D[1];return(0,a.useEffect)(function(){F(d)},[d]),(0,n.jsxs)("div",P({ref:t,className:"space-y-3 ".concat(b)},S,{children:[x&&(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:x}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)(R.bL,{className:"relative flex items-center select-none touch-none w-full h-5",value:C&&M[0]===M[1]?[M[0]]:M,onValueChange:function(e){var t=C&&1===e.length?[e[0],e[0]]:[e[0],e[1]];F(t),null==f||f(t)},min:s,max:o,step:c,disabled:y,children:[(0,n.jsx)(R.CC,{className:"bg-gray-200 relative grow rounded-full h-2",children:(0,n.jsx)(R.Q6,{className:"absolute bg-primary rounded-full h-full"})}),(0,n.jsx)(R.zi,{className:"block w-5 h-5 bg-white border-2 border-primary rounded-full shadow-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":(0,p.__)("Minimum value","burst-statistics")}),(!C||M[0]!==M[1])&&(0,n.jsx)(R.zi,{className:"block w-5 h-5 bg-white border-2 border-primary rounded-full shadow-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":(0,p.__)("Maximum value","burst-statistics")})]}),_&&(0,n.jsxs)("div",{className:"flex justify-between text-xs text-gray-500",children:[(0,n.jsx)("span",{children:g(s)}),N&&(0,n.jsx)("span",{className:"font-medium text-primary",children:C&&M[0]===M[1]?g(M[0]):"".concat(g(M[0])).concat(O).concat(g(M[1]))}),(0,n.jsx)("span",{children:g(o)})]})]})]}))});L.displayName="RangeSliderInput";const z=L,V=function(e){var t=e.filterKey,r=e.initialValue,s=void 0===r?"":r,i=e.onChange,o=function(e){if(!e||""===e)return[0,100];if("string"==typeof e&&e.includes("-")){var t=e.split("-").map(function(e){return parseFloat(e.trim())});return[t[0]||0,t[1]||100]}return[0,parseFloat(e)||0]},l=(0,a.useState)(o(s)),c=l[0],u=l[1],d=(0,a.useState)(0),f=d[0],m=d[1],g=(0,a.useState)(100),h=g[0],b=g[1];(0,a.useEffect)(function(){u(o(s))},[s]),(0,a.useEffect)(function(){switch(t){case"bounce_rate":case"conversion_rate":default:m(0),b(100);break;case"time_per_session":m(0),b(3600)}},[t]);var v=function(e){u(e);var t=e[0]===e[1]?e[0].toString():"".concat(e[0],"-").concat(e[1]);i(t)};return(0,n.jsx)("div",{className:"space-y-4",children:(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)(z,{min:f,max:h,value:c,onChange:v,formatValue:function(e){if(""===e||null==e)return"";var r="string"==typeof e?parseFloat(e):e;switch(t){case"bounce_rate":case"conversion_rate":return"".concat(r,"%");case"time_per_session":var n=Math.floor(r/60),a=r%60;return 0<n?"".concat(n,"m ").concat(a,"s"):"".concat(a,"s");default:return r.toString()}},label:(0,p.__)("Filter range","burst-statistics"),showLabels:!0,showCurrentValue:!0,rangeSeparator:" - "}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:(0,p.__)("Exact range values","burst-statistics")}),(0,n.jsxs)("div",{className:"flex space-x-2",children:[(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)(O.A,{type:"number",value:c[0],onChange:function(e){var t=e.target.value,r=parseFloat(t);if(""===t||!isNaN(r)&&r>=f&&r<=h){var n=[r||0,c[1]];u(n),v(n)}},placeholder:(0,p.__)("Min value…","burst-statistics"),min:f,max:h,className:"w-full"}),(0,n.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:(0,p.__)("Minimum value","burst-statistics")})]}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)(O.A,{type:"number",value:c[1],onChange:function(e){var t=e.target.value,r=parseFloat(t);if(""===t||!isNaN(r)&&r>=f&&r<=h){var n=[c[0],r||h];u(n),v(n)}},placeholder:(0,p.__)("Max value…","burst-statistics"),min:f,max:h,className:"w-full"}),(0,n.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:(0,p.__)("Maximum value","burst-statistics")})]}),(0,n.jsx)("button",{type:"button",onClick:function(){u([f,h]),i("")},className:"px-3 py-2 text-sm border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",children:(0,p.__)("Clear","burst-statistics")})]}),(0,n.jsx)("p",{className:"text-xs text-gray-500",children:(0,p.__)("Clear to remove this filter","burst-statistics")})]})]})})};var B=function(e,t,r){if(r||2===arguments.length)for(var n,a=0,s=t.length;a<s;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))};const G=function(e){var t=e.initialValue,r=void 0===t?"":t,s=e.onChange,i=m().getFilterOptions,o=(0,a.useState)([]),l=o[0],c=o[1];(0,a.useEffect)(function(){var e,t,r,n;e=void 0,t=void 0,n=function(){var e;return function(e,t){var r,n,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(s=0)),s;)try{if(r=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((a=(a=s.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){s.label=o[1];break}if(6===o[0]&&s.label<a[1]){s.label=a[1],a=o;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(o);break}a[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}(this,function(t){switch(t.label){case 0:return[4,i("devices")];case 1:return e=t.sent()||[],c(e),[2]}})},new((r=void 0)||(r=Promise))(function(a,s){function i(e){try{l(n.next(e))}catch(e){s(e)}}function o(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})},[]);var u,d=(0,a.useState)((u=r)&&""!==u.trim()?u.split(",").map(function(e){return e.trim().toLowerCase()}).filter(Boolean):[]),f=d[0],g=d[1];(0,a.useEffect)(function(){var e=0<f.length?f.join(","):"";s(e)},[f,s]);var h=function(e){g(function(t){return t.includes(e)?t.filter(function(t){return t!==e}):B(B([],t,!0),[e],!1)})},b=function(e){return f.includes(e)},v=function(e){var t="".concat(e.title," device filter"),r=b(e.id)?(0,p.__)("selected","burst-statistics"):(0,p.__)("not selected","burst-statistics");return"".concat(t,", ").concat(r)};return l&&0!==l.length?(0,n.jsx)("div",{className:"space-y-6",children:(0,n.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 justify-items-center",role:"group","aria-label":(0,p.__)("Device selection options","burst-statistics"),children:l.map(function(e){var t=b(e.id);return(0,n.jsxs)("button",{onClick:function(){return h(e.id)},onKeyDown:function(t){return function(e,t){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),h(t))}(t,e.id)},className:(0,y.A)("relative rounded-lg border-2 p-4 transition-all duration-200 bg-white w-full group","focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2","hover:shadow-md",{"border-primary bg-primary-light":t,"border-gray-300 hover:border-gray-400":!t}),"aria-label":v(e),"aria-pressed":t,type:"button",children:[t&&(0,n.jsx)("div",{className:"absolute top-2 right-2 z-10","aria-hidden":"true",children:(0,n.jsx)("div",{className:"h-2 w-2 rounded-full bg-primary"})}),(0,n.jsxs)("div",{className:"flex flex-col items-center space-y-3",children:[(0,n.jsx)("div",{className:(0,y.A)("flex h-12 w-12 items-center justify-center rounded-lg transition-colors",{"bg-primary-light":t,"bg-gray-100 group-hover:bg-gray-200":!t}),"aria-hidden":"true",children:(0,n.jsx)(x.A,{name:e.key,color:"gray",size:24,"aria-hidden":"true"})}),(0,n.jsx)("div",{className:"text-center",children:(0,n.jsx)("h3",{className:(0,y.A)("text-sm font-medium transition-colors",{"text-gray-900":t,"text-gray-700":!t}),children:e.title})})]}),(0,n.jsx)("div",{className:"absolute bottom-2 left-2 z-10","aria-hidden":"true",children:(0,n.jsx)("div",{className:(0,y.A)("h-4 w-4 rounded border-2 transition-all duration-200 flex items-center justify-center",{"bg-primary border-primary":t,"bg-white border-gray-300 group-hover:border-gray-400":!t}),children:t&&(0,n.jsx)(x.A,{name:"check",size:12,color:"white","aria-hidden":"true"})})})]},e.id)})})}):null};var q=function(){return q=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},q.apply(this,arguments)};const W=function(e){var t=e.filterKey,r=e.config,a=e.tempValue,s=e.onTempValueChange;return(0,n.jsx)("div",{className:"h-full",children:function(){var e={filterKey:t,config:r,initialValue:a,onChange:s};if("device_id"===t)return(0,n.jsx)(G,q({},e));switch(r.type){case"string":default:return(0,n.jsx)(E,q({},e));case"boolean":return(0,n.jsx)(I,q({},e));case"int":return(0,n.jsx)(V,q({},e))}}()})};var U=r(50552);const K=function(e){var t=e.isOpen,r=e.setIsOpen,o=e.initialFilter,l=(0,i.R7)(),c=l.setFilters,u=l.deleteFilter,d=l.clearAllFilters,f=l.getActiveFilters,m=(0,a.useState)("selection"),g=m[0],h=m[1],b=(0,a.useState)(null),y=b[0],j=b[1],_=(0,a.useState)(null),w=_[0],N=_[1],k=(0,a.useState)(""),A=k[0],O=k[1];s().useEffect(function(){t&&(o?(h("setup"),j(o.key),N(o.config),O(o.value)):(h("selection"),j(null),N(null),O("")))},[t,o]);var S=function(){h("selection"),j(null),N(null),O("")};return(0,n.jsx)(v.A,{isOpen:t,onClose:function(){return r(!1)},title:"selection"===g?(0,p.__)("Select a filter","burst-statistics"):(0,p.__)("Setup Filter","burst-statistics"),subtitle:"selection"===g?"selection"===g?(0,p.__)("Choose a filter to apply to your analytics data","burst-statistics"):(0,p.__)("Setup filter","burst-statistics"):void 0,customHeader:"setup"===g&&"setup"===g&&w?(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"flex items-center space-x-3 mb-4",children:(0,n.jsxs)("button",{onClick:S,className:"flex items-center space-x-2 text-sm text-gray-600 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 rounded transition-all duration-200","aria-label":(0,p.__)("Back to filters","burst-statistics"),type:"button",children:[(0,n.jsx)(x.A,{name:"chevron-left",size:16,"aria-hidden":"true"}),(0,n.jsx)("span",{children:(0,p.__)("Back to filters","burst-statistics")})]})}),(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,n.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-primary-light",children:(0,n.jsx)(x.A,{name:w.icon,color:"gray",size:20})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:w.label}),(0,n.jsx)("p",{className:"text-sm text-gray-600",children:"setup"===g&&w?"string"===w.type?w.options?(0,p.__)("Start typing to search or select from available options","burst-statistics"):(0,p.__)("Enter the value you want to filter by","burst-statistics"):"int"===w.type?(0,p.__)("Set the range for this filter","burst-statistics"):"boolean"===w.type?(0,p.__)("Select the option you want to filter by","burst-statistics"):"":""})]})]})]}):null,content:"selection"===g?(0,n.jsx)(C,{onSelectFilter:function(e,t){j(e),N(t),h("setup");var r=f();O(r[e]||"")}}):y&&w?(0,n.jsx)(W,{filterKey:y,config:w,onBack:S,tempValue:A,onTempValueChange:function(e){O(e)}}):null,footer:"selection"===g?(0,n.jsx)(U.A,{onClick:function(){d(),r(!1)},btnVariant:"tertiary",size:"sm",className:"w-full",ariaLabel:(0,p.__)("Reset all active filters to default settings","burst-statistics"),children:(0,p.__)("Reset all filters","burst-statistics")}):"setup"===g?(0,n.jsxs)("div",{className:"flex space-x-3",children:[(0,n.jsx)(U.A,{onClick:function(){var e,t;y&&(e=y,""===(t=A)||null==t?u(e):c(e,t),r(!1))},btnVariant:"primary",size:"sm",className:"flex-1",ariaLabel:w?(0,p.__)("Apply %s filter","burst-statistics").replace("%s",w.label):(0,p.__)("Apply filter","burst-statistics"),children:(0,p.__)("Apply Filter","burst-statistics")}),(0,n.jsx)(U.A,{onClick:function(){var e,t;y&&(e=y,""===(t=A)||null==t?u(e):c(e,t),S())},btnVariant:"secondary",size:"sm",className:"flex-1",ariaLabel:w?(0,p.__)("Apply %s filter and continue adding more filters","burst-statistics").replace("%s",w.label):(0,p.__)("Apply filter and add more","burst-statistics"),children:(0,p.__)("Apply & Add More","burst-statistics")})]}):null,triggerClassName:""})};var Z=r(74020),H=function(){var e=(0,Z.A)(function(e){return e.userCanFilter}),t=(0,a.useState)(!1),r=t[0],s=t[1],l=(0,a.useState)(null),c=l[0],u=l[1],d=function(){var e=(0,i.R7)(),t=e.filters,r=e.filtersConf,n=e.setFilters,s=m().getFilterOptionById,l=(0,o.G)(),c=l.setMetrics,u=l.getMetrics,d=(0,a.useState)([]),f=d[0],b=d[1];(0,a.useEffect)(function(){g(void 0,void 0,void 0,function(){var e;return h(this,function(t){switch(t.label){case 0:return[4,v()];case 1:return e=t.sent(),b(e),[2]}})})},[t]);var v=(0,a.useCallback)(function(){return g(void 0,void 0,void 0,function(){var e;return h(this,function(n){switch(n.label){case 0:return e=Object.entries(t).filter(function(e){return e[0],""!==e[1]}),[4,Promise.all(e.map(function(e){return g(void 0,[e],void 0,function(e){var t,n=e[0],a=e[1];return h(this,function(e){switch(e.label){case 0:return[4,y(n,a)];case 1:return t=e.sent(),[2,{key:n,value:a,displayValue:t,config:(null==r?void 0:r[n])||null}]}})})}))];case 1:return[2,n.sent()]}})})},[t,r]),y=function(e,t){return g(void 0,void 0,void 0,function(){var n,a,i,o,l;return h(this,function(c){switch(c.label){case 0:return t?Object.prototype.hasOwnProperty.call(r,e)&&(n=(null===(i=r[e])||void 0===i?void 0:i.options)||!1)?"string"!=typeof t||-1===t.indexOf(",")?[3,2]:(t=t.split(",").map(function(e){return e.trim()}),[4,Promise.all(t.map(function(e){return g(void 0,void 0,void 0,function(){return h(this,function(t){switch(t.label){case 0:return[4,s(e,n)];case 1:return[2,t.sent()||e]}})})}))]):[3,4]:[2,""];case 1:return t=(t=c.sent()).join(", "),[3,4];case 2:return[4,s(t,n)];case 3:t=c.sent()||t,c.label=4;case 4:switch(e){case"country_code":return t?(a=t.toUpperCase(),[2,(null===(l=null===(o=window.burst_settings)||void 0===o?void 0:o.countries)||void 0===l?void 0:l[a])||a]):[2,""];case"bounces":return[2,"include"===t?(0,p.__)("Bounced visitors","burst-statistics"):(0,p.__)("Active visitors","burst-statistics")];case"new_visitor":return[2,"true"===t?(0,p.__)("New visitors","burst-statistics"):(0,p.__)("Returning visitors","burst-statistics")];default:return[2,t]}return[2]}})})},x=(0,a.useCallback)(function(e){if(n(e,""),"goal_id"===e){var t=u().filter(function(e){return"conversions"!==e});c(t)}},[n,c,u]),j=(0,a.useMemo)(function(){return Array.isArray(f)&&0<f.length},[f]),_=(0,a.useCallback)(function(e){return r[e]||null},[r]);return{activeFilters:f,hasActiveFilters:j,removeFilter:x,getFilterConfig:_,setFilter:n,filters:t,filtersConf:r}}(),f=d.activeFilters,v=d.removeFilter;return(0,n.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,n.jsx)(b.B,{filters:f,onRemove:v,onClick:function(e){u({key:e.key,config:e.config,value:e.value}),s(!0)},className:"flex flex-wrap gap-2"}),e&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(b.wk,{onClick:function(){u(null),s(!0)}}),(0,n.jsx)(K,{isOpen:r,setIsOpen:function(){s(!1),u(null)},initialFilter:c})]})]})}},54466:(e,t,r)=>{r.r(t),r.d(t,{component:()=>rt});var n=r(91637),a=r(25323),s=r(34342),i=r(27723),o=r(77902),l=r(67744),c=r(11989),u=r(51609),d=r(4900),f=r(72905),m=r(40832),p=r(25894),g=r(38513),h=(0,u.memo)(function(e){var t=e.path,r=e.graticule,a=e.lineWidth,s=e.lineColor;return(0,n.jsx)("path",{fill:"none",strokeWidth:a,stroke:s,d:t(r())})});h.displayName="GeoGraticule";const b=h;var v=(0,u.memo)(function(e){var t,r,a=e.feature,s=e.path,i=e.fillColor,o=e.borderWidth,l=e.borderColor,c=e.onClick,u=e.onMouseEnter,d=e.onMouseMove,f=e.onMouseLeave,m=e.opacity,p=void 0===m?1:m;return(0,n.jsx)("path",{className:"burst-region-"+(null===(t=null==a?void 0:a.properties)||void 0===t?void 0:t.name),fill:null!==(r=null==a?void 0:a.fill)&&void 0!==r?r:i,strokeWidth:o,stroke:l,strokeLinejoin:"bevel",d:s(a),opacity:p,style:{cursor:c?"pointer":"default"},onMouseEnter:function(e){return null==u?void 0:u(a,e)},onMouseMove:function(e){return null==d?void 0:d(a,e)},onMouseLeave:function(e){return null==f?void 0:f(a,e)},onClick:function(e){return null==c?void 0:c(a,e)}},a.id)});v.displayName="GeoMapFeature";const y=v;var x=r(59615),j=r.n(x),_=r(66195),w=r.n(_),N=r(88744),k=r(52223),C=r(8511),A=r(88969),O=r(25059),S=r(26357),D=r(57937),M=r(65065),F=r(58088),E=r(89767),T=r(94555),I=r(2035),R=r(36772),P=r(51039),L=r(82139),z=r(27565),V=function(e,t,r){if(r||2===arguments.length)for(var n,a=0,s=t.length;a<s;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))},B={blues:["#f7fbff","#deebf7","#9ecae1","#6baed6","#3182bd","#08519c","#08306b"],greens:["#d5edce","#c1e2ba","#a1d99b","#41ab5d","#238b45","#006d2c","#00441b"],reds:["#ffebee","#ffcdd2","#ef9a9a","#e53935","#cb181d","#a50f15","#67000d"],blueRedDiverging:["#313695","#74add1","#e0f3f8","#ffffbf","#fee090","#f46d43","#a50026"],greenRedDiverging:["#006837","#66bd63","#d9ef8b","#ffffbf","#fee08b","#f46d43","#a50026"]},G=function(e){if(!e||0===e.length)return[];var t=e.map(function(e){return Number(e)}).filter(function(e){return!isNaN(e)&&isFinite(e)});if(0===t.length)return[];var r=t.filter(function(e){return 0<e}),n=t.some(function(e){return 0===e});if(0===r.length)return n?[0,0]:[];if(2>r.length)return n?[0,r[0]]:[r[0],r[0]];var a=V([],r,!0).sort(function(e,t){return e-t}),s=Math.max(3,Math.min(7,Math.ceil(1+Math.log2(a.length)))),i=[];n&&i.push(0);for(var o=1;o<s;o++){var l=o/s*(a.length-1),c=Math.floor(l),u=Math.ceil(l);if(c===u){var d=a[c];i.push(d)}else{var f=l-c,m=a[c]*(1-f)+a[u]*f;i.push(m)}}var p=a[a.length-1];i[i.length-1]!==p&&i.push(p);var g=i.sort(function(e,t){return e-t}),h=[];for(o=0;o<g.length;o++)(0===o||Math.abs(g[o]-g[o-1])>1e-10)&&h.push(g[o]);return h},q=function(e){if(!e||0===e.length)return[];var t=e.map(function(e){return Number(e)}).filter(function(e){return!isNaN(e)&&isFinite(e)});if(0===t.length)return[];var r=Math.min.apply(Math,t),n=Math.max.apply(Math,t),a=Math.max(3,Math.min(7,Math.ceil(1+Math.log2(t.length))));0===r&&100===n&&(a=5);for(var s=(n-r)/a,i=[],o=0;o<=a;o++)i.push(r+s*o);return i},W=function(e){if(!e||0===e.length)return[];var t=e.map(function(e){return Number(e)}).filter(function(e){return!isNaN(e)&&isFinite(e)});if(0===t.length)return[];for(var r=t.reduce(function(e,t){return e+t},0)/t.length,n=t.reduce(function(e,t){return e+Math.pow(t-r,2)},0)/t.length,a=Math.sqrt(n),s=Math.min.apply(Math,t),i=Math.max.apply(Math,t),o=(i-s)/(2*a),l=3<=o?7:2<=o?5:1<=o?4:3,c=Math.floor(l/2),u=[],d=-c;d<=c;d++){var f=r+d*a;u.push(f)}0==l%2&&u.push(r+(c+1)*a),u.sort(function(e,t){return e-t});var m=u.map(function(e){return Math.max(Math.min(e,i),s)}),p=new Set(m),g=Array.from(p).sort(function(e,t){return e-t});if(3>g.length)throw new Error("Standard deviation classification failed: data distribution does not allow for meaningful standard deviation classes");for(var h=V([],g,!0);h.length>l+1;){var b=Math.floor(h.length/2);h.splice(b,1)}for(;h.length<l+1;){var v=h.length-1,y=[];for(d=0;d<v;d++)if(y.push(h[d]),h.length<l+1){var x=(h[d]+h[d+1])/2;y.push(x)}if(y.push(h[h.length-1]),h=Array.from(new Set(y)).sort(function(e,t){return e-t}),y.length===h.length)break}return h[0]=s,h[h.length-1]=i,h},U=r(91788),K=function(){return K=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},K.apply(this,arguments)},Z=function(e,t,r){if(r||2===arguments.length)for(var n,a=0,s=t.length;a<s;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))},H={azimuthalEqualArea:k.A,azimuthalEquidistant:C.A,gnomonic:A.A,orthographic:O.A,stereographic:S.A,equalEarth:D.A,equirectangular:M.A,mercator:F.Ay,transverseMercator:E.A,naturalEarth1:T.A},Y=function(e){var t=e.features,r=e.data,n=e.match,a=e.label,s=e.value,i=e.valueFormat,o=e.unknownColor,l=e.domain,c=e.metric,d=e.colors,f=e.patternsEnabled,m=void 0!==f&&f,p=e.zoomLevel,g=void 0===p?1:p,h=e.classificationMethod,b=void 0===h?"quantile":h,v=e.metricOptions,y=void 0===v?{}:v,x=(0,u.useMemo)(function(){return r&&0<r.length&&r.some(function(e){var t=e[c];return null!=t&&!isNaN(t)&&isFinite(t)})},[r,c]),_=(0,u.useMemo)(function(){if(!x||!t)return null;var e=t.length,n=r.map(function(e){return e[c]}).filter(function(e){return null!=e&&!isNaN(e)&&isFinite(e)});return e>n.length&&(n=Z(Z([],n,!0),Array(Math.min(e-n.length,195)).fill(0),!0)),n},[r,c,t,x]),k=(0,u.useMemo)(function(){if(!x||!r)return null;var e=r.map(function(e){return e[c]}).filter(function(e){return null!=e&&!isNaN(e)&&0<e});if(0===e.length)return null;var t=Math.min.apply(Math,e),n=Math.max.apply(Math,e);return{min:t,max:n,range:n-t}},[r,c,x]),C=(0,u.useMemo)(function(){if(!m)return[];var e=function(e,t){return 2>=g?{size:e,spacing:t}:10>=g?{size:.5*e,spacing:.5*t}:20>=g?{size:.25*e,spacing:.25*t}:{size:.15*e,spacing:.15*t}};return[K(K({id:"dots-very-low",type:"patternDots",background:"inherit",color:"rgba(0, 0, 0, 0.6)"},e(1,3)),{stagger:!1}),{id:"lines-low",type:"patternLines",background:"inherit",color:"rgba(0, 0, 0, 0.5)",spacing:e(3,0).size,rotation:0,lineWidth:Math.max(1,e(1,0).size)},K(K({id:"squares-low-medium",type:"patternSquares",background:"inherit",color:"rgba(0, 0, 0, 0.4)"},e(2,3)),{stagger:!1}),{id:"lines-medium",type:"patternLines",background:"inherit",color:"rgba(0, 0, 0, 0.5)",spacing:e(4,0).size,rotation:45,lineWidth:Math.max(1,e(2,0).size)},{id:"lines-medium-high",type:"patternLines",background:"inherit",color:"rgba(0, 0, 0, 0.6)",spacing:e(3,0).size,rotation:90,lineWidth:Math.max(1,e(1,0).size)},K(K({id:"squares-high",type:"patternSquares",background:"inherit",color:"rgba(0, 0, 0, 0.5)"},e(4,1)),{stagger:!0}),K(K({id:"dots-very-high",type:"patternDots",background:"inherit",color:"rgba(0, 0, 0, 0.7)"},e(4,1)),{stagger:!0})]},[m,g]),A=(0,u.useCallback)(function(e,t,r){return{match:function(r){if(!m||!k)return!1;if(!r||!r.value||0===r.value)return!1;if(0>=k.range)return!1;var n=(r.value-k.min)/k.range;return n>=e&&n<t},id:r}},[null==k?void 0:k.min,null==k?void 0:k.max,null==k?void 0:k.range,m]),O=(0,u.useMemo)(function(){return m?[A(0,1/7,"dots-very-low"),A(1/7,2/7,"lines-low"),A(2/7,3/7,"squares-low-medium"),A(3/7,4/7,"lines-medium"),A(4/7,5/7,"lines-medium-high"),A(5/7,6/7,"squares-high"),A(6/7,1,"dots-very-high")]:[]},[A,m]),S=(0,u.useMemo)(function(){return x&&_?function(e,t,r,n){if(void 0===t&&(t=[0,100]),void 0===r&&(r="quantile"),void 0===n&&(n=[0,0]),!e)throw new Error("colorScheme parameter is required");var a;if("string"==typeof e){if(!B[e])throw new Error("Unknown color scheme '".concat(e,"'. Available schemes: ").concat(Object.keys(B).join(", ")));a=B[e]}else{if(!Array.isArray(e))throw new Error("colorScheme must be either a string key or an array of colors");if(0===e.length)throw new Error("Color scheme array cannot be empty");a=e}var s=["quantile","equal-interval","standard-deviation","natural-breaks"];if(!s.includes(r))throw new Error("Invalid classification method '".concat(r,"'. Valid methods: ").concat(s.join(", ")));if(null==n)return null;if(!Array.isArray(n))throw new Error("values parameter must be an array when provided");if(0===n.length)return null;var i,o,l=n.filter(function(e){return null!=e&&!isNaN(e)&&isFinite(e)});if(0===l.length)return null;if(2>l.length)return null;if(!Array.isArray(t))throw new Error("domain parameter must be an array");try{i=function(e,t){if(void 0===t&&(t="quantile"),!e||!Array.isArray(e))return console.error("values parameter must be an array"),[];if(0===e.length)return console.error("values array cannot be empty"),[];var r=e.filter(function(e){return null!=e&&!isNaN(e)&&isFinite(e)});if(0===r.length)return console.error("validValues array cannot be empty"),[];if(2>r.length)return console.error("validValues array must have at least 2 values"),[];var n,a=["quantile","equal-interval","standard-deviation","natural-breaks"];if(!a.includes(t))return console.error("Invalid classification method '".concat(t,"'. Valid methods: ").concat(a.join(", "))),[];try{switch(t){case"natural-breaks":n=function(e,t){if(!e||0===e.length)return[];if((!t||0>=t)&&(t=Math.max(3,Math.min(7,Math.ceil(1+Math.log2(e.length))))),0>=t)return[];var r=e.map(function(e){return Number(e)}).filter(function(e){return!isNaN(e)&&isFinite(e)});if(0===r.length)return[];var n=r,a=new Set(n),s=Array.from(a);if(s.length<t)return s.sort(function(e,t){return e-t});var i,o,l=V([],n,!0).sort(function(e,t){return e-t}),c=l.length;if(0>=t+1||0>=c+1)return console.error("[ERROR] jenksNaturalBreaks: Invalid matrix dimensions: ".concat(t+1," x ").concat(c+1)),[];if(1e4<t+1||1e4<c+1)return console.error("[ERROR] jenksNaturalBreaks: Matrix dimensions too large: ".concat(t+1," x ").concat(c+1)),[];try{i=Array(t+1).fill(0).map(function(){return Array(c+1).fill(0)}),o=Array(t+1).fill(0).map(function(){return Array(c+1).fill(0)})}catch(e){return console.error("[ERROR] jenksNaturalBreaks: Failed to create matrices:",e),[]}for(var u=function(e,t){for(var r=0,n=0,a=e;a<t;a++)r+=l[a],n+=l[a]*l[a];return n-r*(r/(t-e))},d=1;d<=c;d++)i[1][d]=u(0,d);for(var f=2;f<=t;f++)for(d=f;d<=c;d++){for(var m=1/0,p=-1,g=f-1;g<d;g++){var h=i[f-1][g]+u(g,d);h<m&&(m=h,p=g)}i[f][d]=m,o[f][d]=p}var b=[],v=c;for(f=t;0<f;f--)f===t&&b.push(l[v-1]),0!==(v=o[f][v])&&b.push(l[v-1]);b.push(l[0]);var y=b.reverse(),x=[];for(d=0;d<y.length;d++)(0===d||Math.abs(y[d]-y[d-1])>1e-10)&&x.push(y[d]);return x}(r);break;case"equal-interval":n=q(r);break;case"standard-deviation":n=W(r);break;case"quantile":n=G(r)}}catch(e){return console.error("classification method failed",e),[]}return!n||2>n.length?(console.error("classification result is invalid"),[]):n}(n,r)}catch(e){return console.error("[WorldMap] Classification failed:",e),null}if(!i||2>i.length)return console.warn("[WorldMap] Invalid breaks, returning null."),null;if(1>i.length-1)throw new Error("Classification resulted in no valid classes");if(o=a,2<i.length){var c=i.slice(1,-1),u=(0,L.A)().domain(c).range(o),d=function(e){return 0===e?o[0]:u(e)};return d.domain=function(){return i},d.range=function(){return o},d}var f=[i[0],i[i.length-1]],m=(0,z.A)().domain(f).range(o),p=function(e){return 0===e&&0===f[0]?o[0]:m(e)};return p.domain=function(){var e=m.domain();if("function"!=typeof m.quantiles)return e;var t=m.quantiles();return V(V([e[0]],t,!0),[e[1]],!1)},p.range=function(){return m.range()},p}(d,l,b,_):null},[d,l,b,_,x]),D=(0,u.useMemo)(function(){return j()(n)?n:function(e,t){var r=w()(e,n),a=w()(t,n);return r&&r===a}},[n]),M=(0,u.useMemo)(function(){return j()(a)?a:function(e){return w()(e,a)}},[a]),F=(0,u.useMemo)(function(){return j()(s)?s:function(e){return w()(e,s)}},[s]),E=(0,u.useMemo)(function(){return c&&y[c]?(0,U.Ad)(c,y):void 0===i?function(e){return e}:j()(i)?i:(0,N.GP)(i)},[c,y,i]),T=(0,u.useMemo)(function(){return function(e){return S&&void 0!==e.value?S(e.value):o}},[S,o]),I=(0,u.useMemo)(function(){return t&&r?t.map(function(e){var t=r.find(function(t){return D(e,t)}),n=F(t);if(t){var a=K(K({},e),{data:t,value:n,formattedValue:E(n)});return a.color=T(a),a.label=M(a),a}return e}):[]},[t,r,D,F,E,T,M]),R=Q({colors:d,scale:S,valueFormat:E,unknownColor:o,patternsEnabled:m,patternFills:O});return{colorScale:S,getFillColor:T,boundFeatures:I,valueFormatter:E,legendData:R,patternDefs:C,patternFills:O}},Q=function(e){var t=e.scale,r=e.domain,n=e.reverse,a=void 0!==n&&n,s=e.valueFormat,i=void 0===s?function(e){return e}:s,o=e.separator,l=void 0===o?" - ":o,c=e.unknownColor,d=void 0===c?"#dee2e6":c,f=e.patternsEnabled,m=void 0!==f&&f,p=e.patternFills,g=void 0===p?[]:p;return(0,u.useMemo)(function(){if(!t)return[{id:d,index:0,extent:[d,d],label:"No data",value:d,color:d,pattern:""}];var e=null!=r?r:t.range(),n=t.domain(),s=m?{"dots-very-low":"⚬","lines-low":"━","squares-low-medium":"▢","lines-medium":"⟋","lines-medium-high":"┃","squares-high":"■","dots-very-high":"●"}:{},o=e.map(function(e,r){var a;if(r>=n.length-1)return null;var o=n[r],c=n[r+1],u="";if(m&&0<g.length){var d=Math.min(r,g.length-1),f=null===(a=g[d])||void 0===a?void 0:a.id;u=s[f]||""}return{id:e,index:r,extent:[o,c],label:"".concat(i(o)).concat(l).concat(i(c)),value:t(o),color:e,pattern:u}}).filter(function(e){return null!==e});return o.unshift({id:d,index:o.length,extent:[d,d],label:"No data",value:t(d),color:d,pattern:""}),a&&o.reverse(),o},[r,t,a,l,i,d,m,g])},$=r(42552),J=r(30346),X=r(14243),ee=function(){return ee=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},ee.apply(this,arguments)},te=function(e,t,r){if(r||2===arguments.length)for(var n,a=0,s=t.length;a<s;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))},re={level:"world",id:null,parentId:null,title:"World View"},ne={scale:144,translation:[.5,.5],rotation:[0,0,0]},ae={visitors:{label:(0,i.__)("Visitors","burst-statistics"),recommendedClassification:"natural-breaks",default:!0,colorScheme:"greens",isPercentage:!1,showPercentageOfTotal:!0,precision:0,suffix:""},sessions:{label:(0,i.__)("Sessions","burst-statistics"),recommendedClassification:"natural-breaks",colorScheme:"greens",isPercentage:!1,showPercentageOfTotal:!0,precision:0,suffix:""},bounce_rate:{label:(0,i.__)("Bounce Rate","burst-statistics"),recommendedClassification:"equal-interval",colorScheme:"blueRedDiverging",isPercentage:!0,showPercentageOfTotal:!1,precision:1,suffix:"%"},avg_session_duration:{label:(0,i.__)("Avg. Session Duration","burst-statistics"),recommendedClassification:"standard-deviation",colorScheme:"blueRedDiverging",isPercentage:!1,isTime:!0,showPercentageOfTotal:!1,precision:0,suffix:"s"},conversion_rate:{label:(0,i.__)("Conversion Rate","burst-statistics"),recommendedClassification:"natural-breaks",colorScheme:"greens",isPercentage:!0,showPercentageOfTotal:!1,precision:2,suffix:"%"}},se={"natural-breaks":{label:(0,i.__)("Natural Breaks (Jenks)","burst-statistics"),description:(0,i.__)("Finds patterns in the data to create categories with minimal variation within groups. Works well for all metrics, especially Pageviews and Conversion Rate.","burst-statistics")},"equal-interval":{label:(0,i.__)("Equal Interval","burst-statistics"),description:(0,i.__)("Splits the data range into equal-sized intervals. Ideal for percentage-based metrics like Bounce Rate or Conversion Rate.","burst-statistics")},"standard-deviation":{label:(0,i.__)("Standard Deviation","burst-statistics"),description:(0,i.__)("Groups data based on how far values deviate from the average. Highlights outliers in metrics like Bounce Rate or Avg. Session Duration.","burst-statistics")},quantile:{label:(0,i.__)("Quantile","burst-statistics"),description:(0,i.__)("Divides data into equal-sized groups, ensuring each category has the same number of regions. Best for evenly distributed metrics like Pageviews or Visitors.","burst-statistics")}},ie=(0,J.v)((0,X.Zr)(function(e,t){return{selectedMetric:"visitors",setSelectedMetric:function(t){return e({selectedMetric:t})},patternsEnabled:!1,setPatternsEnabled:function(t){return e({patternsEnabled:t})},classificationMethod:"quantile",setClassificationMethod:function(t){return e({classificationMethod:t})},zoomTarget:null,setZoomTarget:function(t){return e({zoomTarget:t})},defaultView:re,currentView:re,currentViewHasIncompleteData:!1,setCurrentViewHasIncompleteData:function(t){e({currentViewHasIncompleteData:t})},currentViewMissingData:null,setCurrentViewMissingData:function(t){e({currentViewMissingData:t})},history:[re],projection:ee({},ne),longitude:0,navigateToView:function(t){e(function(e){return{currentView:t,history:te(te([],e.history,!0),[t],!1)}}),setTimeout(function(){return e({zoomTarget:null})},750)},navigateBack:function(){e(function(e){if(1<e.history.length){var t=e.history.slice(0,-1),r=t[t.length-1],n="world"===r.level;return ee({history:t,currentView:r,zoomTarget:n?"reset":null},n&&{projection:ee({},ne)})}return{}}),setTimeout(function(){return e({zoomTarget:null})},750)},resetGeoToDefault:function(){var r=t().defaultView;e({currentView:r,history:[r],projection:ee({},ne),zoomTarget:"reset"}),setTimeout(function(){return e({zoomTarget:null})},750)},setProjection:function(t){e(function(e){return{projection:ee(ee({},e.projection),t)}})},autoSelectOption:null,setAutoSelectOption:function(t){return e({autoSelectOption:t})},incompleteDataNoticeDismissedAt:null,isIncompleteDataNoticeDismissed:!1,dismissIncompleteDataNotice:function(){var t=Date.now();e({incompleteDataNoticeDismissedAt:t,isIncompleteDataNoticeDismissed:!0})},checkDismissalExpiry:function(){var r=t().incompleteDataNoticeDismissedAt;if(!r)return e({isIncompleteDataNoticeDismissed:!1});var n=Date.now()-r<2592e6;e({isIncompleteDataNoticeDismissed:n})}}},{name:"burst-geo-storage",partialize:function(e){return{selectedMetric:e.selectedMetric,currentView:e.currentView,history:e.history,patternsEnabled:e.patternsEnabled,classificationMethod:e.classificationMethod,autoSelectOption:e.autoSelectOption,incompleteDataNoticeDismissedAt:e.incompleteDataNoticeDismissedAt,isIncompleteDataNoticeDismissed:e.isIncompleteDataNoticeDismissed}}})),oe=(0,u.memo)(function(e){var t,r=e.feature,a=e.total,s=e.selectedMetric,o=e.valueFormatter,l=e.geoIpDatabaseType;if(!r)return null;var c="Admin-0 country"!==r.properties.featurecla,u=(null===(t=r.properties)||void 0===t?void 0:t.name)||r.label||(0,i.__)("Unknown location","burst-statistics"),d=r.value||0,f=ae[s]||ae.visitors,m=o?o(d):(0,U.Ad)(s,ae)(d),p=f.showPercentageOfTotal,g=a&&0<a&&p?(0,U.Ee)(d/a*100):null;return(0,n.jsxs)("div",{className:"min-w-[10em] max-w-xs rounded-md border border-gray-200 bg-white p-3 text-sm shadow-lg",children:[c&&r.properties.name_en&&(0,n.jsxs)("span",{className:"text-xs text-gray",children:[r.properties.name_en," (",r.properties.type_en,")"]}),(0,n.jsx)("div",{className:"mb-1 flex items-center gap-2 text-md font-semibold",children:c?(0,n.jsxs)(n.Fragment,{children:[" ",u," "]}):(0,n.jsx)($.A,{country:r.properties.iso_a2,countryNiceName:(0,U.qQ)(r.properties.iso_a2)})}),!c&&r.properties.continent&&(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)("div",{className:"text-xs text-gray",children:r.properties.continent}),r.properties.continent!==r.properties.subregion&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"text-xs text-gray",children:"•"}),(0,n.jsx)("div",{className:"text-xs text-gray",children:r.properties.subregion})]})]}),(0,n.jsxs)("div",{className:"mb-2 mt-3 rounded-lg border border-gray-100 bg-gray-50 p-2",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("div",{className:"text-xs font-medium uppercase tracking-wide text-gray",children:f.label}),f.isPercentage&&(0,n.jsx)("div",{className:"bg-blue-500 h-2 w-2 rounded-full"})]}),(0,n.jsx)("div",{className:"mt-1 text-xl font-bold text-black",children:m}),p&&g&&(0,n.jsxs)("div",{className:"mt-1 flex items-center gap-1 text-xs text-gray",children:[(0,n.jsx)("div",{className:"h-1 w-1 rounded-full bg-gray-400"}),(0,i.sprintf)(/* translators: %s: Percentage value */ /* translators: %s: Percentage value */
(0,i.__)("%s of total","burst-statistics"),g)]})]}),r.properties.pop_est&&(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{className:"text-xs text-gray",children:(0,i.sprintf)(/* translators: 1: Population number, 2: Year */ /* translators: 1: Population number, 2: Year */
(0,i.__)("Population: %1$s (%2$s)","burst-statistics"),(0,U.ZV)(r.properties.pop_est),r.properties.pop_year)})}),!c&&"city"===l&&(0,n.jsx)("div",{className:"mt-2 text-xs font-semibold text-gray",children:(0,i.__)("Click to see country specific data","burst-statistics")})]})});oe.displayName="ChoroplethTooltip";const le=oe;var ce=(0,u.memo)(function(e){var t=e.data,r=e.containerWidth,a=e.containerHeight,s=e.anchor,i=void 0===s?"bottom-left":s,o=e.itemWidth,l=void 0===o?94:o,c=e.itemHeight,u=void 0===c?18:c,d=e.itemsSpacing,f=void 0===d?0:d,m=e.itemTextColor,p=void 0===m?"#444444":m,g=e.symbolSize,h=void 0===g?18:g,b=e.patternsEnabled,v=void 0!==b&&b;if(!t||0===t.length)return null;var y=function(){var e,n,s=t.length*(u+f),o=l;switch(i){case"bottom-left":default:e=20,n=a-s-20;break;case"bottom-right":e=r-o-20,n=a-s-20;break;case"top-left":e=20,n=20;break;case"top-right":e=r-o-20,n=20}return{x:e=Math.max(10,Math.min(e,r-o-10)),y:n=Math.max(10,Math.min(n,a-s-10))}}(),x=y.x,j=y.y;return(0,n.jsx)("g",{className:"pattern-legend",transform:"translate(".concat(x,", ").concat(j,")"),children:t.map(function(e,t){var r=t*(u+f);return(0,n.jsxs)("g",{className:"legend-item",transform:"translate(0, ".concat(r,")"),children:[(0,n.jsx)("rect",{x:0,y:0,width:h,height:h,fill:e.color,stroke:"rgba(0,0,0,0.1)",strokeWidth:.5}),v&&e.pattern&&(0,n.jsx)("text",{x:h/2,y:h/2,textAnchor:"middle",dominantBaseline:"central",fontSize:"10",fill:"rgba(0,0,0,0.8)",fontWeight:"bold",children:e.pattern}),(0,n.jsx)("text",{x:h+8,y:h/2,dominantBaseline:"central",fontSize:"11",fill:p,children:e.label})]},e.id)})})});ce.displayName="PatternLegend";const ue=ce;var de=function(){return de=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},de.apply(this,arguments)},fe=function(e,t,r){if(r||2===arguments.length)for(var n,a=0,s=t.length;a<s;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))},me=(0,u.memo)((0,u.forwardRef)(function(e){var t,r=e.width,a=e.height,s=e.margin,i=e.features,o=e.data,l=e.match,c=void 0===l?"id":l,h=e.label,v=void 0===h?"id":h,x=e.value,j=void 0===x?"value":x,_=e.valueFormat,w=e.projectionType,N=void 0===w?"mercator":w,k=e.projectionScale,C=void 0===k?100:k,A=e.projectionTranslation,O=void 0===A?[.5,.5]:A,S=e.projectionRotation,D=void 0===S?[0,0,0]:S,M=e.colors,F=void 0===M?"greens":M,E=e.domain,T=e.unknownColor,L=void 0===T?"#dee2e6":T,z=e.borderWidth,V=void 0===z?0:z,B=e.borderColor,G=void 0===B?"#000000":B,q=e.enableGraticule,W=void 0!==q&&q,U=e.graticuleLineWidth,K=void 0===U?.5:U,Z=e.graticuleLineColor,Q=void 0===Z?"#999999":Z,$=e.baseMapFeatures,J=void 0===$?[]:$,X=e.baseMapFeatureColor,ee=void 0!==X&&X,te=e.overlayFeatures,re=void 0===te?[]:te,ne=e.overlayData,ae=void 0===ne?[]:ne,se=e.overlayMatch,ie=e.overlayValue,oe=e.overlayColors,ce=e.showBaseLayer,me=void 0===ce||ce,pe=e.overlayOpacity,ge=void 0===pe?1:pe,_x=e.baseLayerOpacity,he=void 0===_x?.3:_x,be=e.layers,ve=void 0===be?["graticule","baseMapFeatures","features","overlayFeatures","legends"]:be,ye=e.legends,xe=void 0===ye?[]:ye,je=e.isInteractive,_e=void 0===je||je,we=e.onClick,Ne=void 0===we?function(){}:we,ke=e.tooltip,Ce=void 0===ke?le:ke,Ae=e.role,Oe=void 0===Ae?"img":Ae,Se=e.defs,De=void 0===Se?[]:Se,Me=e.fill,Fe=void 0===Me?[]:Me,Ee=e.transform,Te=void 0===Ee?{scale:1,x:0,y:0}:Ee,Ie=e.classificationMethod,Re=void 0===Ie?"quantile":Ie,Pe=e.metric,Le=e.metricOptions,ze=e.patternsEnabled,Ve=void 0!==ze&&ze,Be=e.tooltipTotal,Ge=e.selectedMetric,qe=e.zoomToFeature,We=e.geoIpDatabaseType,Ue=(0,u.useRef)(null),Ke=(0,u.useRef)(null),Ze=(0,u.useRef)(null),He=(0,u.useRef)(null),Ye=(0,d.Xl)(r,a,s),Qe=Ye.margin,$e=Ye.outerWidth,Je=Ye.outerHeight,Xe=(0,u.useState)(1),et=Xe[0],tt=Xe[1],rt=(0,u.useCallback)(function(e){return 2>=e?1:5>=e?2:10>=e?3:4},[]),nt=(0,u.useCallback)(function(e){if(Ve){var t=rt(e);tt(function(r){return rt(r)!==t?e:r})}},[rt,Ve]),at=Y({features:i,data:o,match:c,label:v,value:j,valueFormat:_,unknownColor:L,domain:E,metric:Pe,metricOptions:Le,colors:F,patternsEnabled:Ve,zoomLevel:Ve?rt(et):void 0,classificationMethod:Re}),st=at.getFillColor,it=at.boundFeatures,ot=at.legendData,lt=at.patternDefs,ct=at.patternFills,ut=at.valueFormatter,dt=0<(null===(t=null==re?void 0:re.features)||void 0===t?void 0:t.length),ft=Y({features:dt&&(null==re?void 0:re.features)||[],data:dt?ae||o:[],match:se||c,label:v,value:ie||j,valueFormat:_,unknownColor:L,domain:E,metric:Pe,metricOptions:Le,colors:oe||F,patternsEnabled:Ve,zoomLevel:Ve?rt(et):void 0,classificationMethod:Re}),mt=ft.getFillColor,pt=ft.boundFeatures,gt=ft.legendData,ht=ft.patternDefs,bt=ft.patternFills,vt=ft.valueFormatter,yt=function(e){var t=e.width,r=e.height,n=e.projectionType,a=e.projectionScale,s=e.projectionTranslation,i=e.projectionRotation,o=e.fillColor,l=e.borderWidth,c=e.borderColor,d=e.theme,f=e.onZoomChange,g=s[0],h=s[1],b=i[0],v=i[1],y=i[2],x=(0,u.useRef)({k:1,x:0,y:0}),j=(0,u.useMemo)(function(){return H[n]().scale(a).translate([t*g,r*h]).rotate([b,v,y])},[t,r,n,a,g,h,b,v,y]),_=(0,u.useMemo)(function(){return(0,I.A)(j)},[j]),w=(0,u.useMemo)(function(){return(0,R.A)()},[]),N=(0,u.useMemo)(function(){var e="function"==typeof l?l:function(){return l};return function(t){return e(t)/x.current.k}},[l]),k=(0,u.useCallback)(function(e,t){var r=1===e.k?{k:1,x:0,y:0}:{k:e.k,x:e.x,y:e.y};x.current=r,f&&f(r.k);var n="translate(".concat(r.x,",").concat(r.y,") scale(").concat(r.k,")");t.attr("transform",n),t.selectAll("path").attr("stroke-width",function(e){return N(e)})},[N,f]),C=(0,u.useCallback)(function(){var e;return(null===(e=x.current)||void 0===e?void 0:e.k)||1},[]),A=(0,u.useCallback)(function(e,n){if(!e.current||!n.current)return null;var a=(0,p.A)(e.current),s=(0,p.A)(n.current),i=(0,m.s_)().scaleExtent([1,100]).on("zoom",function(e){k(e.transform,s)});return a.call(i),{cleanup:function(){a.on("zoom",null)},zoomToFeature:function(e){if(e&&e.geometry)try{var n=_.bounds(e),s=n[0],o=s[0],l=s[1],c=n[1],u=c[0],d=c[1],f=(o+u)/2,p=(l+d)/2,g=.8*Math.min(t/(u-o),r/(d-l)),h=Math.max(1,Math.min(100,g)),b=t/2-f*h,v=r/2-p*h;a.transition().duration(750).call(i.transform,m.GS.translate(b,v).scale(h))}catch(e){console.warn("Error zooming to feature:",e)}},reset:function(){a.transition().duration(750).call(i.transform,m.GS,(0,m._V)(a.node()).invert([t/2,r/2]))},zoom:i}},[t,r,k,_]),O=(0,P.nz)(c,d),S=(0,u.useMemo)(function(){return"function"==typeof o?o:function(){return o}},[o]);return{projection:j,path:_,graticule:w,getBorderWidth:N,getBorderColor:O,getFillColor:S,setupZoom:A,zoomTransformRef:x,getCurrentZoomLevel:C}}({width:r,height:a,projectionType:N,projectionScale:C,projectionTranslation:O,projectionRotation:D,fillColor:function(){},borderWidth:V,borderColor:G,transform:Te,onZoomChange:nt,patternsEnabled:Ve}),xt=yt.graticule,jt=yt.path,_t=yt.getBorderWidth,wt=yt.getBorderColor,Nt=fe(fe(fe([],De,!0),lt,!0),dt?ht:[],!0),kt=fe(fe(fe([],Fe,!0),ct,!0),dt?bt:[],!0),Ct=(0,d.kc)(Nt,fe(fe([],it,!0),dt?pt:[],!0),kt,{dataKey:"data",targetKey:"fill"}),At=(0,f.fS)(),Ot=At.showTooltipFromEvent,St=At.hideTooltip,Dt=(0,u.useCallback)(function(e,t){return _e&&Ne&&Ne(e,t)},[_e,Ne]),Mt=(0,u.useCallback)(function(e,t){if(_e&&Ce){var r=dt?vt:ut;Ot((0,n.jsx)(Ce,{feature:e,total:Be,selectedMetric:Ge,valueFormatter:r,geoIpDatabaseType:We}),t)}},[_e,Ot,Ce,Be,Ge,dt,vt,ut,We]),Ft=(0,u.useCallback)(function(e,t){if(_e&&Ce){var r=dt?vt:ut;Ot((0,n.jsx)(Ce,{feature:e,total:Be,selectedMetric:Ge,valueFormatter:r,geoIpDatabaseType:We}),t)}},[_e,Ot,Ce,Be,Ge,dt,vt,ut,We]),Et=(0,u.useCallback)(function(){return _e&&St()},[_e,St]);return(0,u.useEffect)(function(){if(Ue.current&&Ke.current){var e=(0,p.A)(Ue.current),t=(0,p.A)(Ke.current),r=(0,m.s_)().scaleExtent([1,1e3]).on("zoom",function(e){var r=e.transform;t.attr("transform","translate(".concat(r.x,",").concat(r.y,") scale(").concat(r.k,")")),t.selectAll("path").attr("stroke-width",function(){return V/r.k}),nt&&nt(r.k)});return e.call(r),Ze.current={svg:e,zoom:r,path:jt},function(){e.on("zoom",null),Ze.current=null}}},[jt,nt,V]),(0,u.useEffect)(function(){if(qe&&Ze.current){var e=Ze.current,t=e.svg,n=e.zoom,s=e.path;if("reset"!==qe)try{var i=void 0;if("FeatureCollection"===qe.type&&He.current){var o=He.current.getBBox();0<o.width&&0<o.height&&(i=[[o.x,o.y],[o.x+o.width,o.y+o.height]])}if(!i&&(qe.geometry||"FeatureCollection"===qe.type))if("FeatureCollection"===qe.type){var l=(0,g.A)(qe),c=l[0],u=c[0],d=c[1],f=l[1],p=f[0],h=f[1],b=s.projection()([u,d]),v=s.projection()([p,h]);if(!b||!v)return void console.error("Failed to project geographic bounds, aborting zoom");i=[b,v]}else i=s.bounds(qe);if(!i)return;var y=i[0],x=y[0],j=y[1],_=i[1],w=_[0],N=_[1],k=Math.min(100,.8/Math.max((w-x)/r,(N-j)/a)),C=Math.max(1,k),A=r/2-(x+w)/2*C,O=a/2-(j+N)/2*C,S=m.GS.translate(A,O).scale(C);t.transition().duration(750).call(n.transform,S)}catch(e){console.error("Error zooming to feature:",e)}else t.transition().duration(750).call(n.transform,m.GS)}},[qe,r,a]),(0,u.useEffect)(function(){if(Ue.current&&Ke.current){var e=(0,p.A)(Ue.current),t=(0,p.A)(Ke.current),r=e.node().__zoom||{k:1};1<r.k&&t.selectAll("path").attr("stroke-width",function(){return V/r.k})}},[it,pt,V]),(0,n.jsxs)(d.Ge,{width:$e,height:Je,margin:Qe,defs:Ct,role:Oe,ref:Ue,children:[(0,n.jsx)("g",{ref:Ke,className:"map-layers",children:ve.map(function(e,t){if("graticule"===e)return!0!==W?null:(0,n.jsx)(b,{path:jt,graticule:xt,lineWidth:K,lineColor:Q},"graticule");if("baseMapFeatures"===e)return J&&0!==J.length?(0,n.jsx)(u.Fragment,{children:(0,n.jsx)("g",{className:"base-map-features-group",children:J.map(function(e,t){return(0,n.jsx)(y,{feature:e,path:jt,fillColor:ee||"#e9ecef",borderWidth:_t(e),borderColor:"rgb(249 249 249)"},"base-".concat(e.id||t))})})},"baseMapFeatures"):null;if("features"===e){var r=dt&&me?he:1;return!dt||me?(0,n.jsx)(u.Fragment,{children:(0,n.jsx)("g",{className:"features-group",children:it.map(function(e,t){return(0,n.jsx)(y,{feature:e,path:jt,fillColor:st(e),borderWidth:_t(e),borderColor:wt(e),onMouseEnter:dt?void 0:Mt,onMouseMove:dt?void 0:Ft,onMouseLeave:dt?void 0:Et,onClick:dt?void 0:Dt,opacity:r},e.id||"feature-".concat(t))})})},"features"):null}return"overlayFeatures"===e?dt?(0,n.jsx)(u.Fragment,{children:(0,n.jsx)("g",{className:"overlay-features-group",ref:He,children:pt.map(function(e,t){return(0,n.jsx)(y,{feature:e,path:jt,fillColor:mt(e),borderWidth:_t(e),borderColor:wt(e),onMouseEnter:Mt,onMouseMove:Ft,onMouseLeave:Et,onClick:Dt,opacity:ge},"overlay-".concat(e.id||t))})})},"overlayFeatures"):null:"legends"!==e?(0,n.jsx)(u.Fragment,{children:e({})},t):null}).filter(Boolean)}),function(){if(!ve.includes("legends"))return null;var e=dt?gt:ot;return(0,n.jsx)("g",{className:"legends-layer",children:xe.map(function(t,s){return(0,n.jsx)(ue,de({containerWidth:r,containerHeight:a,data:e,patternsEnabled:Ve},t),s)})})}()]})}));const pe=(0,d.Ub)(me);var ge=function(){return ge=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},ge.apply(this,arguments)},he=(0,u.forwardRef)(function(e,t){return(0,n.jsx)(d.KF,{children:function(r){var a=r.width,s=r.height;return(0,n.jsx)(pe,ge({ref:t,width:a,height:s},e))}})});he.displayName="ResponsiveChoropleth";const be=he;var ve=r(86087),ye=r(53411);const xe=function(){var e=ie(function(e){return e.currentView}),t=ie(function(e){return e.history}),r=ie(function(e){return e.navigateBack}),a=ie(function(e){return e.resetGeoToDefault}),s=(0,ve.useCallback)(function(){r()},[r]),o=(0,ve.useCallback)(function(){"world"!==e.level&&a()},[e.level,a]),l=[{label:(0,i._x)("World","navigation item","burst-statistics"),isActive:"world"===e.level,onClick:o,isClickable:"world"!==e.level}];"world"!==e.level&&l.push({label:e.title||e.id,isActive:!0,isClickable:!1,id:e.id});var c=1<t.length;return(0,n.jsxs)("div",{className:"flex items-stretch gap-2",children:[(0,n.jsx)("div",{className:"flex items-center rounded-lg border border-gray-200 bg-white/95 text-sm shadow-sm transition-all hover:shadow-md",children:(0,n.jsx)("button",{onClick:c?s:void 0,disabled:!c,className:"focus:ring-blue-500 flex h-9 w-9 items-center justify-center rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-1 ".concat(c?"cursor-pointer text-white hover:bg-gray-100":"cursor-not-allowed text-gray"),title:c?(0,i._x)("Go back","button title","burst-statistics"):(0,i._x)("No previous page","button title","burst-statistics"),children:(0,n.jsx)(ye.A,{name:"chevron-left",size:16,color:c?"black":"gray"})})}),(0,n.jsx)("div",{className:"flex items-center rounded-lg border border-gray-200 bg-white/95 px-3 py-2 text-sm shadow-sm transition-all hover:shadow-md",children:(0,n.jsx)("nav",{className:"flex items-center","aria-label":(0,i._x)("Map navigation","aria label","burst-statistics"),children:(0,n.jsx)("ol",{className:"flex items-center space-x-1",children:l.map(function(e,t){return(0,n.jsxs)("li",{className:"m-0 flex items-center",children:[0<t&&(0,n.jsx)(ye.A,{name:"chevron-right",size:14,color:"gray",className:"mx-1 flex-shrink-0"}),e.isClickable?(0,n.jsx)("button",{onClick:e.onClick,className:"text-blue-600 hover:text-blue-800 focus:ring-blue-500 rounded px-1 py-0.5 text-sm transition-colors hover:underline focus:outline-none focus:ring-2 focus:ring-offset-1",children:e.label}):(0,n.jsx)("span",{className:"rounded px-1 py-0.5 text-sm ".concat(e.isActive?"font-medium text-black":"bg-gray-200 text-gray"),children:(0,n.jsx)($.A,{country:e.id,countryNiceName:e.label})})]},t)})})})})]})};var je=r(61626),_e=r(23222),we=r(3663),Ne=r(84400),ke=function(e,t,r,n){return new(r||(r=Promise))(function(a,s){function i(e){try{l(n.next(e))}catch(e){s(e)}}function o(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})},Ce=function(e,t){var r,n,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(s=0)),s;)try{if(r=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((a=(a=s.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){s.label=o[1];break}if(6===o[0]&&s.label<a[1]){s.label=a[1],a=o;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(o);break}a[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},Ae=burst_settings.plugin_url+"includes/Pro/assets/maps",Oe=burst_settings.plugin_url+"assets/maps/world/world_loading.json",Se="".concat(Ae,"/world"),De="".concat(Ae,"/countries"),Me=function(e,t){if(!e||!e.objects||!e.objects[t])return console.warn("TopoData or objectKey '".concat(t,"' not found for conversion."),null==e?void 0:e.objects),{type:"FeatureCollection",features:[]};try{var r=(0,_e.A)(e,e.objects[t]);return e.transform&&(r.transform=e.transform),r}catch(e){return console.error("Error converting TopoJSON to GeoJSON:",e),{type:"FeatureCollection",features:[]}}},Fe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return ke(void 0,function(e,t,r){if(r||2===arguments.length)for(var n,a=0,s=t.length;a<s;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))}([],e,!0),void 0,function(e){var t,r;return void 0===e&&(e=!1),Ce(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),t=e?Oe:"".concat(Se,"/world.json"),[4,(0,we.nd)(t)];case 1:return[2,n.sent()];case 2:throw r=n.sent(),console.error("Error fetching world topo:",r),r;case 3:return[2]}})})},Ee=function(){var e,t,r=ie(function(e){return e.currentView}),n=(0,Ne.A)().isPro,a=(0,je.I)({queryKey:["simplified_initial_world_topo"],queryFn:function(){return Fe(!0)},staleTime:1/0,cacheTime:1/0,retry:3,enabled:!0}),s=a.data,i=a.isLoading,o=(0,je.I)({queryKey:["world_data_detailed"],queryFn:function(){return Fe(!1)},staleTime:1/0,cacheTime:1/0,retry:3,enabled:n}),l=o.data,c=o.isLoading,u=(0,je.I)({queryKey:(t=r.id,["country_overlay",t]),queryFn:function(){return e=r.id,ke(void 0,void 0,void 0,function(){var t,r;return Ce(this,function(n){switch(n.label){case 0:if(n.trys.push([0,2,,3]),!e)throw new Error("Country ID is required");return t="".concat(De,"/").concat(e.toLowerCase(),".json"),[4,(0,we.nd)(t)];case 1:return[2,n.sent()];case 2:throw r=n.sent(),console.error("Error fetching country topo:",r),r;case 3:return[2]}})});var e},enabled:"country"===r.level&&!!r.id,staleTime:1/0,cacheTime:1/0,retry:3}),d=u.data,f=u.isLoading,m=(0,ve.useMemo)(function(){if(!s)return{type:"FeatureCollection",features:[]};var e=Object.keys(s.objects||{})[0]||"features";return Me(s,e)},[s]),p=(0,ve.useMemo)(function(){if(!l)return{type:"FeatureCollection",features:[]};var e=Object.keys(l.objects||{})[0]||"features";return Me(l,e)},[l]),g=(0,ve.useMemo)(function(){if(!d)return{type:"FeatureCollection",features:[]};var e=Object.keys(d.objects||{})[0]||"features";return Me(d,e)},[d]),h=(0,ve.useMemo)(function(){var e,t;switch(r.level){case"world":return 0<(null===(e=null==p?void 0:p.features)||void 0===e?void 0:e.length)?p:m;case"country":return 0<(null===(t=null==g?void 0:g.features)||void 0===t?void 0:t.length)?g:p;default:return m}},[r.level,p,g,m]),b=(0,ve.useMemo)(function(){return m},[m]),v=(0,ve.useMemo)(function(){var e;return"country"===r.level&&0<(null===(e=null==g?void 0:g.features)||void 0===e?void 0:e.length)?g:{type:"FeatureCollection",features:[]}},[r.level,g]),y=(0,ve.useMemo)(function(){var e,t,n;return"world"===r.level?c&&!(null===(e=null==p?void 0:p.features)||void 0===e?void 0:e.length)&&!(0<(null===(t=null==m?void 0:m.features)||void 0===t?void 0:t.length)):"country"===r.level?f&&!(null===(n=null==g?void 0:g.features)||void 0===n?void 0:n.length):i},[r.level,c,f,i,p,g,m]);return{geoFeatures:h,simplifiedWorldGeoJson:m,baseLayerFeatures:b,overlayFeatures:v,worldGeoJson:p,countryOverlayGeoJson:g,isGeoLoading:y,isGeoFetching:f,isGeoSimpleLoading:i,isWorldLoading:c,isCountryOverlayLoading:f,currentView:r,hasOverlay:"country"===r.level&&0<(null===(e=null==g?void 0:g.features)||void 0===e?void 0:e.length),geoError:null}};const Te=function(e){return t=void 0,r=[e],a=function(e){var t,r=e.startDate,n=e.endDate,a=e.range,s=e.args;return function(e,t){var r,n,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(s=0)),s;)try{if(r=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((a=(a=s.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){s.label=o[1];break}if(6===o[0]&&s.label<a[1]){s.label=a[1],a=o;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(o);break}a[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,(0,we.bQ)("geo",r,n,a,s)];case 1:return[2,e.sent().data];case 2:return t=e.sent(),console.error("Error fetching geo data:",t),[2,[]];case 3:return[2]}})},new((n=void 0)||(n=Promise))(function(e,s){function i(e){try{l(a.next(e))}catch(e){s(e)}}function o(e){try{l(a.throw(e))}catch(e){s(e)}}function l(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n(function(e){e(r)})).then(i,o)}l((a=a.apply(t,r||[])).next())});var t,r,n,a};var Ie=r(88432),Re=r(88887),Pe=r(50616),Le=r(86274);const ze=function(){var e,t,r,a,s=ie(function(e){return e.currentView}),o=ie(function(e){return e.currentViewMissingData}),l=ie(function(e){return e.setCurrentViewMissingData}),c=ie(function(e){return e.navigateToView}),u=ie(function(e){return e.projection}),d=ie(function(e){return e.selectedMetric}),f=ie(function(e){return e.patternsEnabled}),m=ie(function(e){return e.classificationMethod}),p=ie(function(e){return e.dismissIncompleteDataNotice}),g=ie(function(e){return e.isIncompleteDataNoticeDismissed}),h=ie(function(e){return e.checkDismissalExpiry}),b=(0,Le.A)().getValue,v=b("burst_update_to_city_geo_database_time"),y=b("geo_ip_database_type"),x=(0,ve.useMemo)(function(){var e;return(null===(e=ae[d])||void 0===e?void 0:e.colorScheme)||"greens"},[d]),j=(0,ve.useMemo)(function(){return(0,U.Ad)(d,ae)},[d]),_=ie(function(e){return e.zoomTarget}),w=ie(function(e){return e.setZoomTarget}),N=Ee(),k=N.geoFeatures,C=N.simplifiedWorldGeoJson,A=N.baseLayerFeatures,O=N.overlayFeatures,S=N.hasOverlay,D=N.isGeoLoading,M=N.isGeoFetching,F=N.isGeoSimpleLoading,E=N.error,T=function(){var e=(0,Re.S)(function(e){return e}),t=e.startDate,r=e.endDate,n=e.range,a=(0,Ie.R7)().filters,s=ie(function(e){return e.selectedMetric}),i=ie(function(e){return e.currentView}),o={filters:a,metrics:s,currentView:{level:i.level,id:i.id}};return(0,je.I)({queryKey:["geo_analytics",t,r,i.level,i.id,s,a],queryFn:function(){return Te({startDate:t,endDate:r,range:n,args:o})},staleTime:3e5,placeholderData:[]})}(),I=T.data,R=void 0===I?[]:I,P=T.isFetching,L=T.error,z=(0,ve.useCallback)(function(e){var t,r,n,a,i,o;e&&(null===(t=e.properties)||void 0===t?void 0:t.iso_a2)&&"country"!==y&&("country"===s.level&&s.id===e.properties.iso_a2||("world"===s.level?o={level:"country",id:null===(r=e.properties)||void 0===r?void 0:r.iso_a2,parentId:null,title:"".concat((null===(n=e.properties)||void 0===n?void 0:n.name)||e.id)}:"continent"===s.level&&(o={level:"country",id:null===(a=e.properties)||void 0===a?void 0:a.iso_a2,parentId:s.id,title:"".concat((null===(i=e.properties)||void 0===i?void 0:i.name)||e.id)}),!o||"city"!==y&&"world"!==s.level||c(o)))},[s.level,s.id,c,y]);(0,ve.useEffect)(function(){h()},[h]),(0,ve.useEffect)(function(){var e;if("country"===s.level&&s.id&&!M&&!D&&0<(null===(e=null==O?void 0:O.features)||void 0===e?void 0:e.length)){var t={type:"FeatureCollection",features:O.features};w(t)}},[s.level,s.id,O,M,D,w]);var V=(0,ve.useMemo)(function(){return function(e,t){var r,n;if("world"===s.level){var a=null===(r=e.properties)||void 0===r?void 0:r.iso_a2,i=t.country_code;return a&&i&&a===i}return"country"===s.level&&"city"===y&&(a=null===(n=e.properties)||void 0===n?void 0:n.iso_3166_2,i=t.country_code+"-"+t.state_code,a&&i&&a===i)}},[s.level,s.id,y]),B=(0,ve.useMemo)(function(){return function(e){if(!e)return 0;var t=parseInt(e[d],10);return isNaN(t)?0:t}},[d]),G=(0,ve.useMemo)(function(){return function(e){var t,r;return(null===(t=e.properties)||void 0===t?void 0:t.name_en)||(null===(r=e.properties)||void 0===r?void 0:r.iso_a2)||(0,i.__)("Unknown","burst-statistics")}},[]),q=(0,ve.useMemo)(function(){return R&&0!==R.length?("city"===y&&"country"===s.level&&R.some(function(e){return!e.state_code})?l(R.find(function(e){return!e.state_code})):l(null),R.reduce(function(e,t){return e+B(t)},0)):0},[R,B]),W=(0,ve.useMemo)(function(){if(!R||0===R.length)return null;var e=R.map(function(e){return B(e)}).filter(function(e){return 0<e});if(0===e.length)return null;var t=function(e,t,r){if(r||2===arguments.length)for(var n,a=0,s=t.length;a<s;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))}([],e,!0).sort(function(e,t){return e-t}),r=e.reduce(function(e,t){return e+t},0)/e.length,n=t[Math.floor(t.length/2)];return{count:e.length,min:Math.min.apply(Math,e),max:Math.max.apply(Math,e),mean:Math.round(r),median:Math.round(n),total:q}},[R,B,q]),K=(0,ve.useMemo)(function(){if(!R||0===R.length)return[0,100];var e=R.map(function(e){return B(e)}).filter(function(e){return 0<e});return 0===e.length?[0,100]:[Math.min.apply(Math,e),Math.max.apply(Math,e)]},[R,B]),Z=E||L,H=D||M||P;return Z?(0,n.jsxs)("div",{className:"text-red-500 relative p-4",children:[(0,n.jsx)("div",{className:"absolute left-3 top-3 z-10",children:(0,n.jsx)(xe,{})}),(0,n.jsx)("div",{className:"mt-12",children:(0,n.jsx)("p",{children:(0,i.sprintf)(/* translators: %s: Error message */ /* translators: %s: Error message */
(0,i.__)("Error: %s","burst-statistics"),String(Z))})})]}):F?(0,n.jsx)("div",{className:"p-4 text-gray",children:(0,i.__)("Loading map data…","burst-statistics")}):d?(0,n.jsxs)("div",{className:"relative h-full min-h-[450px] w-full rounded-b-lg",style:{boxShadow:"inset 0 0 40px rgba(0, 0, 0, 0.06)"},children:[H&&(0,n.jsx)("div",{className:"absolute inset-0 z-20 flex items-center justify-center bg-white/30 backdrop-blur-sm",children:(0,n.jsxs)("div",{className:"flex flex-col items-center gap-3 rounded-lg bg-white p-6 shadow-lg",children:[(0,n.jsx)("div",{className:"border-blue-600 h-8 w-8 animate-spin rounded-full border-b-2"}),(0,n.jsx)("div",{className:"text-sm font-medium text-gray",children:D||M?(0,i.__)("Loading map data…","burst-statistics"):(0,i.__)("Loading analytics…","burst-statistics")})]})}),"city"===y&&(0,n.jsx)("div",{className:"absolute left-3 top-3 z-10",children:(0,n.jsx)(xe,{})}),"city"===y&&o&&!g&&(0,n.jsx)("div",{className:"absolute left-3 top-16 z-10 max-w-md",children:(0,n.jsx)("div",{className:"rounded-lg border border-gray-200 bg-white/95 px-4 py-3 text-sm shadow-sm transition-all hover:shadow-md",children:(0,n.jsxs)("div",{className:"flex items-start gap-3",children:[(0,n.jsx)(ye.A,{name:"help",size:16,color:"blue",className:"mt-0.5 flex-shrink-0"}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsxs)("div",{className:"mb-2 text-black",children:[(0,n.jsx)("p",{className:"font-semibold",children:(0,i.sprintf)((0,i.__)("Region-level data is available for visits after %s.","burst-statistics"),v?(0,U.BM)(v):"")}),(0,n.jsx)("p",{className:"mt-1",children:(0,i.__)("Region tracking is a new feature, so this data is only available for visits recorded after it was enabled.","burst-statistics")})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,n.jsx)("a",{href:(0,Pe.U)("new-feature-region-tracking/",{utm_source:"worldmap",utm_content:"incomplete-data-notice"}),target:"_blank",rel:"noopener noreferrer",className:"text-blue underline",children:(0,i.__)("Learn more","burst-statistics")}),(0,n.jsx)("button",{onClick:p,className:"rounded bg-gray-200 px-3 py-1 text-gray hover:bg-gray-300 hover:text-gray",title:(0,i.__)("Dismiss for 30 days","burst-statistics"),children:(0,i.__)("Dismiss","burst-statistics")})]})]})]})})}),(0,n.jsx)("div",{className:"absolute ".concat("country"===y?"left-3 top-3":"right-3 top-3"),children:(0,n.jsxs)("div",{className:"duration-400 group rounded-lg border border-gray-200 bg-white/95 px-3 py-2 text-sm shadow-sm transition-all hover:shadow-md z-[1] relative",children:[(0,n.jsx)("div",{className:"font-semibold text-black",children:(0,i.sprintf)("world"===s.level||"country"===y?/* translators: %s: Metric name (e.g., "Pageviews", "Visitors") */ /* translators: %s: Metric name (e.g., "Pageviews", "Visitors") */
(0,i._x)("%s per country","metric by location","burst-statistics"):/* translators: %s: Metric name (e.g., "Pageviews", "Visitors") */ /* translators: %s: Metric name (e.g., "Pageviews", "Visitors") */
(0,i._x)("%s per region","metric by location","burst-statistics"),(null===(e=ae[d])||void 0===e?void 0:e.label)||d)}),W&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"mt-1 text-xs text-gray",children:(0,i.sprintf)(/* translators: %d: Number of locations that have data */
"country"===y?(0,i._n)("%d country with data","%d countries with data",W.count,"burst-statistics"):(0,i._n)("%d region with data","%d regions with data",W.count,"burst-statistics"),W.count)}),f&&(0,n.jsxs)("div",{className:"mt-1 text-xs text-gray",children:["•"," ",(0,i.__)("Patterns enabled","burst-statistics")]}),o&&(0,n.jsxs)("div",{className:"mt-1 flex items-center gap-1 text-xs text-gray",children:[(0,n.jsx)(ye.A,{name:"help",size:12,strokeWidth:2,color:"blue"}),(0,i.sprintf)(/* translators: %d: Number of visitors with unknown region, %s: metric label */ /* translators: %d: Number of visitors with unknown region, %s: metric label */
(0,i.__)("%d %s with unknown region","burst-statistics"),j(B(o)),(null===(r=null===(t=ae[d])||void 0===t?void 0:t.label)||void 0===r?void 0:r.toLowerCase())||d.toLowerCase())]})]}),W&&(0,n.jsx)("div",{className:"max-h-0 overflow-hidden opacity-0 transition-all duration-300 ease-in-out group-hover:max-h-32 group-hover:opacity-100",children:(0,n.jsxs)("div",{className:"mt-2 space-y-1 border-t border-gray-100 pt-2 text-xs text-gray",children:[(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsxs)("span",{children:[(0,i._x)("Range","statistic label","burst-statistics"),":"]}),(0,n.jsxs)("span",{children:[j(W.min)," -"," ",j(W.max)]})]}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsxs)("span",{children:[(0,i._x)("Average","statistic label","burst-statistics"),":"]}),(0,n.jsx)("span",{children:j(W.mean)})]}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsxs)("span",{children:[(0,i._x)("Median","statistic label","burst-statistics"),":"]}),(0,n.jsx)("span",{children:j(W.median)})]}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsxs)("span",{children:[(0,i._x)("Total","statistic label","burst-statistics"),":"]}),(0,n.jsx)("span",{className:"font-medium",children:j(W.total)})]}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsxs)("span",{children:[(0,i._x)("Method","statistic label","burst-statistics"),":"]}),(0,n.jsx)("span",{className:"font-medium capitalize",children:(0,i._x)(m.replace("-"," "),"classification method","burst-statistics")})]})]})})]})}),0<(null===(a=null==k?void 0:k.features)||void 0===a?void 0:a.length)&&!F&&(0,n.jsx)(be,{onClick:z,data:R,features:"world"===s.level?k.features:A.features,transform:k.transform,baseMapFeatures:C.features,overlayFeatures:S?O:{features:[]},overlayData:S?R:[],overlayMatch:V,overlayValue:B,showBaseLayer:S,baseLayerOpacity:.2,overlayOpacity:1,match:V,value:B,margin:{top:0,right:0,bottom:0,left:0},colors:x,domain:K,unknownColor:"#dee2e6",label:G,valueFormat:j,projectionType:"naturalEarth1",projectionScale:u.scale,projectionTranslation:u.translation,projectionRotation:u.rotation,enableGraticule:!0,graticuleLineColor:"#dddddd",borderWidth:.5,borderColor:"#adb5bd",metric:d,metricOptions:ae,patternsEnabled:f,classificationMethod:m,zoomToFeature:_,legends:[{anchor:"bottom-left",direction:"column",justify:!0,translateX:20,translateY:-100,itemsSpacing:0,itemWidth:94,itemHeight:18,itemDirection:"left-to-right",itemTextColor:"#444444",itemOpacity:.85,symbolSize:18,effects:[{on:"hover",style:{itemTextColor:"#000000",itemOpacity:1}}]}],tooltipTotal:null==W?void 0:W.total,selectedMetric:d,geoIpDatabaseType:y},"choropleth-".concat(f?"patterns":"no-patterns","-").concat(m))]}):(0,n.jsx)("div",{className:"p-4 text-gray",children:(0,i.__)("No metrics available for display.","burst-statistics")})};var Ve=r(65162),Be=r(65825),Ge=r(94976),qe=r(50552);const We=function(){var e=(0,ve.useState)(!1),t=e[0],r=e[1],a=ie(function(e){return e.selectedMetric}),s=ie(function(e){return e.setSelectedMetric}),o=ie(function(e){return e.patternsEnabled}),l=ie(function(e){return e.setPatternsEnabled}),c=ie(function(e){return e.classificationMethod}),u=ie(function(e){return e.setClassificationMethod}),d=ie(function(e){return e.resetGeoToDefault}),f=ie(function(e){var t;return null===(t=e.autoSelectOption)||void 0===t||t}),m=ie(function(e){return e.setAutoSelectOption}),p=(0,ve.useState)(a),g=p[0],h=p[1],b=(0,ve.useState)(o),v=b[0],y=b[1],x=(0,ve.useState)(c),j=x[0],_=x[1];return(0,ve.useEffect)(function(){h(a),y(o),_(c)},[a,o,c]),(0,ve.useEffect)(function(){var e;if(f&&g){var t=(null===(e=ae[g])||void 0===e?void 0:e.recommendedClassification)||"quantile";_(t)}},[g,f]),(0,n.jsxs)(Ve.bL,{open:t,onOpenChange:function(e){e?r(!0):(r(!1),h(a),y(o),_(c))},children:[(0,n.jsx)(Ve.l9,{id:"burst-filter-button",onClick:function(){return r(!t)},children:(0,n.jsx)("div",{className:"".concat(t?"bg-gray-300 shadow-lg":"bg-gray-100 shadow-sm"," border border-gray-400 focus:ring-blue-500 cursor-pointer rounded-full p-2.5 transition-all duration-200 hover:bg-gray-400 hover:shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2 opacity-30 group-hover/root:opacity-100"),children:(0,n.jsx)(ye.A,{name:"filter"})})}),(0,n.jsx)(Ve.ZL,{container:document.querySelector(".burst"),children:(0,n.jsxs)(Ve.UC,{className:"z-50 min-w-[320px] max-w-[400px] rounded-lg border border-gray-200 bg-white p-0 shadow-xl",align:"end",sideOffset:10,arrowPadding:10,children:[(0,n.jsx)(Ve.i3,{className:"fill-white drop-shadow-sm"}),(0,n.jsx)("div",{className:"border-b border-gray-100 px-4 py-3",children:(0,n.jsx)("h5",{className:"m-0 text-base font-semibold text-black",children:(0,i.__)("Metrics & options","burst-statistics")})}),(0,n.jsxs)("div",{className:"max-h-[80vh] overflow-y-auto px-4 py-4",children:[(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsx)("label",{className:"mb-3 block text-sm font-medium text-gray",children:(0,i.__)("Select metric","burst-statistics")}),(0,n.jsx)("div",{className:"flex flex-col",children:Object.entries(ae).map(function(e){var t=e[0],r=e[1];return(0,n.jsx)(Be.A,{id:"metric_".concat(t),name:"metric_selection",value:t,label:r.label,checked:g===t,onChange:h},t)})})]}),(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsxs)("div",{className:"mb-3 flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray",children:(0,i.__)("Classification method","burst-statistics")}),(0,n.jsx)(ye.A,{color:"blue",name:"help",size:16,className:"rounded-full bg-blue-light",tooltip:(0,i.__)("A classification method determines how data values are grouped into ranges or categories to color regions on a choropleth map. The recommended method is based on the selected metric. For more information for each method, see the help icon next to each method.","burst-statistics")})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2 rounded-full border border-gray-200 bg-gray-100 px-2 py-1",children:[(0,n.jsx)("label",{htmlFor:"auto-select",className:"text-sm text-gray",children:(0,i.__)("Auto-select","burst-statistics")}),(0,n.jsx)(Ge.A,{id:"auto-select",value:f,onChange:function(e){var t;if(m(e),e){var r=(null===(t=ae[g])||void 0===t?void 0:t.recommendedClassification)||"quantile";_(r)}},size:"small"})]})]}),(0,n.jsx)("div",{className:"flex flex-col",children:Object.entries(se).map(function(e){var t,r=e[0],a=e[1],s=(null===(t=ae[g])||void 0===t?void 0:t.recommendedClassification)===r,i=f?s:j===r;return(0,n.jsx)("div",{className:"mb-1 flex items-center gap-2 ".concat(f?"opacity-90":""),children:(0,n.jsx)(Be.A,{id:"classification_".concat(r),name:"classification_method",value:r,label:a.label,checked:i,onChange:function(){return function(e){m(!1),_(e)}(r)},tooltip:a.description,recommended:s})},r)})})]}),(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsx)("label",{className:"mb-3 block text-sm font-medium text-gray",children:(0,i.__)("Accessibility","burst-statistics")}),(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("div",{className:"mb-1 text-sm text-black",children:(0,i.__)("Colorblind Patterns","burst-statistics")}),(0,n.jsx)("div",{className:"text-xs text-gray",children:(0,i.__)("Add patterns for colorblind accessibility","burst-statistics")})]}),(0,n.jsx)(Ge.A,{value:v,onChange:y,size:"default"})]})]})]}),(0,n.jsx)("div",{className:"rounded-b-lg border-t border-gray-100 bg-gray-50 px-4 py-3",children:(0,n.jsx)("div",{className:"space-y-2",children:(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)(qe.A,{onClick:function(){var e;if(s(g),l(v),f){var t=(null===(e=ae[g])||void 0===e?void 0:e.recommendedClassification)||"quantile";u(t)}else u(j);r(!1)},btnVariant:"primary",size:"sm",className:"flex-1",children:(0,i.__)("Apply","burst-statistics")}),(0,n.jsx)(qe.A,{onClick:function(){var e,t=Object.keys(ae).find(function(e){return ae[e].default})||"visitors";h(t),y(!1),_("quantile"),m(!0),s(t),l(!1);var n=(null===(e=ae[t])||void 0===e?void 0:e.recommendedClassification)||"quantile";u(n),d(),r(!1)},btnVariant:"tertiary",size:"sm",className:"flex-1",children:(0,i.__)("Reset to defaults","burst-statistics")})]})})})]})})]})},Ue=function(){return(0,n.jsx)("div",{className:"flex items-center gap-2",children:(0,n.jsx)(We,{})})};var Ke=r(23130);const Ze=(0,u.memo)(function(){return(0,n.jsx)(o.e,{className:"row-span-2 xl:col-span-6 group/root",children:(0,n.jsxs)(Ke.A,{children:[(0,n.jsx)(l.q,{className:"border-b border-gray-200",title:(0,i.__)("World View","burst-statistics"),controls:(0,n.jsx)(Ue,{})}),(0,n.jsx)(c.t,{className:"px-0 py-0",children:(0,n.jsx)(ze,{})})]})})});var He=r(51956),Ye=r(48677);const Qe=function(){var e=Ee(),t=e.simplifiedWorldGeoJson,r=e.isGeoSimpleLoading,a=ie(function(e){return e.projection});return r?(0,n.jsx)("div",{children:"Loading..."}):t?(0,n.jsx)("div",{className:"relative h-full min-h-[450px] w-full rounded-b-lg",style:{boxShadow:"inset 0 0 40px rgba(0, 0, 0, 0.06)"},children:(0,n.jsx)(be,{features:[],data:[],baseMapFeatures:t.features,transform:t.transform,baseLayerOpacity:1,baseMapFeatureColor:"#006d2c",match:"id",value:"value",margin:{top:0,right:0,bottom:0,left:0},projectionType:"naturalEarth1",projectionScale:a.scale,projectionTranslation:a.translation,projectionRotation:a.rotation,enableGraticule:!0,graticuleLineColor:"#dddddd",borderWidth:.5,borderColor:"#adb5bd",isInteractive:!1,layers:["baseMapFeatures","graticule"],legends:[],zoomToFeature:null})}):(0,n.jsx)("div",{children:"No data available"})},$e=(0,u.memo)(function(){return(0,n.jsx)(o.e,{className:"row-span-2 xl:col-span-6",children:(0,n.jsxs)(Ke.A,{children:[(0,n.jsx)(l.q,{className:"border-b border-gray-200",title:(0,i.__)("World View","burst-statistics")}),(0,n.jsx)(c.t,{className:"px-0 py-0",children:(0,n.jsx)(Qe,{})})]})})}),Je=function(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"col-span-12 flex items-center justify-between",children:[(0,n.jsx)(Ke.A,{children:(0,n.jsx)(He.y,{})}),(0,n.jsx)(Ke.A,{children:(0,n.jsx)(Ye.A,{})})]}),(0,n.jsx)(Ke.A,{children:(0,n.jsx)($e,{})}),(0,n.jsx)(Ke.A,{children:(0,n.jsx)(s.A,{allowedConfigs:["pages"],id:"99",isEcommerce:!1})}),(0,n.jsx)(Ke.A,{children:(0,n.jsx)(s.A,{allowedConfigs:["pages"],id:"100",isEcommerce:!1})}),(0,n.jsx)(Ke.A,{children:(0,n.jsx)(s.A,{allowedConfigs:["pages"],id:"101",isEcommerce:!1})})]})};var Xe=r(98541),et=r(37891),tt=r(22352);function rt(){return(0,(0,Ne.A)().isLicenseValidFor)("sources")?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(tt.A,{}),(0,n.jsx)(a.z,{}),(0,n.jsx)(Ke.A,{children:(0,n.jsx)(Ze,{})}),(0,n.jsx)(Ke.A,{children:(0,n.jsx)(s.A,{allowedConfigs:["countries"],id:"5"})}),(0,n.jsx)(Ke.A,{children:(0,n.jsx)(s.A,{allowedConfigs:["campaigns"],id:"3"})}),(0,n.jsx)(Ke.A,{children:(0,n.jsx)(s.A,{allowedConfigs:["referrers"],id:"4"})})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(Je,{}),(0,n.jsx)(Xe.A,{children:(0,n.jsx)(et.A,{type:"sources"})})]})}r(13410)},61445:(e,t,r)=>{r.d(t,{A:()=>g,l:()=>p});var n=r(61626),a=r(70802),s=r(78280),i=r(3663),o=r(21587),l=r(27723),c=r(89085),u=r(84400),d=function(){return d=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},d.apply(this,arguments)},f=function(e,t,r,n){return new(r||(r=Promise))(function(a,s){function i(e){try{l(n.next(e))}catch(e){s(e)}}function o(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})},m=function(e,t){var r,n,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(s=0)),s;)try{if(r=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((a=(a=s.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){s.label=o[1];break}if(6===o[0]&&s.label<a[1]){s.label=a[1],a=o;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(o);break}a[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},p=function(e){return e.map(function(t){var r=d({},t);if(t.react_conditions){var n=function(e,t){return!e||0===Object.keys(e).length||Object.entries(e).some(function(e){var r=e[0],n=e[1],a=t.find(function(e){return e.id===r});if(!a)return!1;var s=a.value;return!!s&&n.includes(s)})}(t.react_conditions,e);"disable"===t.condition_action?r.disabled=!n:r.conditionallyDisabled=!n}return r})};const g=function(){var e,t,r,p=(0,a.jE)(),g=(0,u.A)().isPro,h=(0,n.I)({queryKey:["goals_data"],queryFn:function(){return f(void 0,void 0,void 0,function(){var e;return m(this,function(t){switch(t.label){case 0:return[4,(0,i.DX)()];case 1:return[2,{goals:(e=t.sent()).goals||[],predefinedGoals:e.predefinedGoals||[],goalFields:Object.values(e.goalFields||{})}]}})})},retry:1}),b=(0,s.n)({mutationFn:function(){return f(void 0,void 0,void 0,function(){var e,t;return m(this,function(r){switch(r.label){case 0:return e=(null===(t=p.getQueryData(["goals_data"]))||void 0===t?void 0:t.goals)||[],[4,(0,i.d2)({goals:e})];case 1:return[2,r.sent()]}})})},onSuccess:function(){},onError:function(e){console.error(e),o.oR.error((0,l.__)("Failed to save goals","burst-statistics"))}}),v=(0,s.n)({mutationFn:function(e){return f(void 0,[e],void 0,function(e){var t,r=e.id,n=e.value;return m(this,function(e){switch(e.label){case 0:return t=[{id:r,title:n}],[4,(0,i.d2)({goals:t})];case 1:return[2,e.sent()]}})})},onError:function(e){console.error(e),o.oR.error((0,l.__)("Failed to save goal title","burst-statistics"))}}),y=(0,s.n)({mutationFn:function(){return f(void 0,void 0,void 0,function(){return m(this,function(e){switch(e.label){case 0:return[4,(0,i.D)()];case 1:return[2,e.sent()]}})})},onSuccess:function(e){p.setQueryData(["goals_data"],function(t){return t?(0,c.jM)(t,function(t){t.goals.push(e.goal)}):t}),o.oR.success((0,l.__)("Goal added successfully!","burst-statistics"))},onError:function(e){console.error(e),o.oR.error((0,l.__)("Failed to add goal","burst-statistics"))}}),x=(0,s.n)({mutationFn:function(e){return f(void 0,void 0,void 0,function(){return m(this,function(t){switch(t.label){case 0:return[4,(0,i.$x)(e)];case 1:return[2,t.sent()]}})})},onSuccess:function(e,t){e.deleted&&(p.setQueryData(["goals_data"],function(e){return e?(0,c.jM)(e,function(e){if(1===e.goals.length)e.goals=[];else{var r=e.goals.findIndex(function(e){return e.id===t});-1!==r&&e.goals.splice(r,1)}}):e}),o.oR.success((0,l.__)("Goal deleted successfully!","burst-statistics")))},onError:function(e){console.error(e),o.oR.error((0,l.__)("Failed to delete goal","burst-statistics"))}}),j=(0,s.n)({mutationFn:function(e){return f(void 0,[e],void 0,function(e){var t=e.predefinedGoalId;return m(this,function(e){switch(e.label){case 0:if(!g)throw new Error((0,l.__)("Predefined goals are a premium feature.","burst-statistics"));return[4,(0,i.ZI)(t)];case 1:return[2,e.sent()]}})})},onSuccess:function(e){p.setQueryData(["goals_data"],function(t){return t?(0,c.jM)(t,function(t){t.goals.push(e.goal)}):t}),o.oR.success((0,l.__)("Successfully added predefined goal!","burst-statistics"))},onError:function(e){console.error(e),o.oR.error(e.message||(0,l.__)("Failed to add predefined goal","burst-statistics"))}});return{goals:(null===(e=h.data)||void 0===e?void 0:e.goals)||[],goalFields:(null===(t=h.data)||void 0===t?void 0:t.goalFields)||[],predefinedGoals:(null===(r=h.data)||void 0===r?void 0:r.predefinedGoals)||[],isLoading:h.isLoading,isError:h.isError,getGoal:function(e){var t,r=(null===(t=h.data)||void 0===t?void 0:t.goals)||[];if(!Array.isArray(r))return!1;var n=r.findIndex(function(t){return t.id==e});return-1!==n&&r[n]},setGoalValue:function(e,t,r){p.setQueryData(["goals_data"],function(n){return n?(0,c.jM)(n,function(n){var a=n.goals.findIndex(function(t){return t.id===e});-1!==a&&(n.goals[a][t]=r)}):n})},updateGoal:function(e,t){p.setQueryData(["goals_data"],function(r){return r?(0,c.jM)(r,function(r){var n=r.goals.findIndex(function(t){return t.id===e});-1!==n&&(r.goals[n]=d(d({},r.goals[n]),t))}):r})},getGoalAsync:function(e){return f(void 0,void 0,void 0,function(){var t,r;return m(this,function(n){switch(n.label){case 0:return[4,p.ensureQueryData({queryKey:["goals_data"],queryFn:i.DX})];case 1:return t=n.sent(),[2,(null===(r=null==t?void 0:t.goals)||void 0===r?void 0:r.find(function(t){return String(t.id)===String(e)}))||null]}})})},saveGoals:b.mutateAsync,saveGoalTitle:function(e,t){return v.mutateAsync({id:e,value:t})},addGoal:y.mutateAsync,deleteGoal:x.mutateAsync,addPredefinedGoal:function(e){return j.mutateAsync({predefinedGoalId:e})},invalidateGoals:function(){return p.invalidateQueries(["goals_data"])}}}},65825:(e,t,r)=>{r.d(t,{A:()=>l});var n=r(91637),a=r(51609),s=r(27723),i=r(53411),o=(0,a.forwardRef)(function(e,t){var r=e.id,a=e.name,o=e.value,l=e.label,c=e.checked,u=e.disabled,d=void 0!==u&&u,f=e.onChange,m=e.className,p=void 0===m?"":m,g=e.tooltip,h=void 0===g?"":g,b=e.recommended,v=void 0!==b&&b,y=e.children;return(0,n.jsxs)("div",{className:"flex items-center gap-2 ".concat(p),children:[(0,n.jsx)("input",{ref:t,type:"radio",id:r,name:a,value:o,checked:c,disabled:d,onChange:function(e){return f(e.target.value)},className:"h-4 w-4 text-primary focus:ring-primary border-gray-300 my-1 mx-0 relative before:content-[''] before:m-0 before:absolute before:left-1/2 before:top-1/2 before:-translate-x-1/2 before:-translate-y-1/2"}),(0,n.jsxs)("label",{htmlFor:r,className:"text-sm text-gray cursor-pointer",children:[l," ",y," ",v&&(0,n.jsxs)("span",{className:"text-xs font-semibold",children:["(",(0,s.__)("Recommended","burst-statistics"),")"]})]}),h&&(0,n.jsx)(i.A,{tooltip:h,color:"blue",name:"help",size:16,className:"bg-blue-light rounded-full"})]})});o.displayName="RadioInput";const l=o},67744:(e,t,r)=>{r.d(t,{q:()=>i});var n=r(91637),a=r(51609),s=r(2573),i=(0,a.memo)(function(e){var t=e.title,r=e.controls,a=e.className,i=void 0===a?"":a;return(0,n.jsxs)("div",{className:(0,s.A)(i,"flex min-h-14 items-center justify-between px-2.5 md:px-6 md:min-h-16 gap-4"),children:[(0,n.jsx)("h2",{className:"text-lg font-semibold",children:t}),r]})});i.displayName="BlockHeading"},77902:(e,t,r)=>{r.d(t,{e:()=>i});var n=r(91637),a=r(2573),s=r(23130),i=(0,r(51609).memo)(function(e){var t=e.className,r=void 0===t?"":t,i=e.children;return(0,n.jsx)(s.A,{children:(0,n.jsx)("div",{className:(0,a.A)("col-span-12 flex flex-col rounded-xl bg-white shadow-sm relative border border-gray-300",r),children:i})})});i.displayName="Block"},78102:(e,t,r)=>{r.d(t,{A:()=>j,F:()=>x});var n=r(36095),a=r(11672),s=r(77363),i=r(51609),o=r(89717),l=r(30618),c=r(20467),u=r(88887),d=r(91788),f=r(23568),m="yyyy-MM-dd",p=["today","yesterday","last-7-days","last-30-days","last-90-days","last-month","week-to-date","month-to-date","year-to-date","last-year","custom"],g=["/statistics","/sources","/sales"],h=function(e){if(!e)return!1;var t=(0,c.A)(e);return(0,l.default)(t)&&/^\d{4}-\d{2}-\d{2}$/.test(e)},b=function(e){return!!e&&p.includes(e)},v=function(e){var t=e.range,r=e.startDate,n=e.endDate;return b(t)?"custom"!==t||h(r)&&h(n):!(!h(r)||!h(n))},y=function(e,t){var r={};return Object.keys(e).forEach(function(t){t!==f.Nb&&"startDate"!==t&&"endDate"!==t&&"range"!==t&&void 0!==e[t]&&(r[t]=e[t])}),t.range&&(r.range=t.range),t.startDate&&(r.startDate=t.startDate),t.endDate&&(r.endDate=t.endDate),r[f.Nb]="",r},x=function(){var e,t=(0,n.Z)(),r=(0,s.z)(),l=(0,i.useRef)(!1),c=(e=r.pathname,g.some(function(t){return e.startsWith(t)})),f=(0,u.S)(function(e){return e.startDate}),p=(0,u.S)(function(e){return e.endDate}),x=(0,u.S)(function(e){return e.range}),j=(0,u.S)(function(e){return e.setStartDate}),_=(0,u.S)(function(e){return e.setEndDate}),w=(0,u.S)(function(e){return e.setRange}),N=(0,a.S)({strict:!1}),k=(0,i.useMemo)(function(){if(c&&v(N)){var e=N.range,t=N.startDate,r=N.endDate;if(b(e)&&"custom"!==e){var n=function(e){if("custom"===e||!function(e){return e in d.cA}(e))return null;var t=d.cA[e].range(),r=t.startDate,n=t.endDate;return{startDate:(0,o.default)(r,m),endDate:(0,o.default)(n,m)}}(e);if(n)return{range:e,startDate:n.startDate,endDate:n.endDate}}if(h(t)&&h(r))return{range:e||"custom",startDate:t,endDate:r}}return{range:x,startDate:f,endDate:p}},[N,c,f,p,x]);(0,i.useEffect)(function(){if(c&&!l.current)if(l.current=!0,v(N)){var e=N.range,r=N.startDate,n=N.endDate;b(e)&&"custom"!==e?w(e):h(r)&&h(n)&&(j(r),_(n),w("custom"))}else if(x){var a={range:x};"custom"===x&&(a.startDate=f,a.endDate=p);var s=y(N,a);t({search:s,replace:!0})}},[c]),(0,i.useEffect)(function(){if(c&&l.current&&v(N)){var e=N.range,t=N.startDate,r=N.endDate;b(e)&&"custom"!==e?x!==e&&w(e):h(t)&&h(r)&&(f!==t&&j(t),p!==r&&_(r),"custom"!==x&&w("custom"))}},[N,c,f,p,x,j,_,w]);var C=(0,i.useCallback)(function(e,r,n){if("custom"===e&&r&&n?(j(r),_(n),w("custom")):w(e),c){var a={range:e};"custom"===e&&r&&n&&(a.startDate=r,a.endDate=n),t({search:function(e){return y(e,a)},replace:!1})}},[t,c,j,_,w]),A=(0,i.useCallback)(function(e){"custom"===e?(w("custom"),c&&t({search:function(e){return y(e,{range:"custom",startDate:f,endDate:p})},replace:!1})):C(e)},[C,w,c,t,f,p]),O=(0,i.useCallback)(function(e){C("custom",e,k.endDate)},[C,k.endDate]),S=(0,i.useCallback)(function(e){C("custom",k.startDate,e)},[C,k.startDate]);return{startDate:k.startDate,endDate:k.endDate,range:k.range,isDateRangeRoute:c,setDateRange:C,setRange:A,setStartDate:O,setEndDate:S}};const j=x},78548:(e,t,r)=>{r.d(t,{A:()=>l});var n=r(91637),a=r(51609),s=r(2573),i=r(53411),o=(0,a.forwardRef)(function(e,t){var r=e.inputId,a=e.options,o=e.value,l=e.columns,c=void 0===l?2:l,u=e.disabled,d=void 0!==u&&u,f=e.goalId,m=e.onChange,p=e.className,g=void 0===p?"":p,h=f?"".concat(f,"-").concat(r):r;return(0,n.jsx)("div",{className:(0,s.A)("burst-radio-buttons__list grid gap-4",function(e){switch(e){case 1:return"grid-cols-1";case 2:default:return"grid-cols-2";case 3:return"grid-cols-3";case 4:return"grid-cols-4"}}(c),g),ref:t,children:Object.keys(a).map(function(e){var t=a[e],r="".concat(h,"-").concat(t.type),l=t.type===o;return(0,n.jsxs)("div",{className:"w-full bg-gray-200 rounded-m",children:[(0,n.jsx)("input",{type:"radio",checked:l,name:h,id:r,value:t.type,disabled:d,onChange:function(e){m(e.target.value)},className:"sr-only opacity-0 absolute"}),(0,n.jsxs)("label",{htmlFor:r,className:(0,s.A)("flex gap-2.5 m-[1px] items-start space-x-3 p-4 rounded-lg border-2 transition-all duration-200 cursor-pointer","focus-within:ring-2 focus-within:ring-primary focus-within:ring-offset-2",{"border-primary bg-primary-light":l,"border-gray-300 hover:border-gray-400 bg-white hover:bg-gray-50":!l,"opacity-50 cursor-not-allowed":d}),children:[(0,n.jsx)("div",{className:"flex-shrink-0 mt-1",children:(0,n.jsx)("div",{className:(0,s.A)("w-4 h-4 rounded-full border-2 transition-all duration-200 flex items-center justify-center",{"border-primary bg-primary":l,"border-gray-300 bg-white":!l}),children:l&&(0,n.jsx)("div",{className:"w-2 h-2 rounded-full bg-white"})})}),(0,n.jsxs)("div",{className:"flex items-center flex-row min-w-0 gap-1",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,n.jsx)(i.A,{name:t.icon,size:18,className:"flex-shrink-0"}),(0,n.jsx)("h5",{className:(0,s.A)("text-base font-medium transition-colors text-gray-900"),children:t.label})]}),t.description&&1<t.description.length&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"w-px bg-gray-400 mx-3 h-5"}),(0,n.jsx)("p",{className:(0,s.A)("text-sm transition-colors truncate",{"text-gray-600":l,"text-gray-500":!l}),children:t.description})]})]})]})]},r)})})});o.displayName="RadioButtonsInput";const l=o},88887:(e,t,r)=>{r.d(t,{S:()=>d});var n=r(30346),a=r(14243),s=r(67201),i=r(89717),o=r(72442),l=r(67072),c=r(91788),u=function(e){if(c.cA[e]){var t=c.cA[e].range(),r=t.startDate,n=t.endDate;return{startDate:(0,i.default)(r,"yyyy-MM-dd"),endDate:(0,i.default)(n,"yyyy-MM-dd"),range:e}}return null},d=(0,n.v)((0,a.Zr)(function(e){return{startDate:(0,i.default)((0,o.default)((0,l.A)(new Date,7)),"yyyy-MM-dd"),endDate:(0,i.default)((0,s.default)((0,l.A)(new Date,1)),"yyyy-MM-dd"),range:"last-7-days",setStartDate:function(t){return e({startDate:t})},setEndDate:function(t){return e({endDate:t})},setRange:function(t){if("custom"!==t){var r=u(t);r&&e(r)}else e({range:t})}}},{name:"burst-date-storage",partialize:function(e){return{range:e.range,startDate:e.startDate,endDate:e.endDate}},onRehydrateStorage:function(){return function(e){if(e&&e.range&&"custom"!==e.range){var t=u(e.range);t&&Object.assign(e,t)}}}}))},91788:(e,t,r)=>{r.d(t,{Ad:()=>E,BM:()=>x,Ee:()=>N,Iq:()=>C,Nj:()=>b,YP:()=>M,Yo:()=>I,ZV:()=>w,cA:()=>S,cf:()=>D,fU:()=>_,fs:()=>v,gs:()=>h,ii:()=>A,kz:()=>R,oI:()=>y,qQ:()=>k,vd:()=>j,vv:()=>T});var n=r(38443),a=r(71109),s=r(18553),i=r(44184),o=r(67201),l=r(73177),c=r(52368),u=r(89717),d=r(48145),f=r(72442),m=r(6374),p=r(58357),g=r(27723),h=function(e,t){if(void 0===t&&(t=new Date),"number"==typeof e&&(e=new Date(1e3*e)),!(e instanceof Date))return"-";var r={year:31536e6,month:2628e6,day:864e5,hour:36e5,minute:6e4,second:1e3},n=new Intl.RelativeTimeFormat("en",{numeric:"auto"}),a=e-t;for(var s in r)if(Math.abs(a)>r[s]||"second"===s)return n.format(Math.round(a/r[s]),s);return"-"},b=function(e,t,r){void 0===r&&(r=!0);var n=(e=Number(e))/(t=Number(t));return isNaN(n)&&(n=0),r?new Intl.NumberFormat(void 0,{style:"percent",maximumFractionDigits:1}).format(n):n};function v(e,t){var r={},n=((e=Number(e))-(t=Number(t)))/t;return isNaN(n)&&(n=0),r.val=new Intl.NumberFormat(void 0,{style:"percent",maximumFractionDigits:1,signDisplay:"exceptZero"}).format(n),r.status=0<n?"positive":"negative",n===1/0&&(r.val="",r.status="positive"),r}function y(e,t){var r={},n=((e=Number(e))-(t=Number(t)))/100;return isNaN(n)&&(n=0),r.val=new Intl.NumberFormat(void 0,{style:"percent",maximumFractionDigits:1,signDisplay:"exceptZero"}).format(n),r.status=0<n?"positive":"negative",n===1/0&&(r.val="",r.status="positive"),r}var x=function(e){return(0,n.dateI18n)(burst_settings.date_format,new Date(1e3*e))},j=function(e){return e&&("number"==typeof e||Date.parse(e)>=16409952e5)};function _(e){void 0===e&&(e=0);var t=Number(e);isNaN(t)&&(t=0);var r=Math.floor(t/1e3),n=Math.floor(r/3600),a=Math.floor((r-3600*n)/60),s=r-3600*n-60*a,i=function(e){return isNaN(e)?"00":String(e).padStart(2,"0")};return 0===n?[a,s].map(i).join(":"):[n,a,s].map(i).join(":")}function w(e,t){return void 0===t&&(t=1),e=Number(e),isNaN(e)&&(e=0),1e3>e&&(t=0),new Intl.NumberFormat(void 0,{style:"decimal",notation:"compact",compactDisplay:"short",maximumFractionDigits:t}).format(e)}function N(e,t){return void 0===t&&(t=1),e=Number(e),isNaN(e)&&(e=0),0===e?"0%":0<e&&.1>e?"<0.1%":new Intl.NumberFormat(void 0,{style:"percent",maximumFractionDigits:t}).format(e/100)}function k(e){return e?burst_settings.countries[e.toUpperCase()]||(0,g.__)("Not set","burst-statistics"):(0,g.__)("Unknown","burst-statistics")}function C(e){return e?burst_settings.continents[e.toUpperCase()]||(0,g.__)("Not set","burst-statistics"):(0,g.__)("Unknown","burst-statistics")}function A(e){void 0===e&&(e=new Date);var t=-60*e.getTimezoneOffset(),r=Math.floor(e.getTime()/1e3)+3600*burst_settings.gmt_offset-t;return new Date(1e3*r)}var O=A(),S={today:{label:(0,g.__)("Today","burst-statistics"),range:function(){return{startDate:(0,f.default)(O),endDate:(0,o.default)(O)}}},yesterday:{label:(0,g.__)("Yesterday","burst-statistics"),range:function(){return{startDate:(0,f.default)((0,a.default)(O,-1)),endDate:(0,o.default)((0,a.default)(O,-1))}}},"last-7-days":{label:(0,g.__)("Last 7 days","burst-statistics"),range:function(){return{startDate:(0,f.default)((0,a.default)(O,-7)),endDate:(0,o.default)((0,a.default)(O,-1))}}},"last-30-days":{label:(0,g.__)("Last 30 days","burst-statistics"),range:function(){return{startDate:(0,f.default)((0,a.default)(O,-30)),endDate:(0,o.default)((0,a.default)(O,-1))}}},"last-90-days":{label:(0,g.__)("Last 90 days","burst-statistics"),range:function(){return{startDate:(0,f.default)((0,a.default)(O,-90)),endDate:(0,o.default)((0,a.default)(O,-1))}}},"last-month":{label:(0,g.__)("Last month","burst-statistics"),range:function(){return{startDate:(0,m.default)((0,s.default)(O,-1)),endDate:(0,l.default)((0,s.default)(O,-1))}}},"week-to-date":{label:(0,g.__)("Week to date","burst-statistics"),range:function(){return{startDate:(0,f.default)((0,a.default)(O,-O.getDay())),endDate:(0,o.default)(O)}}},"month-to-date":{label:(0,g.__)("Month to date","burst-statistics"),range:function(){return{startDate:(0,m.default)(O),endDate:(0,o.default)(O)}}},"year-to-date":{label:(0,g.__)("Year to date","burst-statistics"),range:function(){return{startDate:(0,p.A)(O),endDate:(0,o.default)(O)}}},"last-year":{label:(0,g.__)("Last year","burst-statistics"),range:function(){return{startDate:(0,p.A)((0,i.default)(O,-1)),endDate:(0,c.A)((0,i.default)(O,-1))}}}},D=function(e){return Object.values(e).filter(Boolean).map(function(e){var t=S[e];return t.isSelected=F,t})},M=function(e,t){var r="MMMM d, yyyy";return{startDate:e?(0,u.default)(new Date(e),r):"",endDate:t?(0,u.default)(new Date(t),r):""}};function F(e){var t=this.range();return(0,d.default)(e.startDate,t.startDate)&&(0,d.default)(e.endDate,t.endDate)}function E(e,t){if(void 0===t&&(t={}),!e||!t[e])return function(e){return w(e)};var r=t[e],n=r.isPercentage,a=r.isTime,s=r.precision,i=r.suffix;return function(e){if(null==e)return"";if(n)return N(e,s);if(a)return _(e);var t=w(e,s);return i&&(t+=i),t}}function T(e,t){return new Intl.NumberFormat(void 0,{style:"currency",currency:e,maximumFractionDigits:2,minimumFractionDigits:2,trailingZeroDisplay:"stripIfInteger"}).format(t)}function I(e,t){return new Intl.NumberFormat(void 0,{style:"currency",currency:e,notation:"compact",compactDisplay:"short",maximumFractionDigits:1}).format(t)}function R(e){if(!e)return"";try{var t=e instanceof Date?e:new Date(e);return isNaN(t.getTime())?"":new Intl.DateTimeFormat(void 0,{month:"short",day:"numeric",year:"numeric"}).format(t)}catch(e){return""}}},94304:(e,t,r)=>{r.d(t,{A:()=>d});var n=r(91637),a=r(51609),s=r.n(a),i=r(42617),o=r(2573),l=r(53411),c=function(){return c=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},c.apply(this,arguments)},u=s().forwardRef(function(e,t){var r,a=e.value,s=e.onChange,o=e.options,c=(void 0===(r=void 0===o?[]:o)&&(r=[]),Array.isArray(r)?r:Object.entries(r).map(function(e){var t=e[0],r=e[1];return{value:t,label:String(r)}}));return(0,n.jsxs)(i.bL,{value:a,onValueChange:function(e){return s(e)},children:[(0,n.jsxs)(i.l9,{ref:t,className:"inline-flex items-center justify-center gap-1 rounded bg-white text-base leading-none outline outline-gray-400 px-2 py-2 hover:bg-gray-100 focus:shadow-[0_0_0_2px]",children:[(0,n.jsx)(i.WT,{placeholder:"Select an option…"}),(0,n.jsx)(i.In,{className:"text-base",children:(0,n.jsx)(l.A,{name:"chevron-down",color:"black",size:16,tooltip:"",className:""})})]}),(0,n.jsx)(i.ZL,{container:document.getElementById("modal-root"),children:(0,n.jsxs)(i.UC,{className:"bg-gray-100 text-black border border-gray-400 rounded-md shadow-lg ring-1 ring-black/5 z-[100] shadow-gray-400/50",position:"item-aligned",children:[(0,n.jsx)(i.PP,{className:"",children:(0,n.jsx)(l.A,{name:"chevron-up",color:"black",size:16,tooltip:"",className:""})}),(0,n.jsx)(i.LM,{className:"",children:c.map(function(e){return(0,n.jsx)(f,{value:e.value,children:e.label},e.value)})}),(0,n.jsx)(i.wn,{className:"text-base",children:(0,n.jsx)(l.A,{name:"chevron-down",color:"white",size:16,tooltip:"",className:""})})]})})]})});u.displayName="SelectInput";const d=u;var f=s().forwardRef(function(e,t){var r=e.children,a=e.className,s=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r}(e,["children","className"]);return(0,n.jsxs)(i.q7,c({ref:t,className:(0,o.$)("cursor-default px-2 py-2 text-base select-none flex items-center gap-1 flex-row overflow-hidden","hover:bg-gray-300 hover:text-black","focus:bg-gray-300","transition-all duration-200",a)},s,{children:[(0,n.jsx)("div",{className:"w-4 flex items-center",children:(0,n.jsx)(i.VF,{children:(0,n.jsx)(l.A,{name:"check",color:"black",size:16,tooltip:"",className:""})})}),(0,n.jsx)(i.p4,{children:r}),(0,n.jsx)("div",{className:"w-4 flex items-center"})]}))});f.displayName="SelectItem"},94976:(e,t,r)=>{r.d(t,{A:()=>l});var n=r(91637),a=r(51609),s=r(34677),i=function(){return i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},i.apply(this,arguments)},o=(0,a.forwardRef)(function(e,t){var r=e.value,a=e.onChange,o=e.disabled,l=e.required,c=e.size,u=void 0===c?"default":c,d=e.className,f=void 0===d?"":d,m=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r}(e,["value","onChange","disabled","required","size","className"]),p="string"==typeof r?"1"===r:Boolean(r),g="small"===u?"w-8 h-5":"w-10 h-6",h="small"===u?"w-3 h-3 translate-x-1 data-[state=checked]:translate-x-4":"w-4 h-4 translate-x-1 data-[state=checked]:translate-x-5";return(0,n.jsx)("div",{className:"flex items-center",children:(0,n.jsx)(s.bL,i({ref:t,className:"".concat(g," bg-gray-400 rounded-full relative focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed data-[state=checked]:bg-primary ").concat(f),checked:p,onCheckedChange:a,disabled:o,required:l},m,{children:(0,n.jsx)(s.zi,{className:"block ".concat(h," bg-white rounded-full shadow transform transition-transform duration-200")})}))})});o.displayName="SwitchInput";const l=o},95217:(e,t,r)=>{r.d(t,{wk:()=>p,B:()=>c});var n=r(91637),a=r(53411),s=r(50616),i=r(27723);const o=function(e){var t=e.filter,r=e.onRemove,o=e.onClick,l=e.className,c=void 0===l?"":l,u=e.showRemoveButton,d=void 0===u||u,f=e.disabled,m=void 0!==f&&f,p="".concat(m?"inline-flex items-center gap-2 px-3 py-2 bg-gray-100 border border-gray-200 shadow-sm rounded-md text-sm cursor-not-allowed opacity-60":"inline-flex items-center gap-2 px-3 py-2 bg-white border border-gray-300 hover:bg-gray-200 shadow-sm rounded-md text-sm transition-all duration-200 hover:bg-gray-50 hover:[box-shadow:0_0_0_3px_rgba(0,0,0,0.05)] cursor-pointer"," ").concat(c).trim(),g=function(e){m||e.target.closest(".remove-button")||o&&o(t)};return t&&t.config?t.key?(0,n.jsxs)("div",{className:p,onClick:g,onKeyDown:function(e){m||"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),g(e))},role:"button",tabIndex:m?-1:0,"aria-label":(0,i.__)("Edit %s filter","burst-statistics").replace("%s",t.config.label),"aria-disabled":m,title:m?"":(0,i.__)("Click to edit filter","burst-statistics"),children:[(0,n.jsx)(a.A,{name:t.config.icon,size:"16"}),(0,n.jsx)("p",{className:"font-medium ".concat(m?"text-gray-800":""),children:t.config.label}),(0,n.jsx)("span",{className:"h-4 w-px ".concat(m?"bg-gray-300":"bg-gray-400")}),(0,n.jsx)("p",{className:m?"text-gray-800":"text-gray",children:(0,s.S)(t.displayValue)}),d&&r&&!m&&(0,n.jsx)("button",{onClick:function(e){m?e.stopPropagation():r&&r(t.key)},disabled:m,className:"remove-button rounded-full p-1 transition-colors ".concat(m?"cursor-not-allowed opacity-50":"hover:bg-gray-200"),"aria-label":(0,i.__)("Remove filter","burst-statistics"),title:m?"":(0,i.__)("Remove filter","burst-statistics"),children:(0,n.jsx)(a.A,{name:"times",color:m?"var(--rsp-grey-300)":"var(--rsp-grey-500)",size:"16"})})]}):null:(localStorage.removeItem("burst-filters-storage"),null)};var l=r(74020);const c=function(e){var t=e.filters,r=void 0===t?[]:t,a=e.onRemove,s=e.onClick,i=e.className,c=void 0===i?"flex flex-wrap gap-2":i,u=e.showRemoveButton,d=void 0===u||u,f=e.emptyMessage,m=void 0===f?null:f,p=(0,l.A)(function(e){return e.userCanFilter});return Array.isArray(r)&&0!==r.length||m?0===r.length&&m?(0,n.jsx)("div",{className:"text-gray-500 text-sm",children:m}):(0,n.jsx)("div",{className:c,children:r.map(function(e){return(0,n.jsx)(o,{disabled:!p,filter:e,onRemove:a,onClick:s,showRemoveButton:d},e.key)})}):null};var u=r(2573),d=function(){return d=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},d.apply(this,arguments)},f=function(e){var t=e.onClick,r=e.icon,s=e.iconSize,i=void 0===s?16:s,o=e.label,l=e.variant,c=void 0===l?"default":l,f=e.size,m=void 0===f?"md":f,p=e.disabled,g=void 0!==p&&p,h=e.className,b=void 0===h?"":h,v=e.ariaLabel,y=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r}(e,["onClick","icon","iconSize","label","variant","size","disabled","className","ariaLabel"]),x=(0,u.$)("inline-flex items-center gap-2 rounded-md transition-all duration-200 cursor-pointer","focus:outline-none focus:ring-2 focus:ring-offset-2",{"bg-transparent border border-transparent hover:bg-gray-50":"default"===c,"bg-white border border-gray-300 border-dashed shadow-sm hover:bg-gray-50 hover:[box-shadow:0_0_0_3px_rgba(0,0,0,0.05)]":"dashed"===c,"bg-gray-100 border border-gray-300 hover:bg-gray-200":"solid"===c},{"py-1 px-2 text-xs":"sm"===m,"py-2 px-3 text-sm":"md"===m,"py-3 px-4 text-base":"lg"===m},{"opacity-50 cursor-not-allowed focus:ring-0 focus:ring-offset-0":g},b),j=Object.fromEntries(Object.entries({"aria-label":v||o,"aria-disabled":!!g||void 0}).filter(function(e){return e[0],void 0!==e[1]}));return(0,n.jsxs)("button",d({type:y.type||"button",onClick:t,onKeyDown:function(e){"Enter"!==e.key&&" "!==e.key||!t||g||(e.preventDefault(),t(e)),y.onKeyDown&&y.onKeyDown(e)},className:x,disabled:g},j,y,{children:[r&&(0,n.jsx)(a.A,{name:r,size:i}),o&&(0,n.jsx)("span",{className:"font-medium text-base",children:o})]}))};f.displayName="IconButton";const m=f,p=function(e){var t=e.onClick,r=e.className,a=void 0===r?"":r,s=e.icon,o=void 0===s?"plus":s,l=e.label,c=void 0===l?(0,i.__)("Add filter","burst-statistics"):l;return(0,n.jsx)(m,{variant:"dashed",icon:o,label:c,onClick:t,className:a,ariaLabel:c})}},98371:(e,t,r)=>{r.d(t,{A:()=>i});var n=r(91637),a=r(85373),s=r(53411);const i=function(e){var t=e.title,r=e.subtitle,i=void 0===r?"":r,o=e.customHeader,l=void 0===o?null:o,c=e.content,u=e.footer,d=e.triggerClassName,f=e.children,m=e.isOpen,p=e.onClose;return(0,n.jsxs)(a.bL,{open:m,onOpenChange:function(e){e||null==p||p()},children:[d&&(0,n.jsx)(a.l9,{className:d,children:f}),(0,n.jsxs)(a.ZL,{container:document.getElementById("modal-root"),children:[(0,n.jsx)(a.hJ,{className:"bg-black/50 fixed inset-0 z-50"}),(0,n.jsxs)(a.UC,{className:"fixed top-[55px] left-1/2 -translate-x-1/2 w-[calc(100%-20px)] max-h-[90vh] m-0 px-4 py-3 rounded-md z-50 bg-gray-100 shadow-md focus:outline-none data-[state=open]:animate-contentShow flex flex-col overflow-x-visible md:w-full md:max-w-[720px] md:m-3 md:absolute md:top-0",children:[(0,n.jsx)("div",{className:"flex flex-row justify-between items-center flex-shrink-0",children:l?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"flex-1",children:l}),(0,n.jsx)(a.bm,{asChild:!0,children:(0,n.jsx)("button",{"aria-label":"Close",onClick:p,className:"bg-gray-200 rounded-full p-2 w-8 h-8 cursor-pointer hover:bg-gray-300 transition-colors duration-150 ml-4",children:(0,n.jsx)(s.A,{name:"times",size:18,color:"gray"})})})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(a.hE,{className:"text-lg font-semibold text-black",children:t}),i&&(0,n.jsx)("p",{className:"text-sm text-gray-600",children:i})]}),(0,n.jsx)(a.bm,{asChild:!0,children:(0,n.jsx)("button",{"aria-label":"Close",onClick:p,className:"bg-gray-200 rounded-full p-2 w-8 h-8 cursor-pointer hover:bg-gray-300 transition-colors duration-150",children:(0,n.jsx)(s.A,{name:"times",size:18,color:"gray"})})})]})}),(0,n.jsx)(a.VY,{className:"text-base text-black mb-6 mt-4 flex-1 overflow-y-auto overflow-x-visible min-h-0",children:c}),u&&(0,n.jsx)("div",{className:"flex flex-row justify-end gap-2 flex-shrink-0 bottom-0 bg-gray-100 pt-4 border-t border-gray-200 mx-4 px-4",children:u})]})]})]})}},98541:(e,t,r)=>{r.d(t,{A:()=>a});var n=r(91637);const a=function(e){var t=e.children,r=e.className,a=void 0===r?"":r;return(0,n.jsxs)("div",{className:"burst-upsell-overlay absolute inset-0 z-50 ".concat(a),children:[(0,n.jsx)("div",{className:"absolute inset-0 backdrop-blur-sm"}),(0,n.jsx)("div",{className:"relative flex justify-center pt-8 m-8 mt-24",children:(0,n.jsx)("div",{className:"mx-4 min-w-fit rounded-md border border-gray-300 bg-gray-100 px-8 py-12 shadow-sm",children:t})})]})}}}]);