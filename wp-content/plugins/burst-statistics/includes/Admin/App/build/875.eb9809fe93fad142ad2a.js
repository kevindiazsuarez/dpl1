"use strict";(self.webpackChunk_burst_statistics_burst_statistics=self.webpackChunk_burst_statistics_burst_statistics||[]).push([[875],{8353:(e,t,r)=>{r.d(t,{A:()=>h});var n=r(91637),s=r(51609),a=r.n(s),i=r(88432),o=r(61445),l=r(39988),c=r(88887),u=r(28786),d=r(53411),f=r(27723),p=r(21587),b=r(91788),g=r(86274),m=function(e,t,r){if(r||2===arguments.length)for(var n,s=0,a=t.length;s<a;s++)!n&&s in t||(n||(n=Array.prototype.slice.call(t,0,s)),n[s]=t[s]);return e.concat(n||Array.prototype.slice.call(t))};const h=a().memo(function(e){var t=e.filter,r=e.filterValue,a=e.label,h=e.children,v=e.startDate,y=e.endDate,x=e.row,_=(0,i.R7)(),j=_.setFilters,w=_.filtersConf,N=_.getActiveFilters,k=(0,o.A)().getGoal,C=(0,l.G)(function(e){return e.setMetrics}),A=(0,l.G)(function(e){return e.getMetrics()}),O=(0,c.S)(function(e){return e.setStartDate}),S=(0,c.S)(function(e){return e.setEndDate}),D=(0,c.S)(function(e){return e.setRange}),E=(0,(0,g.A)().getValue)("filtering_by_domain"),F=(0,s.useMemo)(function(){return t&&w&&Object.prototype.hasOwnProperty.call(w,t)},[t,w]),I=(0,s.useMemo)(function(){if(!r)return!1;if(["page_url","referrer"].includes(t))return!0;try{return/^https?:\/\/.+/i.test(r)}catch(e){return!1}},[t,r]),P=(0,s.useCallback)(function(e){var n;e.stopPropagation();var s=r;if("page_url"===t&&!r.startsWith("http")){var a=(null===(n=window.burst_admin)||void 0===n?void 0:n.site_url)||window.location.origin;if(E){var i=N(),o=-1!==a.indexOf("https:")?"https://":"http://";Object.prototype.hasOwnProperty.call(x,"host")?a="".concat(o).concat(x.host):Object.prototype.hasOwnProperty.call(i,"host")&&(a="".concat(o).concat(i.host))}s="".concat(a).concat(r.startsWith("/")?"":"/").concat(r)}"referrer"!==t||r.startsWith("http")||(s="https://".concat(r)),window.open(s,"_blank","noopener,noreferrer")},[t,r]),R=(0,s.useMemo)(function(){return a?"".concat((0,f.__)("Click to filter by:","burst-statistics")," ").concat(a):(0,f.__)("Click to filter","burst-statistics")},[a]),M=(0,s.useMemo)(function(){return(0,f.__)("Open in new tab","burst-statistics")},[]),L=(0,s.useCallback)(function(){if(v){var e="",t="";if(/^\d+$/.test(v)){var r=10===v.toString().length?1e3*v:v;e=new Date(r).toISOString().split("T")[0]}else/\d{4}-\d{2}-\d{2}/.test(v)&&(e=v);y?/^\d+$/.test(y)?(r=10===y.toString().length?1e3*y:y,t=new Date(r).toISOString().split("T")[0]):/\d{4}-\d{2}-\d{2}/.test(y)&&(t=y):t=(new Date).toISOString().split("T")[0],(0,b.vd)(e)&&(0,b.vd)(t)&&(O(e),S(t),D("custom"))}},[v,y,O,S,D]),T=(0,s.useCallback)(function(e){var t=k(e);(null==t?void 0:t.goal_specific_page)?(j("page_url",t.goal_specific_page),j("goal_id",e),p.oR.info((0,f.__)("Filtering by goal & goal specific page","burst-statistics"))):(j("goal_id",e),p.oR.info((0,f.__)("Filtering by goal","burst-statistics"))),A.includes("conversions")||C(m(m([],A,!0),["conversions"],!1))},[k,j,A,C]),V=(0,s.useCallback)(function(e){e.stopPropagation(),F?("goal_id"===t?T(r):j(t,r),L()):console.warn('ClickToFilter: Invalid filter "'.concat(t,'" - not found in filter configuration'))},[t,r,F,T,j,L]);return t&&r&&F?(0,n.jsxs)("div",{className:"group flex items-center gap-2",children:[(0,n.jsx)("div",{className:"flex-1",children:h}),(0,n.jsxs)("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:[(0,n.jsx)(u.A,{content:R,children:(0,n.jsx)("div",{onClick:V,className:"flex items-center justify-center w-6 h-6 bg-white/90 hover:bg-white border border-gray-200 rounded shadow-sm hover:shadow-md transition-all duration-150 cursor-pointer",children:(0,n.jsx)(d.A,{name:"filter",size:14,color:"black"})})}),I&&(0,n.jsx)(u.A,{content:M,children:(0,n.jsx)("div",{onClick:P,className:"flex items-center justify-center w-6 h-6 bg-white/90 hover:bg-white border border-gray-200 rounded shadow-sm hover:shadow-md transition-all duration-150 cursor-pointer",children:(0,n.jsx)(d.A,{name:"referrers",size:14,color:"black"})})})]})]}):(0,n.jsx)(n.Fragment,{children:h})})},10371:(e,t,r)=>{r.d(t,{A:()=>o});var n=r(91637),s=r(51609),a=function(){return a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},a.apply(this,arguments)},i=(0,s.forwardRef)(function(e,t){var r=e.type,s=void 0===r?"text":r,i=e.className,o=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}(e,["type","className"]);return(0,n.jsx)("input",a({ref:t,type:s,className:"w-full rounded-md border border-gray-400 p-2 focus:border-primary-dark focus:outline-none focus:ring disabled:cursor-not-allowed disabled:border-gray-200 disabled:bg-gray-200 ".concat(i||"")},o))});i.displayName="TextInput";const o=i},11989:(e,t,r)=>{r.d(t,{t:()=>o});var n=r(91637),s=r(51609),a=r(2573),i=function(e){void 0===e&&(e="");var t=/\bp-\S+/.test(e),r=/\bpx-\S+/.test(e),n=/\bpy-\S+/.test(e),s=/\bpt-\S+/.test(e),a=/\bpr-\S+/.test(e),i=/\bpb-\S+/.test(e),o=/\bpl-\S+/.test(e),l=[];return t||r||l.push("px-2.5","md:px-6"),t||n||l.push("py-6"),t||r||o||l.push("pl-2.5","md:pl-6"),t||r||a||l.push("pr-2.5","md:pr-6"),t||n||s||l.push("pt-6"),t||n||i||l.push("pb-6"),l.join(" ")},o=(0,s.memo)(function(e){var t=e.children,r=e.className,s=void 0===r?"":r;return(0,n.jsx)("div",{className:(0,a.A)("flex-grow",i(s),s),children:t})});o.displayName="BlockContent"},23875:(e,t,r)=>{r.r(t),r.d(t,{component:()=>W});var n=r(91637),s=r(25323),a=r(27723),i=r(77902),o=r(67744),l=r(11989),c=r(39988),u=r(41631);const d=function(e){var t=e.selectedMetrics,r=e.filters,s=(0,c.G)(function(e){return e.setMetrics}),i={pageviews:{label:(0,a.__)("Pageviews","burst-statistics"),default:!0},visitors:{label:(0,a.__)("Visitors","burst-statistics"),default:!0},sessions:{label:(0,a.__)("Sessions","burst-statistics")},bounces:{label:(0,a.__)("Bounces","burst-statistics")},conversions:{label:(0,a.__)("Conversions","burst-statistics"),default:0<r.goal_id}};return(0,n.jsx)(u.A,{selectedOptions:t,options:i,onApply:function(e){s(e)}})};var f=r(51609),p=r(39887),b=r(49457);p.t1.register(p.PP,p.kc,p.FN,p.No,p.hE,p.m_,p.s$);const g=function(e){var t=e.data,r=(0,f.useMemo)(function(){return{responsive:"true",maintainAspectRatio:!1,cubicInterpolationMode:"monotone",plugins:{legend:{labels:{usePointStyle:!0,padding:15,font:{size:13,weight:400}}}},scales:{y:{ticks:{beginAtZero:!0,stepSize:20,maxTicksLimit:6}},x:{ticks:{maxTicksLimit:8}}},layout:{padding:0}}},[]);return(0,n.jsx)(b.N1,{options:r,data:t})};var m=r(88887),h=r(61626),v=r(3663);const y=function(e){return t=void 0,r=[e],s=function(e){var t=e.startDate,r=e.endDate,n=e.range,s=e.args;return function(e,t){var r,n,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(a=0)),a;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((s=(s=a.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1],s=o;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(o);break}s[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}(this,function(e){switch(e.label){case 0:return[4,(0,v.bQ)("insights",t,r,n,s)];case 1:return[2,e.sent().data]}})},new((n=void 0)||(n=Promise))(function(e,a){function i(e){try{l(s.next(e))}catch(e){a(e)}}function o(e){try{l(s.throw(e))}catch(e){a(e)}}function l(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n(function(e){e(r)})).then(i,o)}l((s=s.apply(t,r||[])).next())});var t,r,n,s};var x=r(88432);const _=function(){var e=(0,c.G)(function(e){return e.getMetrics()}),t=(0,m.S)(function(e){return e}),r=t.startDate,s=t.endDate,u=t.range,f=(0,x.R7)().filters,p={filters:f,metrics:e},b=(0,h.I)({queryKey:["insights",e,r,s,p],queryFn:function(){return y({startDate:r,endDate:s,range:u,args:p})},placeholderData:{labels:["-","-","-","-","-","-","-"],datasets:[{data:[0,0,0,0,0,0,0],backgroundColor:"rgba(41, 182, 246, 0.2)",borderColor:"rgba(41, 182, 246, 1)",label:"-",fill:"false"},{data:[0,0,0,0,0,0,0],backgroundColor:"rgba(244, 191, 62, 0.2)",borderColor:"rgba(244, 191, 62, 1)",label:"-",fill:"false"}]}}),v=b.isLoading||b.isFetching;return(0,n.jsxs)(i.e,{className:"row-span-1 lg:col-span-12 xl:col-span-6 min-h-96 group/root",children:[(0,n.jsx)(o.q,{title:(0,a.__)("Insights","burst-statistics"),className:"border-b border-gray-200",controls:(0,n.jsx)(d,{selectedMetrics:e,filters:f})}),(0,n.jsx)(l.t,{children:b.data&&g&&(0,n.jsx)(g,{loading:v,data:b.data})})]})};var j=r(52698),w=r(20467),N=r(97884);const k=function(e){var t=e.noCompare,r=e.startDate,s=e.endDate,i="";if(t)i=(0,a.__)("No data available for comparison","burst-statistics");else{var o=(0,w.A)(r),l=(0,w.A)(s),c=(0,N.default)(l,o)+1;i=(1===c?(0,a.__)("vs. previous day","burst-statistics"):(0,a.__)("vs. previous %s days","burst-statistics")).replace("%s",c)}return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("p",{className:"text-sm font-medium leading-[1.5] text-gray",children:i})})};var C=r(91788),A=function(){return A=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},A.apply(this,arguments)},O={pageviews:(0,a.__)("Pageviews","burst-statistics"),sessions:(0,a.__)("Sessions","burst-statistics"),visitors:(0,a.__)("Visitors","burst-statistics"),bounce_rate:(0,a.__)("Bounce Rate","burst-statistics")},S={conversions:(0,a.__)("Conversions","burst-statistics"),pageviews:(0,a.__)("Pageviews","burst-statistics"),sessions:(0,a.__)("Sessions","burst-statistics"),visitors:(0,a.__)("Visitors","burst-statistics")},D={default:{pageviews:function(e){return{title:(0,a.__)("Pageviews","burst-statistics"),subtitle:(0,a.__)("%s pageviews per session","burst-statistics").replace("%s",(0,C.ZV)(e.pageviews/e.sessions)),value:(0,C.ZV)(e.pageviews),exactValue:e.pageviews}},sessions:function(e){return{title:(0,a.__)("Sessions","burst-statistics"),subtitle:(0,a.__)("%s per session","burst-statistics").replace("%s",(0,C.fU)(e.pageviews/e.sessions*e.avg_time_on_page)),value:(0,C.ZV)(e.sessions),exactValue:e.sessions}},visitors:function(e){return{title:(0,a.__)("Visitors","burst-statistics"),subtitle:(0,a.__)("%s are new visitors","burst-statistics").replace("%s",(0,C.Nj)(e.first_time_visitors,e.visitors)),value:(0,C.ZV)(e.visitors),exactValue:e.visitors}},bounce_rate:function(e){return{title:(0,a.__)("Bounce Rate","burst-statistics"),subtitle:(0,a.__)("%s visitors bounced","burst-statistics").replace("%s",e.bounced_sessions),value:(0,C.ZV)(e.bounce_rate)+"%",exactValue:e.bounce_rate}}},goalSelected:{conversions:function(e){return{title:(0,a.__)("Conversions","burst-statistics"),subtitle:(0,a.__)("%s of pageviews converted","burst-statistics").replace("%s",(0,C.Nj)(e.conversion_rate,100)),value:(0,C.ZV)(e.conversions),exactValue:e.conversions}},pageviews:function(e){return{title:(0,a.__)("Pageviews","burst-statistics"),subtitle:(0,a.__)("%s pageviews per conversion","burst-statistics").replace("%s",(0,C.ZV)(e.pageviews/e.conversions)),value:(0,C.ZV)(e.pageviews),exactValue:e.pageviews}},sessions:function(e){return{title:(0,a.__)("Sessions","burst-statistics"),subtitle:(0,a.__)("%s sessions per conversion","burst-statistics").replace("%s",(0,C.ZV)(e.sessions/e.conversions)),value:(0,C.ZV)(e.sessions),exactValue:e.sessions}},visitors:function(e){return{title:(0,a.__)("Visitors","burst-statistics"),subtitle:(0,a.__)("%s visitors per conversion","burst-statistics").replace("%s",(0,C.ZV)(e.visitors/e.conversions)),value:(0,C.ZV)(e.visitors),exactValue:e.visitors}}}},E=function(e){var t={},r=e.current,n=e.previous,s="default",a=O;"goals"===e.view&&(s="goalSelected",a=S);var i=D[s];return Object.entries(a).forEach(function(e){var s=e[0],a=i[s]||D.default[s],o={};"bounce_rate"===s?(o=(0,C.oI)(r[s],n[s])).status="positive"===o.status?"negative":"positive":o=(0,C.fs)(r[s],n[s]),t[s]=A(A({},a(r,n)),{change:o.val,changeStatus:o.status})}),t};const F=function(e){return t=void 0,r=[e],s=function(e){var t,r=e.startDate,n=e.endDate,s=e.range,a=e.args;return function(e,t){var r,n,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(a=0)),a;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((s=(s=a.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1],s=o;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(o);break}s[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}(this,function(e){switch(e.label){case 0:return[4,(0,v.bQ)("compare",r,n,s,a)];case 1:return t=e.sent().data,[2,E(t)]}})},new((n=void 0)||(n=Promise))(function(e,a){function i(e){try{l(s.next(e))}catch(e){a(e)}}function o(e){try{l(s.throw(e))}catch(e){a(e)}}function l(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n(function(e){e(r)})).then(i,o)}l((s=s.apply(t,r||[])).next())});var t,r,n,s};var I=r(27257);const P=function(){var e=(0,m.S)(function(e){return e}),t=e.startDate,r=e.endDate,s=e.range,c={filters:(0,x.R7)().filters},u={pageviews:(0,a.__)("Pageviews","burst-statistics"),sessions:(0,a.__)("Sessions","burst-statistics"),visitors:(0,a.__)("Visitors","burst-statistics"),bounce_rate:(0,a.__)("Bounce Rate","burst-statistics")},d={};Object.keys(u).forEach(function(e){d[e]={title:u[e],subtitle:"-",value:"-",exactValue:"-",change:"-",changeStatus:""}});var f=(0,h.I)({queryKey:["compare",t,r,c],queryFn:function(){return F({startDate:t,endDate:r,range:s,args:c})},placeholderData:d}).data||{},p=!Object.keys(f).some(function(e){return""!==f[e].change});return(0,n.jsxs)(i.e,{className:"row-span-1 lg:col-span-6 xl:col-span-3",children:[(0,n.jsx)(o.q,{title:(0,a.__)("Compare","burst-statistics")}),(0,n.jsx)(l.t,{children:Object.keys(f).map(function(e,t){var r=f[e];return(0,n.jsx)(j.A,{iconKey:e,title:r.title,subtitle:r.subtitle,value:r.value,exactValue:r.exactValue,change:r.change,changeStatus:r.changeStatus},t)})}),(0,n.jsx)(I.p,{children:(0,n.jsx)(k,{noCompare:p,startDate:t,endDate:r})})]})};var R=r(8353),M=function(e,t,r,n){return new(r||(r=Promise))(function(s,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})},L=function(e,t){var r,n,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(a=0)),a;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((s=(s=a.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1],s=o;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(o);break}s[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},T={desktop:(0,a.__)("Desktop","burst-statistics"),tablet:(0,a.__)("Tablet","burst-statistics"),mobile:(0,a.__)("Mobile","burst-statistics"),other:(0,a.__)("Other","burst-statistics")},V=function(e){for(var t,r={},n=0,s=Object.entries(T);n<s.length;n++){var a=s[n],i=a[0],o=a[1];Object.assign(r,((t={})[i]={title:o,value:(0,C.Nj)(e[i].count,e.all.count)},t))}return r},z=function(e){for(var t,r={},n=0,s=Object.entries(T);n<s.length;n++){var a=s[n][0],i=e[a].os?e[a].os:"",o=e[a].browser?e[a].browser:"";Object.assign(r,((t={})[a]={device_id:e[a].device_id,subtitle:""===i&&""===o?"-":i+" / "+o},t))}return r},B=function(){return B=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},B.apply(this,arguments)},G=(0,f.memo)(function(e){var t=e.deviceKey,r=e.deviceData;return(0,n.jsx)(R.A,{filter:"device_id",filterValue:null==r?void 0:r.device_id,label:r.title,children:(0,n.jsx)(j.A,{iconKey:t,title:r.title,subtitle:r.subtitle,value:r.value,change:r.change,changeStatus:r.changeStatus})},t)});G.displayName="DeviceItem";const U=(0,f.memo)(function(){var e=(0,m.S)(function(e){return e}),t=e.startDate,r=e.endDate,s=e.range,c=(0,x.R7)().filters,u=(0,f.useMemo)(function(){return{filters:c}},[c]),d=(0,f.useMemo)(function(){return{desktop:(0,a.__)("Desktop","burst-statistics"),tablet:(0,a.__)("Tablet","burst-statistics"),mobile:(0,a.__)("Mobile","burst-statistics"),other:(0,a.__)("Other","burst-statistics")}},[]),p=(0,f.useMemo)(function(){var e={},t={},r={};return Object.keys(d).forEach(function(n){e[n]={title:d[n],value:"-%"},t[n]={subtitle:"-"},r[n]={title:d[n],value:"-%",subtitle:"-"}}),{emptyDataTitleValue:e,emptyDataSubtitle:t,placeholderData:r}},[d]),b=p.emptyDataTitleValue,g=p.emptyDataSubtitle,y=p.placeholderData,_=(0,h.I)({queryKey:["devicesTitleAndValue",t,r,u],queryFn:function(){return function(e){return M(void 0,[e],void 0,function(e){var t,r=e.startDate,n=e.endDate,s=e.range,a=e.args;return L(this,function(e){switch(e.label){case 0:return[4,(0,v.bQ)("devicesTitleAndValue",r,n,s,a)];case 1:return t=e.sent().data,[2,V(t)]}})})}({startDate:t,endDate:r,range:s,args:u})},placeholderData:b}),j=(0,h.I)({queryKey:["devicesSubtitle",t,r,u],queryFn:function(){return function(e){return M(void 0,[e],void 0,function(e){var t,r=e.startDate,n=e.endDate,s=e.range,a=e.args;return L(this,function(e){switch(e.label){case 0:return[4,(0,v.bQ)("devicesSubtitle",r,n,s,a)];case 1:return t=e.sent().data,[2,z(t)]}})})}({startDate:t,endDate:r,range:s,args:u})},placeholderData:g}),w=(0,f.useMemo)(function(){if(_.data&&j.data){var e=B({},_.data);return Object.keys(e).forEach(function(t){j.data[t]&&(e[t]=B(B({},e[t]),j.data[t]))}),e}return y},[_.data,j.data,y]),N=(0,f.useMemo)(function(){return Object.keys(w)},[w]);return(0,n.jsxs)(i.e,{className:"row-span-1 lg:col-span-6 xl:col-span-3",children:[(0,n.jsx)(o.q,{title:(0,a.__)("Devices","burst-statistics")}),(0,n.jsx)(l.t,{children:N.map(function(e){return(0,n.jsx)(G,{deviceKey:e,deviceData:w[e]},e)})})]})});var K=r(34342),q=r(23130),Z=r(84400);function W(){var e=(0,Z.A)().isPro?["parameters"]:["referrers"];return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.z,{}),(0,n.jsx)(q.A,{children:(0,n.jsx)(_,{})}),(0,n.jsx)(q.A,{children:(0,n.jsx)(P,{})}),(0,n.jsx)(q.A,{children:(0,n.jsx)(U,{})}),(0,n.jsx)(q.A,{children:(0,n.jsx)(K.A,{allowedConfigs:["pages"],id:"1"})}),(0,n.jsx)(q.A,{children:(0,n.jsx)(K.A,{allowedConfigs:e,id:"2"})})]})}r(89211)},24454:(e,t,r)=>{r.d(t,{A:()=>u});var n=r(91637),s=r(51609),a=r(29436),i=r(66087),o=function(){return o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},o.apply(this,arguments)},l=function(e,t,r){if(r||2===arguments.length)for(var n,s=0,a=t.length;s<a;s++)!n&&s in t||(n||(n=Array.prototype.slice.call(t,0,s)),n[s]=t[s]);return e.concat(n||Array.prototype.slice.call(t))},c=(0,s.forwardRef)(function(e,t){var r=e.value,c=e.onChange,u=e.loadOptions,d=e.defaultOptions,f=void 0===d?[]:d,p=e.isLoading,b=void 0!==p&&p,g=e.isSearchable,m=void 0===g||g,h=e.name,v=e.disabled,y=void 0!==v&&v,x=e.placeholder,_=void 0===x?"Select an option...":x,j=e.insideModal,w=void 0!==j&&j,N=e.maxSelections,k=void 0===N?1:N,C=e.showRemoveButton,A=void 0===C||C,O=e.allowCustomValue,S=void 0===O||O,D=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}(e,["value","onChange","loadOptions","defaultOptions","isLoading","isSearchable","name","disabled","placeholder","insideModal","maxSelections","showRemoveButton","allowCustomValue"]),E=(0,s.useState)([]),F=E[0],I=E[1],P=(0,s.useState)(""),R=P[0],M=P[1],L=(0,s.useState)(b),T=L[0],V=L[1];(0,s.useEffect)(function(){V(b)},[b]);var z=(0,s.useMemo)(function(){return(0,i.debounce)(function(e){u&&(V(!0),u(e,function(e){I(e),V(!1)}))},150)},[u]);(0,s.useEffect)(function(){return function(){z.cancel()}},[z]),(0,s.useEffect)(function(){Array.isArray(f)?I(f):!0===f&&u&&(V(!0),u("",function(e){I(e),V(!1)}))},[f,u]);var B=function(){if(!r)return[];if(Array.isArray(r))return r.map(function(e){return"object"==typeof e&&Object.prototype.hasOwnProperty.call(e,"value")&&Object.prototype.hasOwnProperty.call(e,"label")?e:F.find(function(t){return t.value===e})||{value:e,label:e.toString()}});if("object"==typeof r&&Object.prototype.hasOwnProperty.call(r,"value")&&Object.prototype.hasOwnProperty.call(r,"label"))return[r];var e=F.find(function(e){return e.value===r});return e?[e]:[{value:r,label:r.toString()}]}(),G=F.filter(function(e){return!B.some(function(t){return t.value===e.value})}),U=S&&""!==R.trim()&&(0===F.length||!F.some(function(e){var t;return(null!==(t=e.label)&&void 0!==t?t:"").toLowerCase()===R.toLowerCase()})&&!B.some(function(e){var t;return(null!==(t=e.label)&&void 0!==t?t:"").toLowerCase()===R.toLowerCase()}));U&&(G=l([{value:R.trim(),label:R.trim(),isCustom:!0}],G,!0));var K=(0,a.mH)({selectedItems:B,onStateChange:function(e){var t=e.selectedItems;switch(e.type){case a.mH.stateChangeTypes.SelectedItemKeyDownBackspace:case a.mH.stateChangeTypes.SelectedItemKeyDownDelete:case a.mH.stateChangeTypes.DropdownKeyDownBackspace:case a.mH.stateChangeTypes.FunctionRemoveSelectedItem:t&&c(1===k?0<t.length?t[0]:null:t)}}}),q=K.getSelectedItemProps,Z=K.getDropdownProps,W=(0,a.Bp)({items:G,selectedItem:null,inputValue:R,stateReducer:function(e,t){var r=t.changes;switch(t.type){case a.Bp.stateChangeTypes.InputKeyDownEnter:case a.Bp.stateChangeTypes.ItemClick:return o(o({},r),{isOpen:1<k,highlightedIndex:0,inputValue:""});default:return r}},onStateChange:function(e){var t=e.type,r=e.selectedItem,n=e.inputValue;switch(t){case a.Bp.stateChangeTypes.InputKeyDownEnter:case a.Bp.stateChangeTypes.ItemClick:if(r)if(1===k)c(r),M("");else if(B.length<k){var s=l(l([],B,!0),[r],!1);c(s),M("")}break;case a.Bp.stateChangeTypes.InputChange:M(n||""),u&&m&&z(n||"")}},itemToString:function(e){return e?e.label:""}}),Q=W.isOpen,H=W.getToggleButtonProps,Y=W.getInputProps,$=W.getMenuProps,X=W.getItemProps,J=W.highlightedIndex,ee=W.getComboboxProps,te=function(e){var t=B.filter(function(t){return t.value!==e.value});c(1===k?0<t.length?t[0]:null:t)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",o({},ee(),{className:"flex min-h-[2.5rem] w-full rounded-md border border-gray-400 bg-white focus-within:border-primary-dark focus-within:ring disabled:cursor-not-allowed disabled:border-gray-200 disabled:bg-gray-200",children:[(0,n.jsxs)("div",{className:"flex flex-1 flex-wrap items-center gap-1 p-1",children:[B.map(function(e,t){return(0,n.jsxs)("span",o({},q({selectedItem:e,index:t}),{className:"inline-flex items-center gap-1 rounded bg-primary-light px-2 py-1 text-xs text-primary-dark focus:bg-primary focus:text-white focus:outline-none",children:[e.label,A&&(0,n.jsx)("button",{type:"button",onClick:function(t){t.stopPropagation(),te(e)},className:"ml-1 rounded-full hover:bg-primary hover:text-white focus:bg-primary focus:text-white focus:outline-none","aria-label":"Remove ".concat(e.label),children:(0,n.jsx)("svg",{className:"h-3 w-3",fill:"currentColor",viewBox:"0 0 20 20",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),"selected-item-".concat(t))}),(1===k||B.length<k)&&(0,n.jsx)("input",o({},Y(Z(o(o(o({preventKeyAction:Q},t?{ref:t}:{}),{name:h,disabled:y,placeholder:0===B.length?_:1<k?"Add ".concat(k-B.length," more..."):"",readOnly:!m,onKeyDown:function(e){if("Backspace"===e.key&&""===R&&0<B.length){e.preventDefault();var t=B[B.length-1];te(t)}}}),D))),{className:"flex-1 min-w-[120px] border-none bg-transparent p-1 focus:outline-none disabled:cursor-not-allowed",style:{outline:"none"}}))]}),(0,n.jsxs)("div",{className:"flex items-center border-l border-gray-300",children:[0<k&&(0,n.jsxs)("span",{className:"px-2 text-xs text-gray-500 border-r border-gray-200",children:[B.length,"/",k]}),(0,n.jsx)("button",o({type:"button"},H({disabled:y}),{className:"flex items-center justify-center bg-transparent px-2 py-2 hover:bg-gray-100 focus:border-primary-dark focus:outline-none disabled:cursor-not-allowed disabled:bg-gray-200","aria-label":"Toggle menu",children:T?(0,n.jsx)("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-gray-300 border-t-primary"}):(0,n.jsx)("svg",{className:"h-4 w-4 transition-transform ".concat(Q?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})}))]})]})),(0,n.jsx)("div",o({},$(),{className:"w-full ".concat(w?"fixed":""," ").concat(Q?"":"hidden"),children:(0,n.jsxs)("ul",{className:"relative top-0 z-[9999] max-h-60 overflow-y-auto w-full rounded-md border border-gray-300 bg-white shadow-lg ".concat(Q&&G.length?"":"hidden"),children:[G.map(function(e,t){return(0,n.jsx)("li",o({},X({item:e,index:t}),{className:"cursor-pointer px-3 py-2 text-sm first:rounded-t-md last:rounded-b-md ".concat(J===t?"bg-primary-light text-primary-dark":"hover:bg-gray-100"),children:e.isCustom?(0,n.jsxs)("span",{className:"flex items-center gap-2",children:[(0,n.jsx)("svg",{className:"h-4 w-4 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),'Create "',e.label,'"']}):e.label}),e.value)}),0===G.length&&!T&&(0,n.jsx)("li",{className:"px-3 py-2 text-sm text-gray-500",children:B.length>=k?"Maximum ".concat(k," selection").concat(1<k?"s":""," reached"):"No options found"})]})}))]})});c.displayName="AsyncSelectInput";const u=c},25323:(e,t,r)=>{r.d(t,{z:()=>B});var n=r(91637),s=r(51956),a=r(48677),i=r(86087),o=r(27723),l=r(30533),c=r(71882),u=r(77363),d=r(3663),f=r(21587),p=r(84400),b=r(78102),g=r(88432),m=r(95217),h=r(98371),v=r(94304),y=r(50552),x=r(53411),_=r(97813),j=r(23568),w=r(91788),N=r(74020),k=function(){return k=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},k.apply(this,arguments)},C=function(e,t,r,n){return new(r||(r=Promise))(function(s,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})},A=function(e,t){var r,n,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(a=0)),a;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((s=(s=a.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1],s=o;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(o);break}s[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},O=function(e,t,r){if(r||2===arguments.length)for(var n,s=0,a=t.length;s<a;s++)!n&&s in t||(n||(n=Array.prototype.slice.call(t,0,s)),n[s]=t[s]);return e.concat(n||Array.prototype.slice.call(t))},S=[{value:"24h",label:(0,o.__)("24 hours","burst-statistics")},{value:"7d",label:(0,o.__)("7 days","burst-statistics")},{value:"30d",label:(0,o.__)("30 days","burst-statistics")},{value:"never",label:(0,o.__)("Never","burst-statistics")}],D={can_change_date:!1,can_filter:!1},E={can_change_date:(0,o.__)("Change date range","burst-statistics"),can_filter:(0,o.__)("Change filters","burst-statistics")},F=function(e){var t=(Array.isArray(burst_settings.menu)?burst_settings.menu:Object.values(burst_settings.menu||{})).find(function(t){return t.id===e});return(null==t?void 0:t.title)||e},I=function(e){return C(void 0,void 0,void 0,function(){var t,r;return A(this,function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),navigator.clipboard&&navigator.clipboard.writeText?[4,navigator.clipboard.writeText(e)]:[3,2];case 1:return n.sent(),[2];case 2:return[3,4];case 3:return t=n.sent(),console.warn("Clipboard API failed, trying fallback",t),[3,4];case 4:return(r=document.createElement("textarea")).value=e,r.style.position="fixed",r.style.left="-999999px",document.body.appendChild(r),r.select(),r.focus(),document.execCommand("copy"),document.body.removeChild(r),[2]}})})},P=function(e){if(0===e)return(0,o.__)("Never expires","burst-statistics");var t=e-Date.now()/1e3;if(0>t)return(0,o.__)("Expired","burst-statistics");var r=Math.floor(t/86400),n=Math.floor(t%86400/3600);return 0<r?1===r?(0,o.__)("Expires in 1 day","burst-statistics"):
// translators: %d is the number of days.
// translators: %d is the number of days.
(0,o.__)("Expires in ".concat(r," days"),"burst-statistics"):0<n?1===n?(0,o.__)("Expires in 1 hour","burst-statistics"):
// translators: %d is the number of hours.
// translators: %d is the number of hours.
(0,o.__)("Expires in ".concat(n," hours"),"burst-statistics"):(0,o.__)("Expires soon","burst-statistics")},R=function(e){var t=e.currentTab,r=e.startDate,s=e.endDate,a=e.filters,l=(0,i.useMemo)(function(){return Object.entries(a||{}).filter(function(e){var t=e[1];return t&&""!==t}).map(function(e){var t,r=e[0],n=e[1];return{key:r,label:(null===(t=j.OF[r])||void 0===t?void 0:t.label)||r,value:n}})},[a]),c=r&&s,u=0<l.length;return(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("h4",{className:"text-md font-medium text-black",children:(0,o.__)("What you're sharing:","burst-statistics")}),(0,n.jsxs)("dl",{className:"grid grid-cols-[auto_1fr] gap-x-3 gap-y-1 text-sm",children:[(0,n.jsx)("dt",{className:"font-base text-gray",children:(0,o.__)("Initial tab:","burst-statistics")}),(0,n.jsx)("dd",{className:"font-medium text-black",children:F(t)}),c&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("dt",{className:"font-base text-gray",children:(0,o.__)("Date range:","burst-statistics")}),(0,n.jsxs)("dd",{className:"font-medium text-black",children:[(0,w.kz)(r)," – ",(0,w.kz)(s)]})]}),u&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("dt",{className:"font-base text-gray",children:(0,o.sprintf)((0,o._n)("Filter:","Filters:",l.length,"burst-statistics"))}),(0,n.jsx)("dd",{className:"font-medium text-black",children:l.map(function(e,t){return 0===t?(0,n.jsx)("span",{children:(0,i.createInterpolateElement)((0,o.sprintf)(/* translators: 1: filter label, 2: filter value */ /* translators: 1: filter label, 2: filter value */
(0,o.__)("%1$s is %2$s","burst-statistics"),"<strong>"+e.label+"</strong>","<em>"+e.value+"</em>"),{strong:(0,n.jsx)("span",{className:"font-medium text-black"}),em:(0,n.jsx)("span",{className:"font-light text-gray"})})},e.key):(0,n.jsx)("span",{children:(0,i.createInterpolateElement)((0,o.sprintf)(/* translators: 1: filter label, 2: filter value */ /* translators: 1: filter label, 2: filter value */
(0,o.__)(" and %1$s is %2$s","burst-statistics"),"<strong>"+e.label+"</strong>","<em>"+e.value+"</em>"),{strong:(0,n.jsx)("span",{className:"font-medium text-black"}),em:(0,n.jsx)("span",{className:"font-light text-gray"})})},e.key)})})]})]})]})},M=function(e){var t=e.isOpen,r=e.onToggle,s=e.permissions,a=e.onPermissionToggle,i=e.sharedTabs,u=e.onTabToggle,d=e.shareableTabs,f=e.currentTab;return(0,n.jsxs)("div",{className:"border-t border-gray-200 -mx-4 px-4 pt-3",children:[(0,n.jsxs)("button",{type:"button",onClick:r,className:"flex w-full items-center gap-2 text-left text-sm font-medium text-gray-600 hover:text-gray-800 transition-colors",children:[(0,n.jsx)(x.A,{name:"chevron-right",size:14,className:"text-gray-700 transition-transform duration-200 ".concat(t?"rotate-90":"")}),(0,n.jsx)("span",{children:(0,o.__)("Advanced options","burst-statistics")})]}),(0,n.jsx)(l.N,{children:t&&(0,n.jsx)(c.P.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden",children:(0,n.jsxs)("div",{className:"space-y-4 pt-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("span",{className:"text-sm text-gray-600",children:(0,o.__)("Allow viewer to:","burst-statistics")}),(0,n.jsx)("div",{className:"flex flex-wrap gap-x-6 gap-y-2",children:Object.entries(E).map(function(e){var t=e[0],r=e[1];return(0,n.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer text-sm",children:[(0,n.jsx)("input",{type:"checkbox",checked:s[t]||!1,onChange:function(){return a(t)},className:"rounded border-gray-400 text-wp-blue focus:ring-wp-blue cursor-pointer"}),(0,n.jsx)("span",{className:"text-gray",children:r})]},t)})})]}),1<d.length&&(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("span",{className:"text-sm text-gray-600",children:(0,o.__)("Allow access to these tabs:","burst-statistics")}),(0,n.jsx)("div",{className:"flex flex-wrap gap-x-6 gap-y-2",children:d.map(function(e){var t=e.id===f,r=i.includes(e.id);return(0,n.jsxs)("label",{className:"flex items-center gap-2 text-sm ".concat(t?"cursor-default":"cursor-pointer"),children:[(0,n.jsx)("input",{type:"checkbox",checked:r,onChange:function(){return u(e.id)},disabled:t,className:"rounded border-gray-400 text-wp-blue focus:ring-wp-blue cursor-pointer disabled:cursor-default disabled:opacity-60"}),(0,n.jsxs)("span",{className:t?"text-gray-500":"text-gray",children:[e.title,t&&(0,n.jsxs)("span",{className:"ml-1 text-xs text-gray-400",children:["(",(0,o.__)("current view","burst-statistics"),")"]})]})]},e.id)})})]})]})})})]})},L=function(e){var t=e.link,r=e.copiedId,s=e.onCopy,a=e.onRevoke,l=e.isRevoking,u=r===t.token,d=(0,i.useMemo)(function(){return t.shared_tabs&&0!==t.shared_tabs.length?t.shared_tabs.map(function(e){return F(e)}):[]},[t.shared_tabs]),f=(0,i.useMemo)(function(){var e,r,n=null==t?void 0:t.initial_state;return(null===(e=null==n?void 0:n.date_range)||void 0===e?void 0:e.start)&&(null===(r=null==n?void 0:n.date_range)||void 0===r?void 0:r.end)?"".concat((0,w.kz)(n.date_range.start)," – ").concat((0,w.kz)(n.date_range.end)):null},[t]),p=(0,i.useMemo)(function(){var e=null==t?void 0:t.initial_state;return(null==e?void 0:e.filters)?Object.entries(e.filters).filter(function(e){var t=e[1];return t&&""!==t}).map(function(e){var t,r=e[0],n=e[1];return{key:r,label:(null===(t=j.OF[r])||void 0===t?void 0:t.label)||r,value:n}}):[]},[t]),b=(0,i.useMemo)(function(){return(e=t.permissions)?Object.entries(e).filter(function(e){return e[1]}).map(function(e){var t=e[0];return E[t]}).filter(Boolean):[];var e},[t.permissions]);return(0,n.jsx)(c.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"rounded-md border p-3 ".concat(u?"border-green bg-green-50":"border-gray-200 bg-white"," transition-colors duration-200"),children:(0,n.jsxs)("div",{className:"flex gap-2 mb-2 flex-col",children:[(0,n.jsxs)("div",{className:"flex flex-row gap-1.5",children:[(0,n.jsx)("span",{className:"text-base font-medium text-gray-700",children:new Intl.ListFormat(void 0,{style:"long"}).format(d)}),f&&(0,n.jsxs)("span",{className:"inline-flex items-center gap-1 text-xs font-light text-gray-800",children:[(0,n.jsx)(x.A,{name:"calendar",size:10}),f]}),(0,n.jsx)("span",{className:"ml-auto text-xs text-gray-600",children:P(t.expires)})]}),(0,n.jsxs)("div",{className:"flex gap-1.5",children:[(0,n.jsx)("input",{type:"text",readOnly:!0,title:t.url,value:t.url,onClick:function(e){return e.target.select()},className:"max-w-full truncate text-sm text-gray-800 font-mono w-full bg-gray-50 px-2 py-1.5 rounded border border-gray-300 cursor-text focus:border-wp-blue focus:ring-1 focus:ring-wp-blue/20"}),(0,n.jsx)(_.A,{content:u?(0,o.__)("Copied!","burst-statistics"):(0,o.__)("Copy link","burst-statistics"),children:(0,n.jsx)("button",{onClick:function(){return s(t)},className:"rounded p-1 text-gray-400 transition-colors hover:bg-gray-200 hover:text-gray-600",children:u?(0,n.jsx)(x.A,{name:"check",size:14,color:"green"}):(0,n.jsx)(x.A,{name:"copy",size:14})})}),(0,n.jsx)(_.A,{content:(0,o.__)("Revoke","burst-statistics"),children:(0,n.jsx)("button",{onClick:function(){return a(t.token)},disabled:l,className:"rounded p-1 text-gray-400 transition-colors hover:bg-red-50 hover:text-red disabled:opacity-50",children:(0,n.jsx)(x.A,{name:"times",size:14})})})]}),0<p.length||0<b.length&&(0,n.jsxs)("div",{className:"flex flex-wrap items-center gap-1.5",children:[p.map(function(e){return(0,n.jsx)(_.A,{content:"".concat(e.label,": ").concat(e.value),children:(0,n.jsxs)("span",{className:"inline-flex items-center gap-1 rounded bg-gray-100 border border-gray-300 px-1.5 py-0.5 text-xs font-light text-gray-800",children:[(0,n.jsx)(x.A,{name:"filter",size:10}),e.label]})},e.key)}),b.map(function(e){return(0,n.jsxs)("span",{className:"inline-flex items-center gap-1 rounded bg-gray-100 border border-gray-300 px-1.5 py-0.5 text-xs font-light text-gray-800",children:[(0,n.jsx)(x.A,{name:"check",size:10}),e]},e)})]})]})})},T=function(e){var t=e.isOpen,r=e.onToggle,s=e.links,a=e.isLoading,i=e.copiedId,u=e.onCopy,d=e.onRevoke,f=e.isRevoking,p=s.length;return a||0!==p?(0,n.jsxs)("div",{className:"border-t border-gray-200 pt-4 mt-4",children:[(0,n.jsxs)("button",{type:"button",onClick:r,className:"flex w-full items-center gap-2 text-left text-sm font-medium text-gray-600 hover:text-gray-800 transition-colors",children:[(0,n.jsx)(x.A,{name:"chevron-right",size:14,className:"text-gray-600 transition-transform duration-200 ".concat(t?"rotate-90":"")}),(0,n.jsxs)("span",{children:[(0,o.__)("Active shared links","burst-statistics"),!a&&0<p&&(0,n.jsxs)("span",{className:"ml-1.5 text-gray-500",children:["(",p,")"]})]})]}),(0,n.jsx)(l.N,{children:t&&(0,n.jsx)(c.P.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden",children:(0,n.jsx)("div",{className:"pt-3 space-y-2",children:a?(0,n.jsx)("p",{className:"text-sm text-gray-500 py-2",children:(0,o.__)("Loading…","burst-statistics")}):(0,n.jsx)(l.N,{children:s.map(function(e){return(0,n.jsx)(L,{link:e,copiedId:i,onCopy:u,onRevoke:d,isRevoking:f},e.token)})})})})})]}):null},V=function(){var e=(0,p.A)().isLicenseValidFor,t=(0,u.z)(),r=(0,b.A)(),s=r.startDate,a=r.endDate,l=(0,g.R7)().filters,c=(0,i.useMemo)(function(){return t.pathname.replace(/^\//,"").split("/")[0]||"dashboard"},[t.pathname]),x=(0,i.useMemo)(function(){return(Array.isArray(burst_settings.menu)?burst_settings.menu:Object.values(burst_settings.menu||{})).filter(function(e){return e.shareable}).map(function(e){return{id:e.id,title:e.title}})},[]),_=(0,i.useState)(!1),j=_[0],w=_[1],E=(0,i.useState)("7d"),F=E[0],P=E[1],L=(0,i.useState)(D),V=L[0],z=L[1],B=(0,i.useState)(!1),G=B[0],U=B[1],K=(0,i.useState)(!1),q=K[0],Z=K[1],W=(0,i.useState)([]),Q=W[0],H=W[1];(0,i.useEffect)(function(){if(j){var e=x.map(function(e){return e.id});e.includes(c)?H([c]):0<e.length&&H([e[0]])}},[j,c,x]);var Y=(0,i.useState)([]),$=Y[0],X=Y[1],J=(0,i.useState)(!1),ee=J[0],te=J[1],re=(0,i.useState)(!1),ne=re[0],se=re[1],ae=(0,i.useState)(!1),ie=ae[0],oe=ae[1],le=(0,i.useState)(null),ce=le[0],ue=le[1],de=(0,N.A)(function(e){return e.isShareableLinkViewer}),fe=(0,i.useCallback)(function(e){z(function(t){var r;return k(k({},t),((r={})[e]=!t[e],r))})},[]),pe=(0,i.useCallback)(function(e){e!==c&&H(function(t){return t.includes(e)?t.filter(function(t){return t!==e}):O(O([],t,!0),[e],!1)})},[c]),be=(0,i.useCallback)(function(){return C(void 0,void 0,void 0,function(){var e,t;return A(this,function(r){switch(r.label){case 0:te(!0),r.label=1;case 1:return r.trys.push([1,3,4,5]),[4,(0,d.Eo)("get_share_links")];case 2:return e=r.sent(),X(e.share_links||[]),[3,5];case 3:return t=r.sent(),console.error("Failed to fetch share links:",t),[3,5];case 4:return te(!1),[7];case 5:return[2]}})})},[]);(0,i.useEffect)(function(){j&&be()},[j,be]);var ge=(0,i.useCallback)(function(){w(!1),ue(null),U(!1),Z(!1),z(D)},[]),me=(0,i.useCallback)(function(){return C(void 0,void 0,void 0,function(){var e,t,r,n,i,c;return A(this,function(u){switch(u.label){case 0:se(!0),u.label=1;case 1:return u.trys.push([1,5,6,7]),e=window.location.href,t=e.replace(/wp-admin\/admin\.php\?page=burst/,"burst-dashboard"),r={date_range:{start:s||"",end:a||""},filters:{}},l&&Object.entries(l).forEach(function(e){var t=e[0],n=e[1];n&&""!==n&&(r.filters[t]=n)}),[4,(0,d.Eo)("get_share_token",{expiration:F,view_url:t,permissions:V,shared_tabs:Q,initial_state:r})];case 2:return(n=u.sent()).share_token&&n.share_url?(i=n.share_url,[4,I(i)]):(f.oR.error((0,o.__)("Failed to generate share link","burst-statistics")),[2]);case 3:return u.sent(),[4,be()];case 4:return u.sent(),Z(!0),ue(n.share_token),f.oR.success((0,o.__)("Link created and copied to clipboard!","burst-statistics")),setTimeout(function(){return ue(null)},3e3),[3,7];case 5:return c=u.sent(),console.error("Failed to generate share link:",c),f.oR.error((0,o.__)("Failed to generate share link","burst-statistics")),[3,7];case 6:return se(!1),[7];case 7:return[2]}})})},[F,V,Q,s,a,l,be]),he=(0,i.useCallback)(function(e){return C(void 0,void 0,void 0,function(){var t;return A(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,I(e.url)];case 1:return r.sent(),ue(e.token),f.oR.success((0,o.__)("Link copied!","burst-statistics")),setTimeout(function(){return ue(null)},2e3),[3,3];case 2:return t=r.sent(),console.error("Failed to copy link:",t),f.oR.error((0,o.__)("Failed to copy link","burst-statistics")),[3,3];case 3:return[2]}})})},[]),ve=(0,i.useCallback)(function(e){return C(void 0,void 0,void 0,function(){var t,r;return A(this,function(n){switch(n.label){case 0:oe(!0),n.label=1;case 1:return n.trys.push([1,3,4,5]),[4,(0,d.Eo)("revoke_share_link",{token:e})];case 2:return(t=n.sent()).success&&(X(t.share_links||[]),f.oR.success((0,o.__)("Link revoked","burst-statistics"))),[3,5];case 3:return r=n.sent(),console.error("Failed to revoke link:",r),f.oR.error((0,o.__)("Failed to revoke link","burst-statistics")),[3,5];case 4:return oe(!1),[7];case 5:return[2]}})})},[]);return de?null:e("share-link")?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(m.wk,{label:"",icon:"referrer",onClick:function(){return w(!0)}}),(0,n.jsx)(h.A,{isOpen:j,onClose:ge,title:(0,o.__)("Share dashboard","burst-statistics"),content:(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)("p",{className:"text-gray text-sm",children:(0,o.__)("Generate a private, shareable link to a live view of this dashboard.","burst-statistics")}),(0,n.jsxs)("div",{className:"rounded-lg border border-gray-200 bg-white p-4 space-y-4",children:[(0,n.jsx)(R,{currentTab:c,startDate:s,endDate:a,filters:l}),(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("span",{className:"text-base font-medium text-gray-800",children:(0,o.__)("Link expires in:","burst-statistics")}),(0,n.jsx)(v.A,{value:F,onChange:P,options:S})]}),(0,n.jsx)(M,{isOpen:G,onToggle:function(){return U(function(e){return!e})},permissions:V,onPermissionToggle:fe,sharedTabs:Q,onTabToggle:pe,shareableTabs:x,currentTab:c}),(0,n.jsx)(y.A,{onClick:me,disabled:ne,btnVariant:"primary",className:"w-full justify-center",children:ne?(0,o.__)("Generating…","burst-statistics"):(0,o.__)("Generate shareable link","burst-statistics")})]}),(0,n.jsx)(T,{isOpen:q,onToggle:function(){return Z(function(e){return!e})},links:$,isLoading:ee,copiedId:ce,onCopy:he,onRevoke:ve,isRevoking:ie})]})})]}):null},z=r(23130),B=function(){return(0,n.jsxs)("div",{className:"col-span-12 flex justify-between items-center flex-wrap gap-y-2",children:[(0,n.jsx)(z.A,{children:(0,n.jsx)(s.y,{})}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(z.A,{children:(0,n.jsx)(a.A,{})}),(0,n.jsx)(z.A,{children:(0,n.jsx)(V,{})})]})]})}},27257:(e,t,r)=>{r.d(t,{p:()=>i});var n=r(91637),s=r(51609),a=r(2573),i=(0,s.memo)(function(e){var t=e.children,r=e.className,s=void 0===r?"":r;return(0,n.jsx)("div",{className:(0,a.A)(s,"flex items-center justify-between px-2.5 py-3 md:px-6"),children:t})});i.displayName="BlockFooter"},28786:(e,t,r)=>{r.d(t,{A:()=>i});var n=r(91637),s=r(9564),a=r(27723);const i=function(e){var t=e.content,r=e.side,i=void 0===r?"top":r,o=e.hasArrow,l=void 0===o||o,c=e.delayDuration,u=void 0===c?300:c,d=e.children;return(0,n.jsx)(s.Kq,{delayDuration:u,children:(0,n.jsxs)(s.bL,{children:[(0,n.jsx)(s.l9,{"aria-label":(0,a.__)("Help information","burst-statistics"),onClick:function(e){e.preventDefault(),e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},children:d}),(0,n.jsxs)(s.UC,{side:i,sideOffset:5,className:"z-[99999] max-w-xs bg-gray-200 text-gray border border-gray-300 px-2 py-1.5 text-base rounded shadow-md\n            animate-in fade-in-50 data-[state=closed]:animate-out data-[state=closed]:fade-out-0\n            data-[state=delayed-open]:data-[side=top]:slide-in-from-bottom-2\n            data-[state=delayed-open]:data-[side=bottom]:slide-in-from-top-2\n            data-[state=delayed-open]:data-[side=left]:slide-in-from-right-2\n            data-[state=delayed-open]:data-[side=right]:slide-in-from-left-2",onClick:function(e){return e.stopPropagation()},children:["string"==typeof t?(0,a.__)(t,"burst-statistics"):t,l&&(0,n.jsx)(s.i3,{className:"fill-gray-300",width:10,height:5})]})]})})}},34342:(e,t,r)=>{r.d(t,{A:()=>ue});var n=r(91637),s=r(27723),a=r(51609),i=r(41631),o=r(53411);const l=function(e){var t=e.value,r=void 0===t?"":t,i=e.onChange,l=e.placeholder,c=void 0===l?(0,s.__)("Search","burst-statistics"):l,u=e.className,d=void 0===u?"":u,f=(0,a.useState)(!1),p=f[0],b=f[1],g=(0,a.useRef)(null),m=(0,a.useCallback)(function(){b(function(e){var t=!e;return t?setTimeout(function(){var e;null===(e=g.current)||void 0===e||e.focus()},0):null==i||i(""),t})},[i]),h=(0,a.useCallback)(function(){""===r.trim()&&b(!1)},[r]),v=(0,a.useCallback)(function(e){null==i||i(e.target.value)},[i]),y=(0,a.useCallback)(function(){var e;null==i||i(""),null===(e=g.current)||void 0===e||e.focus()},[i]),x=p||""!==r.trim();return(0,n.jsx)("div",{className:"relative ".concat(d),children:x?(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("input",{ref:g,className:"bg-white border border-gray-300 rounded-full px-2.5 py-1 pr-10 min-w-48 transition-all duration-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 focus:outline-none focus:shadow-sm",type:"text",placeholder:c,value:r,onChange:v,onBlur:h,onKeyDown:function(e){"Escape"===e.key&&(null==i||i(""),b(!1))}}),r&&(0,n.jsx)("button",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors duration-200",onClick:y,onMouseDown:function(e){return e.preventDefault()},tabIndex:-1,"aria-label":(0,s.__)("Clear search","burst-statistics"),children:(0,n.jsx)(o.A,{name:"times",size:16})})]}):(0,n.jsx)("div",{className:"bg-gray-100 border border-gray-400 focus:ring-blue-500 cursor-pointer rounded-full p-2.5 transition-all duration-200 hover:bg-gray-400 hover:shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2 opacity-30 group-hover/root:opacity-100",onClick:m,onKeyDown:function(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),m())},tabIndex:0,role:"button","aria-label":c,children:(0,n.jsx)(o.A,{name:"search"})})})};var c=r(42617),u=r(65162);const d=function(e){var t=e.children,r=e.className,i=e.title,l=e.subtitle,c=e.bulletPoints,d=void 0===c?[]:c,f=e.primaryButtonUrl,p=e.secondaryButtonUrl,b=(0,a.useState)(!1),g=b[0],m=b[1];return(0,n.jsxs)(u.bL,{open:g,onOpenChange:m,children:[(0,n.jsx)(u.l9,{className:"cursor-pointer ".concat(r),onMouseEnter:function(){return m(!0)},children:t}),(0,n.jsx)(u.ZL,{children:(0,n.jsxs)(u.UC,{className:"z-[9999] min-w-[320px] max-w-[400px] rounded-lg border border-gray-200 bg-white p-0 shadow-xl",align:"start",sideOffset:10,arrowPadding:10,children:[(0,n.jsx)(u.i3,{className:"fill-white drop-shadow-sm"}),(0,n.jsxs)("div",{className:"relative border-b border-gray-100 px-6 py-4",children:[(0,n.jsx)(u.bm,{className:"absolute right-3 top-3 rounded-full p-1 transition-colors hover:bg-gray-100",children:(0,n.jsx)(o.A,{name:"times",size:16})}),(0,n.jsx)("h5",{className:"mb-1 pr-8 text-lg font-semibold text-black",children:i}),(0,n.jsx)("h6",{className:"m-0 text-sm text-gray",children:l})]}),(0,n.jsxs)("div",{className:"px-6 py-4",children:[(0,n.jsx)("p",{className:"mb-3 text-xs font-medium uppercase tracking-wide text-gray",children:(0,s.__)("Pro features include:","burst-statistics")}),(0,n.jsx)("div",{className:"space-y-2",children:d.map(function(e){var t=e.text,r=e.icon;return(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("div",{className:"flex h-5 w-5 flex-shrink-0 items-center justify-center",children:(0,n.jsx)(o.A,{name:r,size:16,color:"#2B8133"})}),(0,n.jsx)("p",{className:"m-0 text-sm text-gray",children:t})]},t)})})]}),(0,n.jsxs)("div",{className:"flex flex-col gap-2 rounded-b-lg border-t border-gray-100 bg-gray-50 px-6 py-4",children:[(0,n.jsx)("a",{href:f,target:"_blank",rel:"noopener noreferrer",className:"w-full rounded bg-primary px-4 py-1 text-center text-base font-normal text-white no-underline transition-all duration-200 hover:bg-primary hover:[box-shadow:0_0_0_3px_rgba(43,129,51,0.5)]",children:(0,s.__)("Upgrade to Pro","burst-statistics")}),(0,n.jsx)("a",{href:p,target:"_blank",rel:"noopener noreferrer",className:"w-full rounded border border-gray-400 bg-gray-100 px-4 py-1 text-center text-base font-normal text-gray no-underline transition-all duration-200 hover:bg-gray-200 hover:text-gray hover:[box-shadow:0_0_0_3px_rgba(0,0,0,0.1)]",children:(0,s.__)("Learn More","burst-statistics")})]})]})})]})};var f=r(84400);const p=(0,a.memo)(function(e){var t=e.value,r=e.onChange,s=e.options,i=(0,a.useCallback)(function(e){r(e)},[r]),l=(0,f.A)(),u=l.isLicenseValid,p=l.isPro,b=p&&u,g=(0,a.useMemo)(function(){return{hasProOptions:s.some(function(e){return e.pro}),firstOption:s[0]}},[s]),m=g.hasProOptions,h=g.firstOption;return m&&!b&&(null==h?void 0:h.upsellPopover)?(0,n.jsxs)(d,{title:h.upsellPopover.title,subtitle:h.upsellPopover.subtitle,bulletPoints:h.upsellPopover.bulletPoints,primaryButtonUrl:h.upsellPopover.primaryButtonUrl,secondaryButtonUrl:h.upsellPopover.secondaryButtonUrl,children:[(0,n.jsx)("h3",{className:"flex items-center gap-s burst-h4",children:h.label}),(0,n.jsx)(o.A,{name:"chevron-down"})]}):1===s.length?(0,n.jsx)("span",{className:"text-lg font-semibold",children:s[0].label}):(0,n.jsxs)(c.bL,{value:t,onValueChange:i,children:[(0,n.jsxs)(c.l9,{className:"inline-flex items-center justify-between cursor-pointer py-2 px-0 all-[unset]",children:[(0,n.jsx)(c.WT,{placeholder:"Select an option…"}),(0,n.jsx)(c.In,{className:"ml-2",children:(0,n.jsx)(o.A,{name:"chevron-down"})})]}),(0,n.jsx)(c.UC,{className:"bg-gray-100\n          z-[99]\n          border border-gray-400\n          rounded\n          flex flex-col flex-wrap\n          gap-4\n          left-0 right-0\n          shadow-[hsl(206_22%_7%_/_35%)_0px_10px_38px_-10px,hsl(206_22%_7%_/_20%)_0px_10px_20px_-15px]\n          [animation-duration:600ms]\n          [animation-timing-function:cubic-bezier(0.16,1,0.3,1)]\n          [will-change:transform,opacity]\n          data-[state=open]:animate-slideDownAndFade",position:"popper",alignOffset:-10,children:(0,n.jsx)(c.LM,{children:s.map(function(e){return(0,n.jsx)(c.q7,{value:e.key,className:"min-w-[min(100vw,150px)]\n                cursor-pointer\n                text-black\n                text-md\n                px-3 py-2.5\n                rounded\n                flex items-center\n                data-[disabled]:text-gray\n                data-[disabled]:bg-gray-100\n                data-[disabled]:cursor-not-allowed\n                data-[highlighted]:text-black\n                data-[highlighted]:outline-none\n                data-[highlighted]:bg-brand-lightest\n                data-[state=selected]:text-gray\n                data-[state=selected]:outline-none",disabled:e.pro&&!p,children:(0,n.jsx)(c.p4,{children:e.label})},e.key)})})})]})});var b=r(30346),g=r(14243),m=function(){return m=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},m.apply(this,arguments)},h=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r},v=(0,b.v)()((0,g.Zr)(function(e,t){return{selectedConfigs:{},columns:{},sortConfigs:{},getSelectedConfig:function(e,r){return t().selectedConfigs[e]||r},setSelectedConfig:function(t,r){e(function(e){var n;return{selectedConfigs:m(m({},e.selectedConfigs),(n={},n[t]=r,n))}})},getColumns:function(e,r){return t().columns[e]||r},setColumns:function(t,r){e(function(e){var n;return{columns:m(m({},e.columns),(n={},n[t]=r,n))}})},getSortConfig:function(e,r){return t().sortConfigs[e]||r},setSortConfig:function(t,r){e(function(e){var n;return{sortConfigs:m(m({},e.sortConfigs),(n={},n[t]=r,n))}})},clearSortConfig:function(t){e(function(e){var r=e.sortConfigs,n=t;return r[n],{sortConfigs:h(r,["symbol"==typeof n?n:n+""])}})}}},{name:"burst-datatable-storage",partialize:function(e){return{selectedConfigs:e.selectedConfigs,columns:e.columns,sortConfigs:e.sortConfigs}}})),y=function(e,t,r){if(r||2===arguments.length)for(var n,s=0,a=t.length;s<a;s++)!n&&s in t||(n||(n=Array.prototype.slice.call(t,0,s)),n[s]=t[s]);return e.concat(n||Array.prototype.slice.call(t))},x=function(e){var t=e.index,r=e.isLast,s="".concat(100*t,"ms"),a=["70%","85%","60%","90%","75%","80%","65%","88%","72%","78%"],i=a[t%a.length];return(0,n.jsxs)("div",{className:"flex items-center gap-4 px-6 max-xl:px-2.5 ".concat(r?"":"border-b border-gray-100"),style:{height:"".concat(48,"px")},children:[(0,n.jsx)("div",{className:"h-4 bg-gray-200 rounded animate-pulseSlow flex-1 max-w-[280px]",style:{animationDelay:s,width:i}}),(0,n.jsx)("div",{className:"h-4 bg-gray-200 rounded animate-pulseSlow w-16 ml-auto",style:{animationDelay:"".concat(100*t+50,"ms")}})]})},_=function(){return(0,n.jsxs)("div",{className:"flex items-center gap-4 px-6 max-xl:px-2.5 border-b border-gray-200 bg-gray-50",style:{height:"".concat(52,"px")},children:[(0,n.jsx)("div",{className:"flex items-center gap-2 flex-1",children:(0,n.jsx)("span",{className:"text-sm font-semibold text-gray-400 select-none animate-pulseSlow",style:{filter:"blur(4px)"},children:(0,s.__)("Page URL","burst-statistics")})}),(0,n.jsx)("div",{className:"flex items-center gap-2 ml-auto",children:(0,n.jsx)("span",{className:"text-sm font-semibold text-gray-400 select-none animate-pulseSlow",style:{filter:"blur(4px)"},children:(0,s.__)("Pageviews","burst-statistics")})})]})},j=function(){return(0,n.jsxs)("div",{className:"flex items-center justify-end gap-4 px-6 max-xl:px-2.5 border-t border-gray-200 bg-white",style:{height:"".concat(56,"px")},children:[(0,n.jsx)("div",{className:"flex items-center gap-2",children:(0,n.jsx)("div",{className:"h-8 w-16 bg-gray-100 rounded border border-gray-200 animate-pulseSlow",style:{animationDelay:"200ms"}})}),(0,n.jsxs)("span",{className:"text-sm text-gray-400 select-none animate-pulseSlow",style:{filter:"blur(3px)",animationDelay:"100ms"},children:["1-10 ",(0,s.__)("of","burst-statistics")," 100"]}),(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)("div",{className:"w-8 h-8 bg-gray-100 rounded border border-gray-200 animate-pulseSlow flex items-center justify-center",style:{animationDelay:"150ms"},children:(0,n.jsx)("svg",{className:"w-4 h-4 text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"})})}),(0,n.jsx)("div",{className:"w-8 h-8 bg-gray-100 rounded border border-gray-200 animate-pulseSlow flex items-center justify-center",style:{animationDelay:"200ms"},children:(0,n.jsx)("svg",{className:"w-4 h-4 text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,n.jsx)("div",{className:"w-8 h-8 bg-gray-100 rounded border border-gray-200 animate-pulseSlow flex items-center justify-center",style:{animationDelay:"250ms"},children:(0,n.jsx)("svg",{className:"w-4 h-4 text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),(0,n.jsx)("div",{className:"w-8 h-8 bg-gray-100 rounded border border-gray-200 animate-pulseSlow flex items-center justify-center",style:{animationDelay:"300ms"},children:(0,n.jsx)("svg",{className:"w-4 h-4 text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 5l7 7-7 7M5 5l7 7-7 7"})})})]})]})},w=function(){return(0,n.jsxs)("div",{className:"w-full",style:{minHeight:"".concat(588,"px")},children:[(0,n.jsx)(_,{}),(0,n.jsx)("div",{children:y([],Array(10),!0).map(function(e,t){return(0,n.jsx)(x,{index:t,isLast:9===t},t)})}),(0,n.jsx)(j,{})]})},N=function(){return(0,n.jsxs)("div",{className:"flex items-center justify-end gap-4 px-6 max-xl:px-2.5 border-t border-gray-200 bg-white opacity-40",style:{height:"".concat(56,"px")},children:[(0,n.jsx)("div",{className:"flex items-center gap-2",children:(0,n.jsx)("div",{className:"h-8 w-16 bg-gray-100 rounded border border-gray-200"})}),(0,n.jsxs)("span",{className:"text-sm text-gray-400 select-none",children:["0-0 ",(0,s.__)("of","burst-statistics")," 0"]}),(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)("div",{className:"w-8 h-8 bg-gray-100 rounded border border-gray-200 flex items-center justify-center",children:(0,n.jsx)("svg",{className:"w-4 h-4 text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"})})}),(0,n.jsx)("div",{className:"w-8 h-8 bg-gray-100 rounded border border-gray-200 flex items-center justify-center",children:(0,n.jsx)("svg",{className:"w-4 h-4 text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,n.jsx)("div",{className:"w-8 h-8 bg-gray-100 rounded border border-gray-200 flex items-center justify-center",children:(0,n.jsx)("svg",{className:"w-4 h-4 text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),(0,n.jsx)("div",{className:"w-8 h-8 bg-gray-100 rounded border border-gray-200 flex items-center justify-center",children:(0,n.jsx)("svg",{className:"w-4 h-4 text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 5l7 7-7 7M5 5l7 7-7 7"})})})]})]})},k=function(){return(0,n.jsxs)("div",{className:"w-full flex flex-col",style:{minHeight:"".concat(588,"px")},children:[(0,n.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center text-center",children:[(0,n.jsx)("div",{className:"mb-4",children:(0,n.jsx)("svg",{className:"w-16 h-16 text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1,children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,n.jsx)("h3",{className:"text-base font-medium text-gray-600 mb-1",children:(0,s.__)("No data to display","burst-statistics")}),(0,n.jsx)("p",{className:"text-sm text-gray-400 max-w-xs",children:(0,s.__)("There is no data available for the selected filters and date range.","burst-statistics")})]}),(0,n.jsx)(N,{})]})},C=function(e){var t=e.error;return(0,n.jsxs)("div",{className:"w-full flex flex-col",style:{minHeight:"".concat(588,"px")},children:[(0,n.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center text-center",children:[(0,n.jsx)("div",{className:"mb-4",children:(0,n.jsx)("svg",{className:"w-16 h-16 text-red-light",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1,children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),(0,n.jsx)("h3",{className:"text-base font-medium text-gray-600 mb-1",children:(0,s.__)("Something went wrong","burst-statistics")}),(0,n.jsx)("p",{className:"text-sm text-gray-400 max-w-xs",children:(null==t?void 0:t.message)||(0,s.__)("An unexpected error occurred while loading data.","burst-statistics")})]}),(0,n.jsx)(N,{})]})};const A=(0,a.memo)(function(e){var t=e.isLoading,r=e.error,s=e.noData;return t?(0,n.jsx)(w,{}):r?(0,n.jsx)(C,{error:r}):s?(0,n.jsx)(k,{}):(0,n.jsx)(C,{error:null})});var O,S=r(99696),D=r(88887),E=r(88432),F=r(61626),I=r(3663),P=r(91788),R=r(42552),M=r(8353),L=r(50616),T=r(28786),V=function(){return V=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},V.apply(this,arguments)},z=function(e,t,r){if(r||2===arguments.length)for(var n,s=0,a=t.length;s<a;s++)!n&&s in t||(n||(n=Array.prototype.slice.call(t,0,s)),n[s]=t[s]);return e.concat(n||Array.prototype.slice.call(t))},B={PERCENTAGE:"percentage",TIME:"time",COUNTRY:"country",CONTINENT:"continent",URL:"url",TEXT:"text",INTEGER:"integer",REFERRER:"referrer",FLOAT:"float",CURRENCY:"currency"},G=(0,a.memo)(M.A),U=(0,a.memo)(function(e){var t=e.value;return(0,n.jsx)(G,{filter:"country_code",filterValue:t,children:(0,n.jsx)(R.A,{country:t,countryNiceName:(0,P.qQ)(t)})})});U.displayName="CountryFilter";var K=(0,a.memo)(function(e){var t=e.value;return(0,n.jsx)(G,{filter:"continent_code",filterValue:t,children:(0,n.jsx)(n.Fragment,{children:(0,P.Iq)(t)})})});K.displayName="ContinentFilter";var q=(0,a.memo)(function(e){var t=e.value,r=e.row;return(0,n.jsx)(G,{filter:"page_url",filterValue:t,row:r,children:(0,L.S)(t)})});q.displayName="UrlFilter";var Z=(0,a.memo)(function(e){var t=e.filter,r=e.value;return(0,n.jsx)(G,{filter:t,filterValue:r,children:r})});Z.displayName="TextFilter";var W=(0,a.memo)(function(e){var t=e.value;return(0,n.jsx)(G,{filter:"referrer",filterValue:t,children:(0,L.S)(t)})});W.displayName="ReferrerFilter";var Q=(0,a.memo)(function(e){var t=e.value,r=(null==t?void 0:t.value)||0;if(!t||!(null==t?void 0:t.currency)||isNaN(r))return"";var s=(0,P.Yo)(t.currency,r),a=!1;return 1e3<r&&(a=(0,P.vv)(t.currency,r)),a?(0,n.jsx)(T.A,{content:a,delayDuration:1e3,children:s}):s});Q.displayName="CurrencyValue";var H=((O={})[B.PERCENTAGE]=function(e){return(0,P.Ee)(e)},O[B.TIME]=function(e){return(0,P.fU)(e)},O[B.INTEGER]=function(e){return parseInt(e,10)},O[B.COUNTRY]=function(e){return e&&""!==e?(0,n.jsx)(U,{value:e}):(0,s.__)("Not set","burst-statistics")},O[B.CONTINENT]=function(e){return(0,n.jsx)(K,{value:e})},O[B.URL]=function(e,t,r){return(0,n.jsx)(q,{filter:t,value:e,row:r})},O[B.TEXT]=function(e,t){return(0,n.jsx)(Z,{filter:t,value:e})},O[B.REFERRER]=function(e){return(0,n.jsx)(W,{value:e})},O[B.FLOAT]=function(e){return parseFloat(e)},O[B.CURRENCY]=function(e){return(0,n.jsx)(Q,{value:e})},O),Y=function(e,t){var r=[B.PERCENTAGE,B.TIME,B.INTEGER,B.FLOAT].includes(t),n=t===B.CURRENCY;return function(t,s){var a=t[e],i=s[e];if(null==a&&null==i)return 0;if(null==a)return 1;if(null==i)return-1;if(n){var o="object"==typeof a?parseFloat(a.value):parseFloat(a),l="object"==typeof i?parseFloat(i.value):parseFloat(i);return isNaN(o)&&isNaN(l)?0:isNaN(o)?1:isNaN(l)?-1:o-l}if(r){var c=parseFloat(a),u=parseFloat(i);return isNaN(c)&&isNaN(u)?0:isNaN(c)?1:isNaN(u)?-1:c-u}return String(a).toLowerCase().localeCompare(String(i).toLowerCase())}},$=function(e,t){var r=H[e];return r?function(e){var a;try{var i=null!==(a=e[t])&&void 0!==a?a:"",l=r(i,t,e);return"conversion_rate"===t||"conversions"===t&&!("conversion_rate"in e)?function(e,t){return t.is_ab_test?("no_winner"===t.significant?(i=(0,s.__)("The test resulted in a tie. More hits might still result in a winner, but the difference will probably be very small.","burst-statistics"),a="gold",r="scale"):"still_running"===t.significant?(i=(0,s.__)("Not enough data yet to declare a winner or tie.","burst-statistics"),a="grey",r="hourglass"):(i=t.winner?(0,s.__)("Winner of the A/B test with a probability of >95%.","burst-statistics"):(0,s.__)("Least performant version of the A/B test with a probability of >95%.","burst-statistics"),a=t.winner?"gold":"black",r=t.winner?"trophy":"frown"),(0,n.jsxs)("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[(0,n.jsx)(o.A,{name:r,color:a,tooltip:i}),e]})):e;var r,a,i}(l,e):l}catch(r){return console.error("Error formatting cell value for column ".concat(t,":"),r),e[t]||""}}:(console.warn("Unknown column format: ".concat(e,". Using default text formatter.")),function(e){return e[t]||""})},X=function(e,t){try{return function(e){if(!e||"object"!=typeof e)throw new Error("Invalid response: expected object");if(!Array.isArray(e.columns))throw new Error("Invalid response: columns must be an array");if(!Array.isArray(e.data))throw new Error("Invalid response: data must be an array")}(e),{columns:e.columns.map(function(e){return function(e,t){var r=t[e.id];if(!r)return e;var n=r.format||B.INTEGER,s=r.align||"left";return V(V({},e),{selector:function(t){return t[e.id]},right:"left"!==s,sortFunction:Y(e.id,n),cell:$(n,e.id)})}(e,t)}),data:z([],e.data,!0)}}catch(e){return console.error("Data transformation error:",e),{columns:[],data:[],error:e.message}}};const J=function(e){return t=void 0,r=void 0,s=function(){var t,r,n,s,a,i,o,l,c;return function(e,t){var r,n,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(a=0)),a;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((s=(s=a.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1],s=o;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(o);break}s[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),function(e){var t=e.startDate,r=e.endDate,n=e.range,s=e.columnsOptions;if(!t||!r||!n)throw new Error("Missing required parameters: startDate, endDate, range");if(!s||"object"!=typeof s)throw new Error("Missing or invalid columnsOptions parameter")}(e),t=e.startDate,r=e.endDate,n=e.range,s=e.args,a=e.columnsOptions,i=e.type,o="ecommerce-datatable"===i?"ecommerce/datatable":"datatable",[4,(0,I.bQ)(o,t,r,n,s)];case 1:if(!(l=u.sent().data))throw new Error("No data received from API");return[2,X(l,a)];case 2:return c=u.sent(),console.error("Error fetching data table data:",c),[2,{columns:[],data:[],error:c.message}];case 3:return[2]}})},new((n=void 0)||(n=Promise))(function(e,a){function i(e){try{l(s.next(e))}catch(e){a(e)}}function o(e){try{l(s.throw(e))}catch(e){a(e)}}function l(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n(function(e){e(r)})).then(i,o)}l((s=s.apply(t,r||[])).next())});var t,r,n,s};var ee=r(77902),te=r(67744),re=r(11989),ne=r(86274),se=r(35256),ae=r(97813),ie=function(e,t,r){for(var n in void 0===t&&(t=""),void 0===r&&(r={}),e){var s=e[n],a=t?"".concat(t,"__").concat(n):n;null===s?r[a]="":"object"!=typeof s||Array.isArray(s)?r[a]=s:ie(s,a,r)}return r};const oe=function(e){var t=e.data,i=e.filename,l=e.className,c=void 0===l?"":l,u=(0,(0,f.A)().isLicenseValidFor)("sources"),d=(0,a.useState)(!1),p=d[0],b=d[1],g=!t||0===t.length||p||!u,m=(0,a.useRef)(null),h=(0,a.useMemo)(function(){return(0,se.df)({useKeysAsHeaders:!0,filename:i})},[i]),v=(0,a.useMemo)(function(){return g||t.length>=5e3?"":function(e,t){var r=e.map(function(e){return ie(e)});return(0,se.Y_)(t)(r)}(t,h)},[t,h]);(0,a.useEffect)(function(){return function(){m.current&&(m.current.terminate(),m.current=null)}},[]);var y=function(){if(!g)if(t.length<5e3)v&&(0,se.RG)(h)(v);else{b(!0),m.current||(m.current=new Worker(new URL(r.p+r.u(516),r.b),{type:void 0}));var e=m.current;e.onmessage=null,e.onerror=null,e.onmessage=function(e){var t=e.data;(0,se.RG)(h)(t),b(!1)},e.onerror=function(){console.error("CSV Worker error"),b(!1)},e.postMessage({data:t,filename:i,csvConfig:h})}};return(0,n.jsx)(ae.A,{content:u?void 0:(0,s.__)("Available in Burst Pro","burst-statistics"),children:(0,n.jsx)("div",{className:"relative ".concat(c),children:(0,n.jsx)("button",{className:"bg-gray-100 border border-gray-400 focus:ring-blue-500 rounded-full p-2.5 transition-all duration-200 hover:bg-gray-400 hover:shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2 opacity-30 group-hover/root:opacity-100 ".concat(g?"opacity-30 group-hover/root:opacity-30 cursor-not-allowed hover:bg-gray-100":""),onClick:y,onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),y())},"aria-label":i,disabled:g,children:p?(0,n.jsx)(o.A,{name:"loading"}):(0,n.jsx)(o.A,{name:"download"})})})})};var le=function(){return le=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},le.apply(this,arguments)},ce=function(e,t,r){if(r||2===arguments.length)for(var n,s=0,a=t.length;s<a;s++)!n&&s in t||(n||(n=Array.prototype.slice.call(t,0,s)),n[s]=t[s]);return e.concat(n||Array.prototype.slice.call(t))};const ue=(0,a.memo)(function(e){var t,r,o=e.allowedConfigs,c=void 0===o?["pages","referrers"]:o,u=e.id,d=e.isEcommerce,f=void 0!==d&&d,b=(0,D.S)(function(e){return e}),g=b.startDate,m=b.endDate,h=b.range,y=(0,E.R7)().filters,x=c[0],_=(0,(0,ne.A)().getValue)("filtering_by_domain"),j=(null===(t=window.burst_settings)||void 0===t?void 0:t.shouldLoadEcommerce)||!1,w={pages:{label:(0,s.__)("Pages","burst-statistics"),searchable:!0,defaultColumns:["page_url","pageviews","visitors","bounce_rate"],columnsOptions:le(le(le({},_&&{host:{label:(0,s.__)("Domain","burst-statistics"),default:!1,format:"url",align:"left",group_by:!1}}),{page_url:{label:(0,s.__)("Page","burst-statistics"),default:!0,format:"url",align:"left",group_by:!0},pageviews:{label:(0,s.__)("Pageviews","burst-statistics"),category:"traffic",align:"right"},visitors:{label:(0,s.__)("Visitors","burst-statistics"),category:"traffic",pro:!1,align:"right"},sessions:{label:(0,s.__)("Sessions","burst-statistics"),category:"traffic",pro:!0,align:"right"},bounce_rate:{label:(0,s.__)("Bounce rate","burst-statistics"),category:"engagement",format:"percentage",pro:!1,align:"right"},avg_time_on_page:{label:(0,s.__)("Avg. time on page","burst-statistics"),category:"engagement",pro:!0,format:"time",align:"right"},entrances:{label:(0,s.__)("Entrances","burst-statistics"),category:"engagement",pro:!0,align:"right"},exit_rate:{label:(0,s.__)("Exit rate","burst-statistics"),category:"engagement",pro:!0,format:"percentage",align:"right"},conversions:{label:(0,s.__)("Goal completions","burst-statistics"),category:"conversions",pro:!0,align:"right"},conversion_rate:{label:(0,s.__)("Goal conv. rate","burst-statistics"),category:"conversions",format:"percentage",pro:!0,align:"right"}}),j&&{sales:{label:(0,s.__)("Sales","burst-statistics"),category:"conversions",pro:!0,format:"integer",align:"right"},revenue:{label:(0,s.__)("Revenue","burst-statistics"),category:"conversions",pro:!0,format:"currency",align:"right"},sales_conversion_rate:{label:(0,s.__)("Sales conv. rate","burst-statistics"),category:"conversions",pro:!0,format:"percentage",align:"right"},page_value:{label:(0,s.__)("Page value","burst-statistics"),category:"conversions",pro:!0,format:"currency",align:"right"}})},referrers:{label:(0,s.__)("Referrers","burst-statistics"),searchable:!0,defaultColumns:ce(["referrer","visitors","bounce_rate"],j?["sales","revenue"]:["conversions"],!0),columnsOptions:le({referrer:{label:(0,s.__)("Referrer","burst-statistics"),default:!0,format:"referrer",align:"left",group_by:!0},visitors:{label:(0,s.__)("Visitors","burst-statistics"),category:"traffic",pro:!0,align:"right"},sessions:{label:(0,s.__)("Sessions","burst-statistics"),category:"traffic",pro:!0,align:"right"},bounce_rate:{label:(0,s.__)("Bounce rate","burst-statistics"),category:"engagement",format:"percentage",pro:!0,align:"right"},conversions:{label:(0,s.__)("Goal completions","burst-statistics"),category:"conversions",pro:!0,align:"right"}},j&&{sales:{label:(0,s.__)("Sales","burst-statistics"),category:"conversions",pro:!0,format:"integer",align:"right"},revenue:{label:(0,s.__)("Revenue","burst-statistics"),category:"conversions",pro:!0,format:"currency",align:"right"},page_value:{label:(0,s.__)("Page value","burst-statistics"),category:"conversions",pro:!0,format:"currency",align:"right"}})},countries:{label:(0,s.__)("Locations","burst-statistics"),pro:!0,searchable:!0,defaultColumns:ce(["country_code","visitors"],j?["revenue","sales_conversion_rate"]:[],!0),columnsOptions:le({country_code:{label:(0,s.__)("Country","burst-statistics"),default:!0,format:"country",align:"left",group_by:!0},state:{label:(0,s.__)("State","burst-statistics"),format:"text",align:"left",group_by:!0},city:{label:(0,s.__)("City","burst-statistics"),format:"text",align:"left",group_by:!0},continent:{label:(0,s.__)("Continent","burst-statistics"),format:"continent",align:"left",group_by:!0},visitors:{label:(0,s.__)("Visitors","burst-statistics"),category:"traffic",pro:!0,align:"right"},sessions:{label:(0,s.__)("Sessions","burst-statistics"),category:"traffic",pro:!0,align:"right"},bounce_rate:{label:(0,s.__)("Bounce rate","burst-statistics"),category:"engagement",format:"percentage",pro:!0,align:"right"},conversions:{label:(0,s.__)("Goal completions","burst-statistics"),category:"conversions",pro:!0,align:"right"}},j&&{sales:{label:(0,s.__)("Sales","burst-statistics"),category:"conversions",pro:!0,format:"integer",align:"right"},revenue:{label:(0,s.__)("Revenue","burst-statistics"),category:"conversions",pro:!0,format:"currency",align:"right"},sales_conversion_rate:{label:(0,s.__)("Sales conv. rate","burst-statistics"),category:"conversions",pro:!0,format:"percentage",align:"right"},avg_order_value:{label:(0,s.__)("Avg. order value","burst-statistics"),category:"conversions",pro:!0,format:"currency",align:"right"}})},campaigns:{label:(0,s.__)("Campaigns","burst-statistics"),pro:!0,searchable:!0,defaultColumns:ce(["campaign","visitors"],j?["sales","revenue"]:["conversions"],!0),columnsOptions:le({campaign:{label:(0,s.__)("Campaign","burst-statistics"),default:!0,format:"text",align:"left",group_by:!0},source:{label:(0,s.__)("Source","burst-statistics"),format:"text",align:"left",group_by:!0},medium:{label:(0,s.__)("Medium","burst-statistics"),format:"text",align:"left",group_by:!0},term:{label:(0,s.__)("Term","burst-statistics"),format:"text",align:"left",group_by:!0},content:{label:(0,s.__)("Content","burst-statistics"),format:"text",align:"left",group_by:!0},visitors:{label:(0,s.__)("Visitors","burst-statistics"),category:"traffic",pro:!0,align:"right"},bounce_rate:{label:(0,s.__)("Bounce rate","burst-statistics"),category:"engagement",format:"percentage",pro:!0,align:"right"},conversions:{label:(0,s.__)("Goal completions","burst-statistics"),category:"conversions",pro:!0,align:"right"},conversion_rate:{label:(0,s.__)("Goal conv. rate","burst-statistics"),category:"conversions",format:"percentage",pro:!0,align:"right"}},j&&{sales:{label:(0,s.__)("Sales","burst-statistics"),category:"conversions",pro:!0,format:"integer",align:"right"},revenue:{label:(0,s.__)("Revenue","burst-statistics"),category:"conversions",pro:!0,format:"currency",align:"right"},sales_conversion_rate:{label:(0,s.__)("Sales conv. rate","burst-statistics"),category:"conversions",pro:!0,format:"percentage",align:"right"},page_value:{label:(0,s.__)("Page value","burst-statistics"),category:"conversions",pro:!0,format:"currency",align:"right"}})},parameters:{label:(0,s.__)("Parameters","burst-statistics"),searchable:!0,pro:!0,defaultColumns:["parameter","visitors"],columnsOptions:le({parameter:{label:(0,s.__)("Parameter","burst-statistics"),default:!0,format:"text",align:"left",group_by:!0},parameters:{label:(0,s.__)("Parameters","burst-statistics"),format:"text",align:"left",group_by:!0},visitors:{label:(0,s.__)("Visitors","burst-statistics"),category:"traffic",pro:!0,align:"right"},bounce_rate:{label:(0,s.__)("Bounce rate","burst-statistics"),category:"engagement",format:"percentage",pro:!0,align:"right"},conversions:{label:(0,s.__)("Goal completions","burst-statistics"),category:"conversions",pro:!0,align:"right"}},j&&{sales:{label:(0,s.__)("Sales","burst-statistics"),category:"conversions",pro:!0,format:"integer",align:"right"},revenue:{label:(0,s.__)("Revenue","burst-statistics"),category:"conversions",pro:!0,format:"currency",align:"right"},sales_conversion_rate:{label:(0,s.__)("Sales conv. rate","burst-statistics"),category:"conversions",pro:!0,format:"percentage",align:"right"}})},ghost:{label:(0,s.__)("Dummy","burst-statistics"),searchable:!0,defaultColumns:["pageviews"],columnsOptions:{pageviews:{label:(0,s.__)("Pageviews","burst-statistics"),align:"right"},visitors:{label:(0,s.__)("Visitors","burst-statistics"),pro:!0,align:"right"},sessions:{label:(0,s.__)("Sessions","burst-statistics"),pro:!0,align:"right"}}},products:{label:(0,s.__)("Products","burst-statistics"),pro:!0,searchable:!0,defaultColumns:["product","sales","revenue"],columnsOptions:{product:{label:(0,s.__)("Product","burst-statistics"),default:!0,format:"text",align:"left",group_by:!0},adds_to_cart:{label:(0,s.__)("Adds to cart","burst-statistics"),pro:!0,align:"right"},sales:{label:(0,s.__)("Sales","burst-statistics"),pro:!0,align:"right"},revenue:{label:(0,s.__)("Revenue","burst-statistics"),pro:!0,format:"currency",align:"right"}}}},N=v(),k=N.getSelectedConfig,C=N.setSelectedConfig,O=N.getColumns,I=N.setColumns,R=N.getSortConfig,M=N.setSortConfig,L=(0,a.useState)(function(){return k(u,x)}),T=L[0],V=L[1],z=(0,a.useMemo)(function(){return w[T]},[T]),G=(0,a.useMemo)(function(){return(null==z?void 0:z.columnsOptions)||{}},[z]),U=(0,a.useMemo)(function(){return(null==z?void 0:z.defaultColumns)||[]},[z]),K=(0,a.useState)(function(){var e=O(T,U),t=Object.keys(G);return e.filter(function(e){return t.includes(e)})}),q=K[0],Z=K[1],W=(0,a.useState)(function(){var e,t=R(T);return null!==(e=null==t?void 0:t.fieldId)&&void 0!==e?e:2}),Q=W[0],Y=W[1],$=(0,a.useState)(function(){var e,t=R(T);return null!==(e=null==t?void 0:t.direction)&&void 0!==e?e:"desc"}),X=$[0],se=$[1],ae=(0,a.useCallback)(function(e){var t=e.filter(function(e){return Object.keys(G).includes(e)});JSON.stringify(t)!==JSON.stringify(q)&&(Z(t),I(T,t))},[T,q,G,I]),ie=(0,a.useCallback)(function(e){return t=void 0,r=void 0,s=function(){return function(e,t){var r,n,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(a=0)),a;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((s=(s=a.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1],s=o;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(o);break}s[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}(this,function(t){return V(e),C(u,e),[2]})},new((n=void 0)||(n=Promise))(function(e,a){function i(e){try{l(s.next(e))}catch(e){a(e)}}function o(e){try{l(s.throw(e))}catch(e){a(e)}}function l(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n(function(e){e(r)})).then(i,o)}l((s=s.apply(t,r||[])).next())});var t,r,n,s},[u,C]);(0,a.useEffect)(function(){var e,t=O(T,(null===(e=w[T])||void 0===e?void 0:e.defaultColumns)||[]);ae(t);var r=R(T);r?(Y(r.fieldId),se(r.direction)):(Y(2),se("desc"))},[T,ae,O,R]);var ue=(0,a.useCallback)(function(e,t){var r=e.id||e.selector,n=t.toLowerCase();Y(r),se(n),M(T,{fieldId:r,direction:n})},[T,M]),de=(0,a.useState)(""),fe=de[0],pe=de[1],be=(0,a.useMemo)(function(){return Object.keys(w).filter(function(e){return c.includes(e)}).map(function(e){return{key:e,label:w[e].label,pro:!!w[e].pro,upsellPopover:w[e].upsellPopover||null}})},[c]),ge=(0,a.useMemo)(function(){var e={filters:y,metrics:Object.keys(G).filter(function(e){return q.includes(e)}),group_by:[]};return q.forEach(function(t){var r;(null===(r=G[t])||void 0===r?void 0:r.group_by)&&e.group_by.push(t)}),e},[y,G,q]),me=(0,F.I)({queryKey:[T,g,m,ge],queryFn:function(){return J({type:f?"ecommerce-datatable":"datatable",startDate:g,endDate:m,range:h,args:ge,columnsOptions:G})},enabled:!!T}),he=me.data||{},ve=(0,a.useMemo)(function(){return he.data||[]},[he.data]),ye=he.columns,xe=(0,a.useMemo)(function(){if(!ye||!G)return[];var e=Object.keys(G);return ye.sort(function(t,r){return e.indexOf(t.selector)-e.indexOf(r.selector)})},[ye,G]),_e=(0,a.useMemo)(function(){var e=[];if((null==z?void 0:z.searchable)&&Array.isArray(ve))if(""===fe.trim())e=ve;else{var t=fe.toLowerCase(),r=Object.keys(G).filter(function(e){var t;return null===(t=G[e])||void 0===t?void 0:t.group_by});e=ve.filter(function(e){return r.some(function(r){var n,s=e[r];if(null==s)return!1;var a=function(e,t,r){if(null==e)return"";var n=H[t];if(!n)return e.toString();var s=n(e,r);return null==s?"":"object"==typeof s?t===B.COUNTRY?(0,P.qQ)(e)||e:t===B.CONTINENT?(0,P.Iq)(e)||e:e.toString():s.toString()}(s,null===(n=G[r])||void 0===n?void 0:n.format,r);return a.toLowerCase().includes(t)})})}else e=ve;return xe&&Array.isArray(xe)&&0!==xe.length?(e=ce([],e,!0).sort(function(e,t){var r=Q;!r&&1<xe.length&&(r=xe[1].id);var n=e[r],s=t[r];if(null==n)return 1;if(null==s)return-1;var a=Number(n),i=Number(s),o=!isNaN(a)&&""!==n&&null!==n,l=!isNaN(i)&&""!==s&&null!==s;if(o&&l)return"asc"===X?a-i:i-a;var c=String(n).toLowerCase(),u=String(s).toLowerCase();return"asc"===X?c.localeCompare(u):u.localeCompare(c)}),Array.isArray(e)?e:[]):e},[Q,X,ve,fe,null==z?void 0:z.searchable,G,xe]),je=me.isLoading||me.isFetching,we=me.error,Ne=0===_e.length;0<xe.length&&(xe[0]=le(le({},xe[0]),{allowOverflow:!0,wrap:!1,grow:2}));var ke=(0,a.useMemo)(function(){var e=xe.findIndex(function(e){return e.id===Q});return{columns:xe,data:_e,sortServer:!0,defaultSortFieldId:-1!==e?e+1:2,defaultSortAsc:"asc"===X,onSort:ue,pagination:!0,paginationRowsPerPageOptions:[10,25,50,100,200],paginationPerPage:10,paginationComponentOptions:{rowsPerPageText:"",rangeSeparatorText:(0,s.__)("of","burst-statistics"),noRowsPerPage:!1,selectAllRowsItem:!0,selectAllRowsItemText:(0,s.__)("All","burst-statistics")},noDataComponent:(0,n.jsx)(A,{noData:Ne,data:[],isLoading:je,error:we}),progressPending:je,progressComponent:(0,n.jsx)(A,{noData:Ne,data:[],isLoading:je,error:we})}},[xe,_e,Q,X,ue,Ne,je,we]);if(!z)return null;var Ce=(null===(r=window.burst_admin)||void 0===r?void 0:r.site_url)||window.location.origin,Ae=new URL(Ce).hostname.replace(/\./g,"-").replace(/[^a-zA-Z0-9-]/g,""),Oe="".concat(Ae,"-").concat(T,"-").concat(g,"-").concat(m);return(0,n.jsxs)(ee.e,{className:"row-span-2 overflow-hidden xl:col-span-6 group/root",children:[(0,n.jsx)(te.q,{className:"border-b border-gray-200",title:(0,n.jsx)(p,{value:T,onChange:ie,options:be,disabled:[]}),controls:(0,n.jsxs)(n.Fragment,{children:[(null==z?void 0:z.searchable)&&(0,n.jsx)(l,{value:fe,onChange:pe,className:"ml-auto"}),(0,n.jsx)(oe,{data:_e,filename:Oe}),(0,n.jsx)(i.A,{selectedOptions:q,options:G,defaultOptions:U,onApply:ae})]})}),(0,n.jsx)(re.t,{className:"px-0 py-0",children:(0,n.jsx)(S.Ay,le({},ke))})]})})},39988:(e,t,r)=>{r.d(t,{G:()=>a});var n=r(30346),s=r(14243),a=(0,n.v)((0,s.Zr)(function(e,t){return{metrics:["visitors","pageviews"],loaded:!1,getMetrics:function(){if(t().loaded)return t().metrics;var r=t().metrics||["visitors","pageviews"];return r=r.filter(function(e){return"conversions"!==e}),e({metrics:r,loaded:!0}),r},setMetrics:function(t){e({metrics:t})}}},{name:"burst-insights-storage",partialize:function(e){return{metrics:e.metrics}},onRehydrateStorage:function(){return function(e){e&&e.metrics&&(e.metrics=e.metrics.filter(function(e){return"conversions"!==e}))}}}))},41631:(e,t,r)=>{r.d(t,{A:()=>g});var n=r(91637),s=r(51609),a=r(89668),i=r(65825),o=r(50552),l=r(53411),c=r(27723),u=r(35812),d=r(65162);const f=function(e){var t=e.title,r=e.children,s=e.footer,a=e.isOpen,i=e.setIsOpen,o=e.showFilterIcon,c=void 0===o||o;return(0,n.jsxs)(d.bL,{open:a,onOpenChange:i,children:[(0,n.jsx)(d.l9,{id:"burst-filter-button",onClick:function(){return i(!a)},children:c&&(0,n.jsx)("div",{className:"".concat(a?"bg-gray-300 shadow-lg":"bg-gray-100 shadow-sm"," border border-gray-400 focus:ring-blue-500 cursor-pointer rounded-full p-2.5 transition-all duration-200 hover:bg-gray-400 hover:shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2 opacity-30 group-hover/root:opacity-100"),children:(0,n.jsx)(l.A,{name:"filter"})})}),(0,n.jsx)(d.ZL,{container:document.querySelector(".burst"),children:(0,n.jsxs)(d.UC,{className:"z-50 min-w-[280px] max-w-[600px] rounded-lg border border-gray-200 bg-white p-0 shadow-xl",align:"start",sideOffset:10,arrowPadding:10,children:[(0,n.jsx)(d.i3,{className:"fill-white drop-shadow-sm"}),(0,n.jsx)("div",{className:"border-b border-gray-100 px-4 py-3",children:(0,n.jsx)("h5",{className:"m-0 text-base font-semibold text-black",children:t})}),(0,n.jsx)("div",{className:"px-4 py-2",children:r}),s&&(0,n.jsx)("div",{className:"flex gap-2 rounded-b-lg border-t border-gray-100 bg-gray-50 px-4 py-3",children:s})]})})]})};var p=r(84400),b=function(e,t,r){if(r||2===arguments.length)for(var n,s=0,a=t.length;s<a;s++)!n&&s in t||(n||(n=Array.prototype.slice.call(t,0,s)),n[s]=t[s]);return e.concat(n||Array.prototype.slice.call(t))};const g=function(e){var t=e.onApply,r=e.id,d=e.options,g=e.selectedOptions,m=e.defaultOptions,h=void 0===m?[]:m,v=e.selectionMode,y=void 0===v?"multiple":v,x=(0,s.useState)(!1),_=x[0],j=x[1],w=(0,s.useState)(g),N=w[0],k=w[1],C=(0,s.useMemo)(function(){var e={},t=[];return Object.keys(d).forEach(function(r){var n=d[r].category;n?(e[n]||(e[n]=[]),e[n].push(r)):t.push(r)}),{categories:e,uncategorized:t}},[d]),A=C.categories,O=C.uncategorized;(0,s.useEffect)(function(){k(g)},[g]);var S,D,E=(0,p.A)().isLicenseValid,F=function(e){if("single"!==y||e&&0!==e.length)t(e);else{var r=Object.keys(d)[0];r&&t([r])}j(!1)},I=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.A,{onClick:function(){return F(N),void j(!1)},btnVariant:"primary",size:"sm",className:"flex-1",children:(0,c.__)("Apply","burst-statistics")}),(0,n.jsx)(o.A,{onClick:function(){return function(){var e=0<h.length?h:Object.keys(d).filter(function(e){return d[e].default});if(e=e.filter(function(e){return Object.keys(d).includes(e)}),"single"===y){var t=0<e.length?e[0]:Object.keys(d)[0];k([t]),F([t])}else k(e),F(e);j(!1)}()},btnVariant:"tertiary",size:"sm",className:"flex-1",children:(0,c.__)("Reset to defaults","burst-statistics")})]});return(0,n.jsx)(f,{isOpen:_,setIsOpen:function(e){e?j(!0):(j(!1),k(g))},title:"single"===y?(0,c.__)("Select metric","burst-statistics"):(0,c.__)("Select metrics","burst-statistics"),footer:I,children:"single"===y?(0,n.jsx)("div",{className:"flex flex-col gap-2",children:Object.keys(d).map(function(e){return(0,n.jsx)(i.A,{id:r+"_"+e,name:r+"_radio_group",value:e,label:d[e].label,checked:N[0]===e,disabled:!0===d[e].disabled||d[e].pro&&!E,onChange:function(e){return k([e])},children:d[e].pro&&!E&&(0,n.jsx)(u.A,{label:"Pro"})},e)})}):(S={traffic:(0,c.__)("Traffic","burst-statistics"),engagement:(0,c.__)("Engagement","burst-statistics"),conversions:(0,c.__)("Conversions","burst-statistics")},D=function(e){return(0,n.jsxs)("div",{className:"flex items-center gap-2.5 py-1",children:[(0,n.jsx)(a.bL,{className:"focus:ring-blue-500 flex h-4 w-4 items-center justify-center rounded border-2 border-gray-300 bg-white transition-colors hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-offset-2",id:r+"_"+e,checked:N.includes(e),"aria-label":(0,c.__)("Change metrics","burst-statistics"),disabled:!0===d[e].disabled||d[e].pro&&!E,onCheckedChange:function(){return function(e){"single"===y?k([e]):N.includes(e)?k(N.filter(function(t){return t!==e})):k(b(b([],N,!0),[e],!1))}(e)},children:(0,n.jsx)(a.C1,{children:(0,n.jsx)(l.A,{name:"check",size:14,color:"green",strokeWidth:2})})}),(0,n.jsx)("label",{className:"flex-1 cursor-pointer text-sm text-gray",htmlFor:r+"_"+e,children:d[e].label}),(0,n.jsx)("div",{className:"flex-shrink-0",children:d[e].pro&&!E&&(0,n.jsx)(u.A,{label:"Pro"})})]},e)},0<Object.keys(A).length?(0,n.jsxs)("div",{className:"flex flex-col gap-3",children:[0<O.length&&(0,n.jsx)("div",{className:"flex flex-col",children:O.map(D)}),["traffic","engagement","conversions"].map(function(e){return A[e]&&0!==A[e].length?(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)("div",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-1 mt-2 first:mt-0",children:S[e]||e}),A[e].map(D)]},e):null})]}):Object.keys(d).map(D))})}},42552:(e,t,r)=>{r.d(t,{A:()=>i});var n=r(91637),s=r(85155),a=r(27723);const i=function(e){var t=e.country,r=e.countryNiceName,i=void 0===r?"":r,o=e.iconOnly,l=void 0!==o&&o;if("string"!=typeof t)return(0,n.jsx)("span",{className:"flex items-center justify-start gap-1.5",children:i});""===i&&(i=t),""===i&&(i=(0,a.__)("Unknown","burst-statistics")),t=t.toLowerCase();var c="".concat(burst_settings.plugin_url,"includes/Pro/assets/flags/4x3/").concat(t,".svg");return l?(0,n.jsx)(s.k,{src:c,className:"burst-flag [&_svg]:h-[13px] [&_svg]:w-auto [&_div]:flex burst-flag-".concat(t),title:i}):(0,n.jsxs)("span",{className:"flex items-center justify-start gap-1.5",children:[(0,n.jsx)(s.k,{src:c,className:"burst-flag [&_svg]:h-[13px] [&_svg]:w-auto [&_div]:flex burst-flag-".concat(t),title:i})," ",i]})}},48677:(e,t,r)=>{r.d(t,{A:()=>m});var n=r(91637),s=r(51609),a=r(33597),i=r(89717),o=r(20467),l=r(53411),c=r(78102),u=r(91788),d=r(65162),f=r(74020),p="yyyy-MM-dd",b=new Date(2022,0,1),g=function(e){var t=e.range,r=e.display,s=e.isOpen,a=e.setIsOpen,i=e.disabled;return(0,n.jsxs)(d.l9,{className:"burst-date-button flex min-w-[200px] items-center gap-2 rounded-md border px-3 py-2 shadow-sm transition-all duration-200 ".concat(i?"cursor-not-allowed border-gray-200 bg-gray-100 text-gray-800 opacity-60":"border-gray-300 bg-white hover:bg-gray-50 hover:[box-shadow:0_0_0_3px_rgba(0,0,0,0.05)]"),onClick:function(){return!i&&a(!s)},disabled:i,children:[(0,n.jsx)(l.A,{name:"calendar",size:"18"}),(0,n.jsx)("span",{className:"w-full text-base",children:"custom"===t?"".concat(r.startDate," - ").concat(r.endDate):u.cA[t].label}),(0,n.jsx)(l.A,{name:"chevron-down"})]})};const m=function(){var e=(0,f.A)(function(e){return e.userCanFilterDateRange}),t=(0,s.useState)(!1),r=t[0],l=t[1],m=(0,c.F)(),h=m.startDate,v=m.endDate,y=m.setDateRange,x=m.range,_=(0,s.useState)({startDate:(0,o.A)(h),endDate:(0,o.A)(v),key:"selection"}),j=_[0],w=_[1],N=(0,s.useRef)(0),k=burst_settings.date_ranges,C=(0,s.useMemo)(function(){return(0,u.cf)(k)},[k]),A=(0,s.useMemo)(function(){return(0,u.YP)(h,v)},[h,v]),O=(0,s.useCallback)(function(t){if(e)try{N.current++;var r=t.selection,n=r.startDate,s=r.endDate,a=(0,i.default)(n,p),c=(0,i.default)(s,p);w({startDate:(0,o.A)(a),endDate:(0,o.A)(c),key:"selection"});var d=Object.keys(u.cA).find(function(e){return u.cA[e].isSelected(t.selection)})||"custom";(2===N.current||"custom"!==d||a!==c)&&(N.current=0,y(d,a,c),l(!1))}catch(e){console.error("Error updating date range:",e)}},[y,e]);return(0,n.jsx)("div",{className:"ml-auto w-auto",children:(0,n.jsxs)(d.bL,{open:r&&e,onOpenChange:function(t){return e&&l(t)},children:[(0,n.jsx)(g,{range:x,display:A,isOpen:r,setIsOpen:l,disabled:!e}),(0,n.jsx)("div",{className:"burst-date-range-popover-container relative z-[2]",children:(0,n.jsx)(d.ZL,{container:document.querySelector(".burst-date-range-popover-container"),children:(0,n.jsxs)(d.UC,{align:"end",sideOffset:10,arrowPadding:10,id:"burst-statistics",children:[(0,n.jsx)("span",{className:"absolute right-4 mt-1 h-4 w-4 -translate-y-2 rotate-45 transform bg-green-light"}),(0,n.jsx)("div",{className:"z-50 rounded-lg border border-gray-200 bg-white shadow-md",children:(0,n.jsx)(a.Ur,{ranges:[j],rangeColors:["#2b8133"],dateDisplayFormat:"dd MMMM yyyy",monthDisplayFormat:"MMMM",onChange:O,inputRanges:[],showSelectionPreview:!0,months:2,direction:"horizontal",minDate:b,maxDate:(0,u.ii)(),staticRanges:C})})]})})})]})})}},51956:(e,t,r)=>{r.d(t,{y:()=>Q});var n=r(91637),s=r(51609),a=r.n(s),i=r(88432),o=r(39988),l=r(70802),c=r(3663),u=r(61445),d=function(e,t,r,n){return new(r||(r=Promise))(function(s,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})},f=function(e,t){var r,n,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(a=0)),a;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((s=(s=a.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1],s=o;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(o);break}s[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}};const p=function(){var e=(0,l.jE)(),t=(0,u.A)(),r=t.goals,n=t.getGoalAsync,a=(0,s.useCallback)(function(t,n){return d(void 0,void 0,void 0,function(){var s;return f(this,function(a){switch(a.label){case 0:return"goals"===t?[2,r]:[4,e.fetchQuery({queryKey:["filters_data",t,n],queryFn:function(){return function(e,t){return d(void 0,void 0,void 0,function(){var r,n;return f(this,function(s){switch(s.label){case 0:return[4,(0,c.Eo)("get_filter_options",{data_type:e,search:t})];case 1:return r=s.sent(),[2,(null===(n=r.data)||void 0===n?void 0:n[e])||[]]}})})}(t,n)},staleTime:3e5,cacheTime:18e5})];case 1:return s=a.sent(),[2,(Array.isArray(s)?s:Object.values(s||{})).map(function(e){return{id:e.ID,title:e.name,key:e.key||e.ID}})]}})})},[e,r]);return{getFilterOptions:a,getFilterOptionById:function(e,t){return d(void 0,void 0,void 0,function(){var r,s,i;return f(this,function(o){switch(o.label){case 0:return"goals"!==t?[3,2]:[4,n(e)];case 1:return[2,(r=o.sent())?r.title:e];case 2:return[4,a(t)];case 3:return s=o.sent(),[2,(null==(i=Array.isArray(s)?s.find(function(t){return String(t.id)===String(e)}):null)?void 0:i.title)||e]}})})},getFilterIdByTitle:function(e,t){return d(void 0,void 0,void 0,function(){var r,n;return f(this,function(s){switch(s.label){case 0:return[4,a(t)];case 1:return r=s.sent(),[2,(null==(n=Array.isArray(r)?r.find(function(t){return t.title===e}):null)?void 0:n.id)||null]}})})}}};var b=r(27723),g=function(e,t,r,n){return new(r||(r=Promise))(function(s,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})},m=function(e,t){var r,n,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(a=0)),a;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((s=(s=a.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1],s=o;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(o);break}s[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}};var h=r(95217),v=r(98371),y=r(2573),x=r(53411),_=r(35812),j=r(84400);const w=function(e){var t,r=e.filterKey,s=e.config,a=e.isActive,o=void 0!==a&&a,l=e.onClick,c=e.gridPosition,u=(0,j.A)().isLicenseValid,d=(0,i.R7)(),f=d.isFavorite,p=d.toggleFavorite,g=s.pro&&!u||s.coming_soon,m=f(r),h=function(e){e.stopPropagation(),e.preventDefault(),g||p(r)},v=function(){g||l()};return(0,n.jsxs)("div",{className:(0,y.A)("relative rounded-lg border-2 p-4 transition-all duration-200 bg-white w-full group","focus-within:ring-2 focus-within:ring-primary focus-within:ring-offset-2",{"border-primary bg-primary-light":o,"border-gray-300 shadow-sm hover:border-gray-400":!o&&!g,"bg-gray-100 border-gray-200":g,"bg-gray-300 opacity-90":s.coming_soon}),role:c?"gridcell":void 0,"aria-posinset":null==c?void 0:c.position,"aria-setsize":null==c?void 0:c.total,children:[(0,n.jsx)("button",{onClick:v,onKeyDown:function(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),v())},disabled:g,"aria-label":(t="".concat(s.label," filter"),o&&(t+=", ".concat((0,b.__)("currently active","burst-statistics"))),s.pro&&(t+=", ".concat((0,b.__)("Pro feature","burst-statistics"))),s.coming_soon&&(t+=", ".concat((0,b.__)("coming soon","burst-statistics"))),g&&(t+=", ".concat((0,b.__)("disabled","burst-statistics"))),t),"aria-pressed":o,className:(0,y.A)("w-full h-full absolute inset-0 rounded-lg transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2",{"cursor-not-allowed":g,"cursor-pointer hover:bg-black hover:bg-opacity-5":!g}),tabIndex:g?-1:0}),(0,n.jsx)("div",{className:"absolute top-2 right-2 z-20 opacity-0 group-hover:opacity-100 group-focus-within:opacity-100 transition-opacity duration-200",children:(0,n.jsx)("button",{onClick:h,onKeyDown:function(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),h(e))},disabled:g,className:(0,y.A)("p-1 rounded-full transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-1","hover:bg-gray-200 active:bg-gray-300",{"text-yellow-500":m,"text-gray-400 hover:text-gray-600":!m,"cursor-not-allowed opacity-50":g}),"aria-label":m?(0,b.__)("Remove %s from favorites","burst-statistics").replace("%s",s.label):(0,b.__)("Add %s to favorites","burst-statistics").replace("%s",s.label),"aria-pressed":m,tabIndex:g?-1:0,children:(0,n.jsx)(x.A,{name:m?"star-filled":"star-outline",size:16,color:m?"yellow":"gray","aria-hidden":"true"})})}),o&&(0,n.jsx)("div",{className:"absolute top-2 left-2 z-10","aria-hidden":"true",children:(0,n.jsx)("div",{className:"h-2 w-2 rounded-full bg-primary"})}),(0,n.jsxs)("div",{className:"flex flex-col items-center space-y-3 relative z-10 pointer-events-none",children:[(0,n.jsx)("div",{className:(0,y.A)("flex h-12 w-12 items-center justify-center rounded-lg",{"bg-gray-100":!o,"bg-primary-light":o}),"aria-hidden":"true",children:(0,n.jsx)(x.A,{name:s.icon,color:"gray",size:24,"aria-hidden":"true"})}),(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("h3",{className:"text-sm font-medium text-gray-900",children:s.label}),s.pro&&(0,n.jsx)("div",{className:"mt-2",children:(0,n.jsx)(_.A,{label:(0,b.__)("Pro","burst-statistics")})}),s.coming_soon&&(0,n.jsx)("div",{className:"mt-2",children:(0,n.jsx)("span",{className:"inline-flex items-center rounded bg-blue-light px-2 py-0.5 text-xs font-medium text-gray",children:(0,b.__)("Coming soon","burst-statistics")})})]})]})]})};var N=r(86274),k=function(){return k=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},k.apply(this,arguments)};const C=function(e){var t=e.onSelectFilter,r=(0,i.R7)(),a=r.filtersConf,o=r.filterCategories,l=r.getActiveFilters,c=r.getFiltersByCategory,u=r.getFavoriteFilters,d=(0,N.A)().getValue,f=(0,s.useState)("favorites"),p=f[0],g=f[1],m=(0,s.useState)(""),h=m[0],v=m[1],_=(0,s.useState)({}),j=_[0],C=_[1],A=(0,s.useRef)(null),O=l(),S=c(),D=u(),E=d("filtering_by_domain");(0,s.useEffect)(function(){if(E)C(a);else{var e=Object.fromEntries(Object.entries(a).filter(function(e){return"host"!==e[0]}));C(e)}},[a,E]),(0,s.useEffect)(function(){A.current&&A.current.focus()},[]);var F=function(e,t,r){if(r||2===arguments.length)for(var n,s=0,a=t.length;s<a;s++)!n&&s in t||(n||(n=Array.prototype.slice.call(t,0,s)),n[s]=t[s]);return e.concat(n||Array.prototype.slice.call(t))}([{key:"favorites",label:(0,b.__)("Favorites","burst-statistics"),icon:"star-outline"},{key:"all",label:(0,b.__)("All","burst-statistics"),icon:"grid"}],Object.entries(o).sort(function(e,t){var r=e[1],n=t[1];return r.order-n.order}).map(function(e){var t=e[0],r=e[1];return{key:t,label:r.label,icon:r.icon}}),!0),I=function(e){if(!e.trim())return null;var t=e.toLowerCase(),r=Object.entries(j).filter(function(e){return e[0],e[1].type}).map(function(e){var t=e[0],r=e[1];return k({key:t},r)}),n=function(e){return e.label.toLowerCase().includes(t)||e.key.toLowerCase().includes(t)},s=[];"favorites"===p?s=D:"all"===p?s=r:p in S&&(s=S[p]||[]);var a=s.filter(n);return 0<a.length?{results:a,source:p,isFromCurrentTab:!0}:{results:r.filter(n),source:"all",isFromCurrentTab:!1}}(h),P=function(e,r){return 0===e.length?(0,n.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,n.jsx)(x.A,{name:"empty",size:48,color:"gray"}),(0,n.jsx)("p",{className:"mt-2",children:h.trim()?(0,b.__)("No filters match your search.","burst-statistics"):"favorites"===p?(0,b.__)("No favorite filters yet. Pin filters to add them here.","burst-statistics"):"all"===p?(0,b.__)("No filters available.","burst-statistics"):(0,b.__)("No filters in this category.","burst-statistics")})]}):(0,n.jsxs)("div",{children:[r&&!r.isFromCurrentTab&&(0,n.jsx)("div",{className:"mb-4 p-3 bg-blue-light border border-blue-200 rounded-lg",children:(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(x.A,{name:"help",size:16,color:"blue"}),(0,n.jsx)("span",{className:"text-sm text-blue-700",children:(0,b.__)("No results found in current tab. Showing results from all filters.","burst-statistics")})]})}),(0,n.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 justify-items-center",role:"grid","aria-label":(0,b.__)("Available filters","burst-statistics"),children:e.map(function(r,s){return(0,n.jsx)(w,{filterKey:r.key,config:r,isActive:Object.prototype.hasOwnProperty.call(O,r.key),onClick:function(){return t(r.key,r)},gridPosition:{position:s+1,total:e.length}},r.key)})})]})};return(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsx)("label",{htmlFor:"filter-search",className:"sr-only",children:(0,b.__)("Search filters","burst-statistics")}),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,n.jsx)(x.A,{name:"search",size:16,className:"text-gray-400","aria-hidden":"true"})}),(0,n.jsx)("input",{id:"filter-search",type:"text",placeholder:(0,b.__)("Search filters…","burst-statistics"),value:h,onChange:function(e){return v(e.target.value)},className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-primary focus:border-primary text-sm","aria-describedby":I?"search-results-info":void 0,ref:A}),h&&(0,n.jsx)("button",{onClick:function(){return v("")},className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 focus:outline-none focus:text-gray-900","aria-label":(0,b.__)("Clear search","burst-statistics"),type:"button",children:(0,n.jsx)(x.A,{name:"times",size:16,"aria-hidden":"true"})})]})]}),(0,n.jsx)("div",{className:"mb-6",children:(0,n.jsx)("div",{className:"border-b border-gray-200",children:(0,n.jsx)("nav",{className:"-mb-px flex space-x-8 overflow-x-auto scrollbar-hide",role:"tablist","aria-label":(0,b.__)("Filter categories","burst-statistics"),children:F.map(function(e){return(0,n.jsxs)("button",{id:"tab-".concat(e.key),onClick:function(){return g(e.key)},role:"tab","aria-selected":p===e.key,"aria-controls":"tabpanel-".concat(e.key),className:(0,y.A)("flex items-center space-x-2 py-2 px-1 border-b-2 font-medium text-sm transition-colors whitespace-nowrap flex-shrink-0","focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2",{"border-primary text-primary":p===e.key,"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300":p!==e.key}),children:[(0,n.jsx)("span",{className:(0,y.A)("flex items-center justify-center w-6 h-6 rounded-full transition-all duration-200",{"bg-primary-light text-white shadow-sm border-primary border-0.5":p===e.key,"bg-transparent":p!==e.key}),"aria-hidden":"true",children:(0,n.jsx)(x.A,{name:e.icon,size:16})}),(0,n.jsx)("span",{children:e.label})]},e.key)})})})}),(0,n.jsx)("div",{role:"tabpanel",id:"tabpanel-".concat(p),"aria-labelledby":"tab-".concat(p),children:I?(0,n.jsxs)("div",{children:[0<I.results.length&&(0,n.jsx)("div",{id:"search-results-info",className:"sr-only",children:(0,b.__)("Showing %d search results","burst-statistics").replace("%d",I.results.length.toString())}),P(I.results,I)]}):"favorites"===p?P(D):"all"===p?P(Object.entries(j).filter(function(e){return e[0],e[1].type}).map(function(e){var t=e[0],r=e[1];return k({key:t},r)})):p in S?P(S[p]||[]):null})]})};var A=r(24454),O=r(10371),S=r(53576),D=r.n(S),E=function(e,t,r,n){return new(r||(r=Promise))(function(s,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})},F=function(e,t){var r,n,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(a=0)),a;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((s=(s=a.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1],s=o;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(o);break}s[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}};const I=function(e){var t=e.filterKey,r=e.config,a=e.initialValue,i=void 0===a?"":a,o=e.onChange,l=(0,s.useState)(i),c=l[0],u=l[1],d=(0,s.useRef)(null),f=(0,s.useRef)(null),g=(0,s.useState)([]),m=g[0],h=g[1],v=(0,s.useState)([]),y=v[0],x=v[1],_=(0,s.useState)(""),j=_[0],w=_[1],N=(0,s.useState)(!1),k=N[0],C=N[1],S=p().getFilterOptions;(0,s.useEffect)(function(){u(i)},[i]),(0,s.useEffect)(function(){E(void 0,void 0,void 0,function(){var e,t;return F(this,function(n){switch(n.label){case 0:return r.options?[4,S(r.options,"")]:[2];case 1:return e=n.sent(),t=Array.isArray(e)?e.map(function(e){return{value:e.id||e.title,label:e.title}}):[],h(t),x(t),C(1e3>t.length),[2]}})})},[r.options,S]);var I=(0,s.useMemo)(function(){return D()(function(e){return E(void 0,void 0,void 0,function(){var t,n;return F(this,function(s){switch(s.label){case 0:return r.options?[4,S(r.options,e)]:[2];case 1:return t=s.sent(),n=Array.isArray(t)?t.map(function(e){return{value:e.id||e.title,label:e.title}}):[],h(n),e||x(n),[2]}})})},300)},[r.options,S]);(0,s.useEffect)(function(){if(r.reloadOnSearch&&r.options&&!(3>j.length||k))return I(j),function(){I.cancel()}},[j,r.reloadOnSearch,k,I]),(0,s.useEffect)(function(){var e=setTimeout(function(){var e,t;r.options&&d.current?d.current.focus?d.current.focus():(null===(t=null===(e=d.current.select)||void 0===e?void 0:e.inputRef)||void 0===t?void 0:t.current)&&d.current.select.inputRef.current.focus():!r.options&&f.current&&f.current.focus()},100);return function(){return clearTimeout(e)}},[r.options]);var P=function(){if(r.options)return(0,b.__)("Search or select an option…","burst-statistics");switch(t){case"page_url":return(0,b.__)("Enter page URL (e.g., /about)","burst-statistics");case"referrer":return(0,b.__)("Enter referrer URL (e.g., google.com)","burst-statistics");case"campaign":return(0,b.__)("Enter campaign name","burst-statistics");case"source":return(0,b.__)("Enter traffic source","burst-statistics");case"medium":return(0,b.__)("Enter traffic medium","burst-statistics");case"term":return(0,b.__)("Enter search term","burst-statistics");case"content":return(0,b.__)("Enter content identifier","burst-statistics");case"parameter":return(0,b.__)("Enter URL parameter (e.g., utm_campaign)","burst-statistics");default:return(0,b.__)("Enter filter value…","burst-statistics")}};return(0,n.jsx)("div",{className:"space-y-4",children:(0,n.jsxs)("div",{className:"space-y-2 relative",children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:(0,b.__)("Filter value","burst-statistics")}),r.options?(0,n.jsx)(A.A,{ref:d,value:c?m.find(function(e){return e.value===c})||{value:c,label:c}:null,onChange:function(e){var t=e?e.value:"";u(t),o(t)},loadOptions:function(e,t){return E(void 0,void 0,void 0,function(){var r,n;return F(this,function(s){return r=String(null!=e?e:"").toLowerCase(),w(r),m.length?0===r.length?(null==t||t(m),x(m),[2]):(n=m.filter(function(e){var t,n,s=String(null!==(t=e.label)&&void 0!==t?t:"").toLowerCase(),a=String(null!==(n=e.value)&&void 0!==n?n:"").toLowerCase();return s.includes(r)||a.includes(r)}),null==t||t(n),x(n),[2]):(null==t||t([]),[2])})})},defaultOptions:y,placeholder:P(),isSearchable:!0,disabled:!1,insideModal:!0,allowCustomValue:0===y.length}):(0,n.jsx)(O.A,{ref:f,value:c,onChange:function(e){var t=e.target.value;u(t),o(t)},placeholder:P(),className:"w-full"})]})})};var P=r(78548);const R=function(e){var t=e.filterKey,r=e.initialValue,a=void 0===r?"":r,i=e.onChange,o=(0,s.useState)(a),l=o[0],c=o[1];(0,s.useEffect)(function(){c(a)},[a]);var u="bounces"===t?{"":{type:"",icon:"user",label:(0,b.__)("All visitors (default)","burst-statistics")},include:{type:"include",icon:"bounce",label:(0,b.__)("Bounced visitors","burst-statistics")},exclude:{type:"exclude",icon:"user-check",label:(0,b.__)("Active visitors","burst-statistics")}}:"new_visitor"===t?{"":{type:"",icon:"user",label:(0,b.__)("All visitors (default)","burst-statistics")},include:{type:"include",icon:"user-plus",label:(0,b.__)("New visitors","burst-statistics")},exclude:{type:"exclude",icon:"user-check",label:(0,b.__)("Returning visitors","burst-statistics")}}:"entry_exit_pages"===t?{"":{type:"",icon:"user",label:(0,b.__)("All pages","burst-statistics")},entry:{type:"entry",icon:"user-plus",label:(0,b.__)("Entry pages","burst-statistics")},exit:{type:"exit",icon:"user-check",label:(0,b.__)("Exit pages","burst-statistics")}}:{"":{type:"",icon:"user",label:(0,b.__)("All visitors (default)","burst-statistics"),description:(0,b.__)("Show all visitors without filtering","burst-statistics")},include:{type:"include",icon:"check",label:(0,b.__)("Include","burst-statistics"),description:(0,b.__)("Include visitors matching this criteria","burst-statistics")},exclude:{type:"exclude",icon:"times",label:(0,b.__)("Exclude","burst-statistics"),description:(0,b.__)("Exclude visitors matching this criteria","burst-statistics")}};return(0,n.jsx)("div",{className:"space-y-6",children:(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:(0,b.__)("Filter option","burst-statistics")}),(0,n.jsx)(P.A,{inputId:"".concat(t,"-boolean"),options:u,value:l,onChange:function(e){c(e),i(e)},columns:1})]})})};var M=r(90160),L=function(){return L=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},L.apply(this,arguments)},T=(0,s.forwardRef)(function(e,t){var r=e.min,a=void 0===r?0:r,i=e.max,o=void 0===i?100:i,l=e.step,c=void 0===l?1:l,u=e.value,d=void 0===u?[a,o]:u,f=e.onChange,p=e.formatValue,g=void 0===p?function(e){return e.toString()}:p,m=e.className,h=void 0===m?"":m,v=e.disabled,y=void 0!==v&&v,x=e.label,_=e.showLabels,j=void 0===_||_,w=e.showCurrentValue,N=void 0===w||w,k=e.allowSingleValue,C=void 0!==k&&k,A=e.rangeSeparator,O=void 0===A?" - ":A,S=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}(e,["min","max","step","value","onChange","formatValue","className","disabled","label","showLabels","showCurrentValue","allowSingleValue","rangeSeparator"]),D=(0,s.useState)(d),E=D[0],F=D[1];return(0,s.useEffect)(function(){F(d)},[d]),(0,n.jsxs)("div",L({ref:t,className:"space-y-3 ".concat(h)},S,{children:[x&&(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:x}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)(M.bL,{className:"relative flex items-center select-none touch-none w-full h-5",value:C&&E[0]===E[1]?[E[0]]:E,onValueChange:function(e){var t=C&&1===e.length?[e[0],e[0]]:[e[0],e[1]];F(t),null==f||f(t)},min:a,max:o,step:c,disabled:y,children:[(0,n.jsx)(M.CC,{className:"bg-gray-200 relative grow rounded-full h-2",children:(0,n.jsx)(M.Q6,{className:"absolute bg-primary rounded-full h-full"})}),(0,n.jsx)(M.zi,{className:"block w-5 h-5 bg-white border-2 border-primary rounded-full shadow-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":(0,b.__)("Minimum value","burst-statistics")}),(!C||E[0]!==E[1])&&(0,n.jsx)(M.zi,{className:"block w-5 h-5 bg-white border-2 border-primary rounded-full shadow-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":(0,b.__)("Maximum value","burst-statistics")})]}),j&&(0,n.jsxs)("div",{className:"flex justify-between text-xs text-gray-500",children:[(0,n.jsx)("span",{children:g(a)}),N&&(0,n.jsx)("span",{className:"font-medium text-primary",children:C&&E[0]===E[1]?g(E[0]):"".concat(g(E[0])).concat(O).concat(g(E[1]))}),(0,n.jsx)("span",{children:g(o)})]})]})]}))});T.displayName="RangeSliderInput";const V=T,z=function(e){var t=e.filterKey,r=e.initialValue,a=void 0===r?"":r,i=e.onChange,o=function(e){if(!e||""===e)return[0,100];if("string"==typeof e&&e.includes("-")){var t=e.split("-").map(function(e){return parseFloat(e.trim())});return[t[0]||0,t[1]||100]}return[0,parseFloat(e)||0]},l=(0,s.useState)(o(a)),c=l[0],u=l[1],d=(0,s.useState)(0),f=d[0],p=d[1],g=(0,s.useState)(100),m=g[0],h=g[1];(0,s.useEffect)(function(){u(o(a))},[a]),(0,s.useEffect)(function(){switch(t){case"bounce_rate":case"conversion_rate":default:p(0),h(100);break;case"time_per_session":p(0),h(3600)}},[t]);var v=function(e){u(e);var t=e[0]===e[1]?e[0].toString():"".concat(e[0],"-").concat(e[1]);i(t)};return(0,n.jsx)("div",{className:"space-y-4",children:(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)(V,{min:f,max:m,value:c,onChange:v,formatValue:function(e){if(""===e||null==e)return"";var r="string"==typeof e?parseFloat(e):e;switch(t){case"bounce_rate":case"conversion_rate":return"".concat(r,"%");case"time_per_session":var n=Math.floor(r/60),s=r%60;return 0<n?"".concat(n,"m ").concat(s,"s"):"".concat(s,"s");default:return r.toString()}},label:(0,b.__)("Filter range","burst-statistics"),showLabels:!0,showCurrentValue:!0,rangeSeparator:" - "}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:(0,b.__)("Exact range values","burst-statistics")}),(0,n.jsxs)("div",{className:"flex space-x-2",children:[(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)(O.A,{type:"number",value:c[0],onChange:function(e){var t=e.target.value,r=parseFloat(t);if(""===t||!isNaN(r)&&r>=f&&r<=m){var n=[r||0,c[1]];u(n),v(n)}},placeholder:(0,b.__)("Min value…","burst-statistics"),min:f,max:m,className:"w-full"}),(0,n.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:(0,b.__)("Minimum value","burst-statistics")})]}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)(O.A,{type:"number",value:c[1],onChange:function(e){var t=e.target.value,r=parseFloat(t);if(""===t||!isNaN(r)&&r>=f&&r<=m){var n=[c[0],r||m];u(n),v(n)}},placeholder:(0,b.__)("Max value…","burst-statistics"),min:f,max:m,className:"w-full"}),(0,n.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:(0,b.__)("Maximum value","burst-statistics")})]}),(0,n.jsx)("button",{type:"button",onClick:function(){u([f,m]),i("")},className:"px-3 py-2 text-sm border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",children:(0,b.__)("Clear","burst-statistics")})]}),(0,n.jsx)("p",{className:"text-xs text-gray-500",children:(0,b.__)("Clear to remove this filter","burst-statistics")})]})]})})};var B=function(e,t,r){if(r||2===arguments.length)for(var n,s=0,a=t.length;s<a;s++)!n&&s in t||(n||(n=Array.prototype.slice.call(t,0,s)),n[s]=t[s]);return e.concat(n||Array.prototype.slice.call(t))};const G=function(e){var t=e.initialValue,r=void 0===t?"":t,a=e.onChange,i=p().getFilterOptions,o=(0,s.useState)([]),l=o[0],c=o[1];(0,s.useEffect)(function(){var e,t,r,n;e=void 0,t=void 0,n=function(){var e;return function(e,t){var r,n,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(a=0)),a;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((s=(s=a.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1],s=o;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(o);break}s[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}(this,function(t){switch(t.label){case 0:return[4,i("devices")];case 1:return e=t.sent()||[],c(e),[2]}})},new((r=void 0)||(r=Promise))(function(s,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})},[]);var u,d=(0,s.useState)((u=r)&&""!==u.trim()?u.split(",").map(function(e){return e.trim().toLowerCase()}).filter(Boolean):[]),f=d[0],g=d[1];(0,s.useEffect)(function(){var e=0<f.length?f.join(","):"";a(e)},[f,a]);var m=function(e){g(function(t){return t.includes(e)?t.filter(function(t){return t!==e}):B(B([],t,!0),[e],!1)})},h=function(e){return f.includes(e)},v=function(e){var t="".concat(e.title," device filter"),r=h(e.id)?(0,b.__)("selected","burst-statistics"):(0,b.__)("not selected","burst-statistics");return"".concat(t,", ").concat(r)};return l&&0!==l.length?(0,n.jsx)("div",{className:"space-y-6",children:(0,n.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 justify-items-center",role:"group","aria-label":(0,b.__)("Device selection options","burst-statistics"),children:l.map(function(e){var t=h(e.id);return(0,n.jsxs)("button",{onClick:function(){return m(e.id)},onKeyDown:function(t){return function(e,t){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),m(t))}(t,e.id)},className:(0,y.A)("relative rounded-lg border-2 p-4 transition-all duration-200 bg-white w-full group","focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2","hover:shadow-md",{"border-primary bg-primary-light":t,"border-gray-300 hover:border-gray-400":!t}),"aria-label":v(e),"aria-pressed":t,type:"button",children:[t&&(0,n.jsx)("div",{className:"absolute top-2 right-2 z-10","aria-hidden":"true",children:(0,n.jsx)("div",{className:"h-2 w-2 rounded-full bg-primary"})}),(0,n.jsxs)("div",{className:"flex flex-col items-center space-y-3",children:[(0,n.jsx)("div",{className:(0,y.A)("flex h-12 w-12 items-center justify-center rounded-lg transition-colors",{"bg-primary-light":t,"bg-gray-100 group-hover:bg-gray-200":!t}),"aria-hidden":"true",children:(0,n.jsx)(x.A,{name:e.key,color:"gray",size:24,"aria-hidden":"true"})}),(0,n.jsx)("div",{className:"text-center",children:(0,n.jsx)("h3",{className:(0,y.A)("text-sm font-medium transition-colors",{"text-gray-900":t,"text-gray-700":!t}),children:e.title})})]}),(0,n.jsx)("div",{className:"absolute bottom-2 left-2 z-10","aria-hidden":"true",children:(0,n.jsx)("div",{className:(0,y.A)("h-4 w-4 rounded border-2 transition-all duration-200 flex items-center justify-center",{"bg-primary border-primary":t,"bg-white border-gray-300 group-hover:border-gray-400":!t}),children:t&&(0,n.jsx)(x.A,{name:"check",size:12,color:"white","aria-hidden":"true"})})})]},e.id)})})}):null};var U=function(){return U=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},U.apply(this,arguments)};const K=function(e){var t=e.filterKey,r=e.config,s=e.tempValue,a=e.onTempValueChange;return(0,n.jsx)("div",{className:"h-full",children:function(){var e={filterKey:t,config:r,initialValue:s,onChange:a};if("device_id"===t)return(0,n.jsx)(G,U({},e));switch(r.type){case"string":default:return(0,n.jsx)(I,U({},e));case"boolean":return(0,n.jsx)(R,U({},e));case"int":return(0,n.jsx)(z,U({},e))}}()})};var q=r(50552);const Z=function(e){var t=e.isOpen,r=e.setIsOpen,o=e.initialFilter,l=(0,i.R7)(),c=l.setFilters,u=l.deleteFilter,d=l.clearAllFilters,f=l.getActiveFilters,p=(0,s.useState)("selection"),g=p[0],m=p[1],h=(0,s.useState)(null),y=h[0],_=h[1],j=(0,s.useState)(null),w=j[0],N=j[1],k=(0,s.useState)(""),A=k[0],O=k[1];a().useEffect(function(){t&&(o?(m("setup"),_(o.key),N(o.config),O(o.value)):(m("selection"),_(null),N(null),O("")))},[t,o]);var S=function(){m("selection"),_(null),N(null),O("")};return(0,n.jsx)(v.A,{isOpen:t,onClose:function(){return r(!1)},title:"selection"===g?(0,b.__)("Select a filter","burst-statistics"):(0,b.__)("Setup Filter","burst-statistics"),subtitle:"selection"===g?"selection"===g?(0,b.__)("Choose a filter to apply to your analytics data","burst-statistics"):(0,b.__)("Setup filter","burst-statistics"):void 0,customHeader:"setup"===g&&"setup"===g&&w?(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"flex items-center space-x-3 mb-4",children:(0,n.jsxs)("button",{onClick:S,className:"flex items-center space-x-2 text-sm text-gray-600 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 rounded transition-all duration-200","aria-label":(0,b.__)("Back to filters","burst-statistics"),type:"button",children:[(0,n.jsx)(x.A,{name:"chevron-left",size:16,"aria-hidden":"true"}),(0,n.jsx)("span",{children:(0,b.__)("Back to filters","burst-statistics")})]})}),(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,n.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-primary-light",children:(0,n.jsx)(x.A,{name:w.icon,color:"gray",size:20})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:w.label}),(0,n.jsx)("p",{className:"text-sm text-gray-600",children:"setup"===g&&w?"string"===w.type?w.options?(0,b.__)("Start typing to search or select from available options","burst-statistics"):(0,b.__)("Enter the value you want to filter by","burst-statistics"):"int"===w.type?(0,b.__)("Set the range for this filter","burst-statistics"):"boolean"===w.type?(0,b.__)("Select the option you want to filter by","burst-statistics"):"":""})]})]})]}):null,content:"selection"===g?(0,n.jsx)(C,{onSelectFilter:function(e,t){_(e),N(t),m("setup");var r=f();O(r[e]||"")}}):y&&w?(0,n.jsx)(K,{filterKey:y,config:w,onBack:S,tempValue:A,onTempValueChange:function(e){O(e)}}):null,footer:"selection"===g?(0,n.jsx)(q.A,{onClick:function(){d(),r(!1)},btnVariant:"tertiary",size:"sm",className:"w-full",ariaLabel:(0,b.__)("Reset all active filters to default settings","burst-statistics"),children:(0,b.__)("Reset all filters","burst-statistics")}):"setup"===g?(0,n.jsxs)("div",{className:"flex space-x-3",children:[(0,n.jsx)(q.A,{onClick:function(){var e,t;y&&(e=y,""===(t=A)||null==t?u(e):c(e,t),r(!1))},btnVariant:"primary",size:"sm",className:"flex-1",ariaLabel:w?(0,b.__)("Apply %s filter","burst-statistics").replace("%s",w.label):(0,b.__)("Apply filter","burst-statistics"),children:(0,b.__)("Apply Filter","burst-statistics")}),(0,n.jsx)(q.A,{onClick:function(){var e,t;y&&(e=y,""===(t=A)||null==t?u(e):c(e,t),S())},btnVariant:"secondary",size:"sm",className:"flex-1",ariaLabel:w?(0,b.__)("Apply %s filter and continue adding more filters","burst-statistics").replace("%s",w.label):(0,b.__)("Apply filter and add more","burst-statistics"),children:(0,b.__)("Apply & Add More","burst-statistics")})]}):null,triggerClassName:""})};var W=r(74020),Q=function(){var e=(0,W.A)(function(e){return e.userCanFilter}),t=(0,s.useState)(!1),r=t[0],a=t[1],l=(0,s.useState)(null),c=l[0],u=l[1],d=function(){var e=(0,i.R7)(),t=e.filters,r=e.filtersConf,n=e.setFilters,a=p().getFilterOptionById,l=(0,o.G)(),c=l.setMetrics,u=l.getMetrics,d=(0,s.useState)([]),f=d[0],h=d[1];(0,s.useEffect)(function(){g(void 0,void 0,void 0,function(){var e;return m(this,function(t){switch(t.label){case 0:return[4,v()];case 1:return e=t.sent(),h(e),[2]}})})},[t]);var v=(0,s.useCallback)(function(){return g(void 0,void 0,void 0,function(){var e;return m(this,function(n){switch(n.label){case 0:return e=Object.entries(t).filter(function(e){return e[0],""!==e[1]}),[4,Promise.all(e.map(function(e){return g(void 0,[e],void 0,function(e){var t,n=e[0],s=e[1];return m(this,function(e){switch(e.label){case 0:return[4,y(n,s)];case 1:return t=e.sent(),[2,{key:n,value:s,displayValue:t,config:(null==r?void 0:r[n])||null}]}})})}))];case 1:return[2,n.sent()]}})})},[t,r]),y=function(e,t){return g(void 0,void 0,void 0,function(){var n,s,i,o,l;return m(this,function(c){switch(c.label){case 0:return t?Object.prototype.hasOwnProperty.call(r,e)&&(n=(null===(i=r[e])||void 0===i?void 0:i.options)||!1)?"string"!=typeof t||-1===t.indexOf(",")?[3,2]:(t=t.split(",").map(function(e){return e.trim()}),[4,Promise.all(t.map(function(e){return g(void 0,void 0,void 0,function(){return m(this,function(t){switch(t.label){case 0:return[4,a(e,n)];case 1:return[2,t.sent()||e]}})})}))]):[3,4]:[2,""];case 1:return t=(t=c.sent()).join(", "),[3,4];case 2:return[4,a(t,n)];case 3:t=c.sent()||t,c.label=4;case 4:switch(e){case"country_code":return t?(s=t.toUpperCase(),[2,(null===(l=null===(o=window.burst_settings)||void 0===o?void 0:o.countries)||void 0===l?void 0:l[s])||s]):[2,""];case"bounces":return[2,"include"===t?(0,b.__)("Bounced visitors","burst-statistics"):(0,b.__)("Active visitors","burst-statistics")];case"new_visitor":return[2,"true"===t?(0,b.__)("New visitors","burst-statistics"):(0,b.__)("Returning visitors","burst-statistics")];default:return[2,t]}return[2]}})})},x=(0,s.useCallback)(function(e){if(n(e,""),"goal_id"===e){var t=u().filter(function(e){return"conversions"!==e});c(t)}},[n,c,u]),_=(0,s.useMemo)(function(){return Array.isArray(f)&&0<f.length},[f]),j=(0,s.useCallback)(function(e){return r[e]||null},[r]);return{activeFilters:f,hasActiveFilters:_,removeFilter:x,getFilterConfig:j,setFilter:n,filters:t,filtersConf:r}}(),f=d.activeFilters,v=d.removeFilter;return(0,n.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,n.jsx)(h.B,{filters:f,onRemove:v,onClick:function(e){u({key:e.key,config:e.config,value:e.value}),a(!0)},className:"flex flex-wrap gap-2"}),e&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(h.wk,{onClick:function(){u(null),a(!0)}}),(0,n.jsx)(Z,{isOpen:r,setIsOpen:function(){a(!1),u(null)},initialFilter:c})]})]})}},52698:(e,t,r)=>{r.d(t,{A:()=>i});var n=r(91637),s=r(53411),a=r(28786);const i=function(e){var t=e.title,r=e.subtitle,i=e.value,o=e.exactValue,l=e.change,c=e.changeStatus,u=e.iconKey,d=void 0===u?null:u,f=e.className,p=void 0===f?"":f,b=e.tooltipText,g=void 0===b?null:b;return o&&1e3<o&&(g=g||o.toLocaleString()),(0,n.jsxs)("div",{className:"flex items-start gap-3 py-2 ".concat(p),children:[d&&(0,n.jsx)(s.A,{name:d,className:"mt-1"}),(0,n.jsxs)("div",{className:"flex-1 label",children:[(0,n.jsx)("h3",{className:"text-base font-semibold text-black",children:t}),r&&(0,n.jsx)("p",{className:"text-sm text-gray",children:r})]}),(0,n.jsxs)("div",{className:"text-right",children:[o&&1e3<o&&g?(0,n.jsx)(a.A,{content:g,delayDuration:1e3,children:(0,n.jsx)("span",{className:"text-xl font-bold text-black value",children:i})}):(0,n.jsx)("span",{className:"text-xl font-bold text-black value",children:i}),(0,n.jsx)("p",{className:"text-sm ".concat("positive"===c?"text-green":"text-red"),children:l})]})]})}},61445:(e,t,r)=>{r.d(t,{A:()=>g,l:()=>b});var n=r(61626),s=r(70802),a=r(78280),i=r(3663),o=r(21587),l=r(27723),c=r(89085),u=r(84400),d=function(){return d=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},d.apply(this,arguments)},f=function(e,t,r,n){return new(r||(r=Promise))(function(s,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})},p=function(e,t){var r,n,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(a=0)),a;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((s=(s=a.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1],s=o;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(o);break}s[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},b=function(e){return e.map(function(t){var r=d({},t);if(t.react_conditions){var n=function(e,t){return!e||0===Object.keys(e).length||Object.entries(e).some(function(e){var r=e[0],n=e[1],s=t.find(function(e){return e.id===r});if(!s)return!1;var a=s.value;return!!a&&n.includes(a)})}(t.react_conditions,e);"disable"===t.condition_action?r.disabled=!n:r.conditionallyDisabled=!n}return r})};const g=function(){var e,t,r,b=(0,s.jE)(),g=(0,u.A)().isPro,m=(0,n.I)({queryKey:["goals_data"],queryFn:function(){return f(void 0,void 0,void 0,function(){var e;return p(this,function(t){switch(t.label){case 0:return[4,(0,i.DX)()];case 1:return[2,{goals:(e=t.sent()).goals||[],predefinedGoals:e.predefinedGoals||[],goalFields:Object.values(e.goalFields||{})}]}})})},retry:1}),h=(0,a.n)({mutationFn:function(){return f(void 0,void 0,void 0,function(){var e,t;return p(this,function(r){switch(r.label){case 0:return e=(null===(t=b.getQueryData(["goals_data"]))||void 0===t?void 0:t.goals)||[],[4,(0,i.d2)({goals:e})];case 1:return[2,r.sent()]}})})},onSuccess:function(){},onError:function(e){console.error(e),o.oR.error((0,l.__)("Failed to save goals","burst-statistics"))}}),v=(0,a.n)({mutationFn:function(e){return f(void 0,[e],void 0,function(e){var t,r=e.id,n=e.value;return p(this,function(e){switch(e.label){case 0:return t=[{id:r,title:n}],[4,(0,i.d2)({goals:t})];case 1:return[2,e.sent()]}})})},onError:function(e){console.error(e),o.oR.error((0,l.__)("Failed to save goal title","burst-statistics"))}}),y=(0,a.n)({mutationFn:function(){return f(void 0,void 0,void 0,function(){return p(this,function(e){switch(e.label){case 0:return[4,(0,i.D)()];case 1:return[2,e.sent()]}})})},onSuccess:function(e){b.setQueryData(["goals_data"],function(t){return t?(0,c.jM)(t,function(t){t.goals.push(e.goal)}):t}),o.oR.success((0,l.__)("Goal added successfully!","burst-statistics"))},onError:function(e){console.error(e),o.oR.error((0,l.__)("Failed to add goal","burst-statistics"))}}),x=(0,a.n)({mutationFn:function(e){return f(void 0,void 0,void 0,function(){return p(this,function(t){switch(t.label){case 0:return[4,(0,i.$x)(e)];case 1:return[2,t.sent()]}})})},onSuccess:function(e,t){e.deleted&&(b.setQueryData(["goals_data"],function(e){return e?(0,c.jM)(e,function(e){if(1===e.goals.length)e.goals=[];else{var r=e.goals.findIndex(function(e){return e.id===t});-1!==r&&e.goals.splice(r,1)}}):e}),o.oR.success((0,l.__)("Goal deleted successfully!","burst-statistics")))},onError:function(e){console.error(e),o.oR.error((0,l.__)("Failed to delete goal","burst-statistics"))}}),_=(0,a.n)({mutationFn:function(e){return f(void 0,[e],void 0,function(e){var t=e.predefinedGoalId;return p(this,function(e){switch(e.label){case 0:if(!g)throw new Error((0,l.__)("Predefined goals are a premium feature.","burst-statistics"));return[4,(0,i.ZI)(t)];case 1:return[2,e.sent()]}})})},onSuccess:function(e){b.setQueryData(["goals_data"],function(t){return t?(0,c.jM)(t,function(t){t.goals.push(e.goal)}):t}),o.oR.success((0,l.__)("Successfully added predefined goal!","burst-statistics"))},onError:function(e){console.error(e),o.oR.error(e.message||(0,l.__)("Failed to add predefined goal","burst-statistics"))}});return{goals:(null===(e=m.data)||void 0===e?void 0:e.goals)||[],goalFields:(null===(t=m.data)||void 0===t?void 0:t.goalFields)||[],predefinedGoals:(null===(r=m.data)||void 0===r?void 0:r.predefinedGoals)||[],isLoading:m.isLoading,isError:m.isError,getGoal:function(e){var t,r=(null===(t=m.data)||void 0===t?void 0:t.goals)||[];if(!Array.isArray(r))return!1;var n=r.findIndex(function(t){return t.id==e});return-1!==n&&r[n]},setGoalValue:function(e,t,r){b.setQueryData(["goals_data"],function(n){return n?(0,c.jM)(n,function(n){var s=n.goals.findIndex(function(t){return t.id===e});-1!==s&&(n.goals[s][t]=r)}):n})},updateGoal:function(e,t){b.setQueryData(["goals_data"],function(r){return r?(0,c.jM)(r,function(r){var n=r.goals.findIndex(function(t){return t.id===e});-1!==n&&(r.goals[n]=d(d({},r.goals[n]),t))}):r})},getGoalAsync:function(e){return f(void 0,void 0,void 0,function(){var t,r;return p(this,function(n){switch(n.label){case 0:return[4,b.ensureQueryData({queryKey:["goals_data"],queryFn:i.DX})];case 1:return t=n.sent(),[2,(null===(r=null==t?void 0:t.goals)||void 0===r?void 0:r.find(function(t){return String(t.id)===String(e)}))||null]}})})},saveGoals:h.mutateAsync,saveGoalTitle:function(e,t){return v.mutateAsync({id:e,value:t})},addGoal:y.mutateAsync,deleteGoal:x.mutateAsync,addPredefinedGoal:function(e){return _.mutateAsync({predefinedGoalId:e})},invalidateGoals:function(){return b.invalidateQueries(["goals_data"])}}}},65825:(e,t,r)=>{r.d(t,{A:()=>l});var n=r(91637),s=r(51609),a=r(27723),i=r(53411),o=(0,s.forwardRef)(function(e,t){var r=e.id,s=e.name,o=e.value,l=e.label,c=e.checked,u=e.disabled,d=void 0!==u&&u,f=e.onChange,p=e.className,b=void 0===p?"":p,g=e.tooltip,m=void 0===g?"":g,h=e.recommended,v=void 0!==h&&h,y=e.children;return(0,n.jsxs)("div",{className:"flex items-center gap-2 ".concat(b),children:[(0,n.jsx)("input",{ref:t,type:"radio",id:r,name:s,value:o,checked:c,disabled:d,onChange:function(e){return f(e.target.value)},className:"h-4 w-4 text-primary focus:ring-primary border-gray-300 my-1 mx-0 relative before:content-[''] before:m-0 before:absolute before:left-1/2 before:top-1/2 before:-translate-x-1/2 before:-translate-y-1/2"}),(0,n.jsxs)("label",{htmlFor:r,className:"text-sm text-gray cursor-pointer",children:[l," ",y," ",v&&(0,n.jsxs)("span",{className:"text-xs font-semibold",children:["(",(0,a.__)("Recommended","burst-statistics"),")"]})]}),m&&(0,n.jsx)(i.A,{tooltip:m,color:"blue",name:"help",size:16,className:"bg-blue-light rounded-full"})]})});o.displayName="RadioInput";const l=o},67744:(e,t,r)=>{r.d(t,{q:()=>i});var n=r(91637),s=r(51609),a=r(2573),i=(0,s.memo)(function(e){var t=e.title,r=e.controls,s=e.className,i=void 0===s?"":s;return(0,n.jsxs)("div",{className:(0,a.A)(i,"flex min-h-14 items-center justify-between px-2.5 md:px-6 md:min-h-16 gap-4"),children:[(0,n.jsx)("h2",{className:"text-lg font-semibold",children:t}),r]})});i.displayName="BlockHeading"},77902:(e,t,r)=>{r.d(t,{e:()=>i});var n=r(91637),s=r(2573),a=r(23130),i=(0,r(51609).memo)(function(e){var t=e.className,r=void 0===t?"":t,i=e.children;return(0,n.jsx)(a.A,{children:(0,n.jsx)("div",{className:(0,s.A)("col-span-12 flex flex-col rounded-xl bg-white shadow-sm relative border border-gray-300",r),children:i})})});i.displayName="Block"},78102:(e,t,r)=>{r.d(t,{A:()=>_,F:()=>x});var n=r(36095),s=r(11672),a=r(77363),i=r(51609),o=r(89717),l=r(30618),c=r(20467),u=r(88887),d=r(91788),f=r(23568),p="yyyy-MM-dd",b=["today","yesterday","last-7-days","last-30-days","last-90-days","last-month","week-to-date","month-to-date","year-to-date","last-year","custom"],g=["/statistics","/sources","/sales"],m=function(e){if(!e)return!1;var t=(0,c.A)(e);return(0,l.default)(t)&&/^\d{4}-\d{2}-\d{2}$/.test(e)},h=function(e){return!!e&&b.includes(e)},v=function(e){var t=e.range,r=e.startDate,n=e.endDate;return h(t)?"custom"!==t||m(r)&&m(n):!(!m(r)||!m(n))},y=function(e,t){var r={};return Object.keys(e).forEach(function(t){t!==f.Nb&&"startDate"!==t&&"endDate"!==t&&"range"!==t&&void 0!==e[t]&&(r[t]=e[t])}),t.range&&(r.range=t.range),t.startDate&&(r.startDate=t.startDate),t.endDate&&(r.endDate=t.endDate),r[f.Nb]="",r},x=function(){var e,t=(0,n.Z)(),r=(0,a.z)(),l=(0,i.useRef)(!1),c=(e=r.pathname,g.some(function(t){return e.startsWith(t)})),f=(0,u.S)(function(e){return e.startDate}),b=(0,u.S)(function(e){return e.endDate}),x=(0,u.S)(function(e){return e.range}),_=(0,u.S)(function(e){return e.setStartDate}),j=(0,u.S)(function(e){return e.setEndDate}),w=(0,u.S)(function(e){return e.setRange}),N=(0,s.S)({strict:!1}),k=(0,i.useMemo)(function(){if(c&&v(N)){var e=N.range,t=N.startDate,r=N.endDate;if(h(e)&&"custom"!==e){var n=function(e){if("custom"===e||!function(e){return e in d.cA}(e))return null;var t=d.cA[e].range(),r=t.startDate,n=t.endDate;return{startDate:(0,o.default)(r,p),endDate:(0,o.default)(n,p)}}(e);if(n)return{range:e,startDate:n.startDate,endDate:n.endDate}}if(m(t)&&m(r))return{range:e||"custom",startDate:t,endDate:r}}return{range:x,startDate:f,endDate:b}},[N,c,f,b,x]);(0,i.useEffect)(function(){if(c&&!l.current)if(l.current=!0,v(N)){var e=N.range,r=N.startDate,n=N.endDate;h(e)&&"custom"!==e?w(e):m(r)&&m(n)&&(_(r),j(n),w("custom"))}else if(x){var s={range:x};"custom"===x&&(s.startDate=f,s.endDate=b);var a=y(N,s);t({search:a,replace:!0})}},[c]),(0,i.useEffect)(function(){if(c&&l.current&&v(N)){var e=N.range,t=N.startDate,r=N.endDate;h(e)&&"custom"!==e?x!==e&&w(e):m(t)&&m(r)&&(f!==t&&_(t),b!==r&&j(r),"custom"!==x&&w("custom"))}},[N,c,f,b,x,_,j,w]);var C=(0,i.useCallback)(function(e,r,n){if("custom"===e&&r&&n?(_(r),j(n),w("custom")):w(e),c){var s={range:e};"custom"===e&&r&&n&&(s.startDate=r,s.endDate=n),t({search:function(e){return y(e,s)},replace:!1})}},[t,c,_,j,w]),A=(0,i.useCallback)(function(e){"custom"===e?(w("custom"),c&&t({search:function(e){return y(e,{range:"custom",startDate:f,endDate:b})},replace:!1})):C(e)},[C,w,c,t,f,b]),O=(0,i.useCallback)(function(e){C("custom",e,k.endDate)},[C,k.endDate]),S=(0,i.useCallback)(function(e){C("custom",k.startDate,e)},[C,k.startDate]);return{startDate:k.startDate,endDate:k.endDate,range:k.range,isDateRangeRoute:c,setDateRange:C,setRange:A,setStartDate:O,setEndDate:S}};const _=x},78548:(e,t,r)=>{r.d(t,{A:()=>l});var n=r(91637),s=r(51609),a=r(2573),i=r(53411),o=(0,s.forwardRef)(function(e,t){var r=e.inputId,s=e.options,o=e.value,l=e.columns,c=void 0===l?2:l,u=e.disabled,d=void 0!==u&&u,f=e.goalId,p=e.onChange,b=e.className,g=void 0===b?"":b,m=f?"".concat(f,"-").concat(r):r;return(0,n.jsx)("div",{className:(0,a.A)("burst-radio-buttons__list grid gap-4",function(e){switch(e){case 1:return"grid-cols-1";case 2:default:return"grid-cols-2";case 3:return"grid-cols-3";case 4:return"grid-cols-4"}}(c),g),ref:t,children:Object.keys(s).map(function(e){var t=s[e],r="".concat(m,"-").concat(t.type),l=t.type===o;return(0,n.jsxs)("div",{className:"w-full bg-gray-200 rounded-m",children:[(0,n.jsx)("input",{type:"radio",checked:l,name:m,id:r,value:t.type,disabled:d,onChange:function(e){p(e.target.value)},className:"sr-only opacity-0 absolute"}),(0,n.jsxs)("label",{htmlFor:r,className:(0,a.A)("flex gap-2.5 m-[1px] items-start space-x-3 p-4 rounded-lg border-2 transition-all duration-200 cursor-pointer","focus-within:ring-2 focus-within:ring-primary focus-within:ring-offset-2",{"border-primary bg-primary-light":l,"border-gray-300 hover:border-gray-400 bg-white hover:bg-gray-50":!l,"opacity-50 cursor-not-allowed":d}),children:[(0,n.jsx)("div",{className:"flex-shrink-0 mt-1",children:(0,n.jsx)("div",{className:(0,a.A)("w-4 h-4 rounded-full border-2 transition-all duration-200 flex items-center justify-center",{"border-primary bg-primary":l,"border-gray-300 bg-white":!l}),children:l&&(0,n.jsx)("div",{className:"w-2 h-2 rounded-full bg-white"})})}),(0,n.jsxs)("div",{className:"flex items-center flex-row min-w-0 gap-1",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,n.jsx)(i.A,{name:t.icon,size:18,className:"flex-shrink-0"}),(0,n.jsx)("h5",{className:(0,a.A)("text-base font-medium transition-colors text-gray-900"),children:t.label})]}),t.description&&1<t.description.length&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"w-px bg-gray-400 mx-3 h-5"}),(0,n.jsx)("p",{className:(0,a.A)("text-sm transition-colors truncate",{"text-gray-600":l,"text-gray-500":!l}),children:t.description})]})]})]})]},r)})})});o.displayName="RadioButtonsInput";const l=o},88887:(e,t,r)=>{r.d(t,{S:()=>d});var n=r(30346),s=r(14243),a=r(67201),i=r(89717),o=r(72442),l=r(67072),c=r(91788),u=function(e){if(c.cA[e]){var t=c.cA[e].range(),r=t.startDate,n=t.endDate;return{startDate:(0,i.default)(r,"yyyy-MM-dd"),endDate:(0,i.default)(n,"yyyy-MM-dd"),range:e}}return null},d=(0,n.v)((0,s.Zr)(function(e){return{startDate:(0,i.default)((0,o.default)((0,l.A)(new Date,7)),"yyyy-MM-dd"),endDate:(0,i.default)((0,a.default)((0,l.A)(new Date,1)),"yyyy-MM-dd"),range:"last-7-days",setStartDate:function(t){return e({startDate:t})},setEndDate:function(t){return e({endDate:t})},setRange:function(t){if("custom"!==t){var r=u(t);r&&e(r)}else e({range:t})}}},{name:"burst-date-storage",partialize:function(e){return{range:e.range,startDate:e.startDate,endDate:e.endDate}},onRehydrateStorage:function(){return function(e){if(e&&e.range&&"custom"!==e.range){var t=u(e.range);t&&Object.assign(e,t)}}}}))},91788:(e,t,r)=>{r.d(t,{Ad:()=>I,BM:()=>x,Ee:()=>N,Iq:()=>C,Nj:()=>h,YP:()=>E,Yo:()=>R,ZV:()=>w,cA:()=>S,cf:()=>D,fU:()=>j,fs:()=>v,gs:()=>m,ii:()=>A,kz:()=>M,oI:()=>y,qQ:()=>k,vd:()=>_,vv:()=>P});var n=r(38443),s=r(71109),a=r(18553),i=r(44184),o=r(67201),l=r(73177),c=r(52368),u=r(89717),d=r(48145),f=r(72442),p=r(6374),b=r(58357),g=r(27723),m=function(e,t){if(void 0===t&&(t=new Date),"number"==typeof e&&(e=new Date(1e3*e)),!(e instanceof Date))return"-";var r={year:31536e6,month:2628e6,day:864e5,hour:36e5,minute:6e4,second:1e3},n=new Intl.RelativeTimeFormat("en",{numeric:"auto"}),s=e-t;for(var a in r)if(Math.abs(s)>r[a]||"second"===a)return n.format(Math.round(s/r[a]),a);return"-"},h=function(e,t,r){void 0===r&&(r=!0);var n=(e=Number(e))/(t=Number(t));return isNaN(n)&&(n=0),r?new Intl.NumberFormat(void 0,{style:"percent",maximumFractionDigits:1}).format(n):n};function v(e,t){var r={},n=((e=Number(e))-(t=Number(t)))/t;return isNaN(n)&&(n=0),r.val=new Intl.NumberFormat(void 0,{style:"percent",maximumFractionDigits:1,signDisplay:"exceptZero"}).format(n),r.status=0<n?"positive":"negative",n===1/0&&(r.val="",r.status="positive"),r}function y(e,t){var r={},n=((e=Number(e))-(t=Number(t)))/100;return isNaN(n)&&(n=0),r.val=new Intl.NumberFormat(void 0,{style:"percent",maximumFractionDigits:1,signDisplay:"exceptZero"}).format(n),r.status=0<n?"positive":"negative",n===1/0&&(r.val="",r.status="positive"),r}var x=function(e){return(0,n.dateI18n)(burst_settings.date_format,new Date(1e3*e))},_=function(e){return e&&("number"==typeof e||Date.parse(e)>=16409952e5)};function j(e){void 0===e&&(e=0);var t=Number(e);isNaN(t)&&(t=0);var r=Math.floor(t/1e3),n=Math.floor(r/3600),s=Math.floor((r-3600*n)/60),a=r-3600*n-60*s,i=function(e){return isNaN(e)?"00":String(e).padStart(2,"0")};return 0===n?[s,a].map(i).join(":"):[n,s,a].map(i).join(":")}function w(e,t){return void 0===t&&(t=1),e=Number(e),isNaN(e)&&(e=0),1e3>e&&(t=0),new Intl.NumberFormat(void 0,{style:"decimal",notation:"compact",compactDisplay:"short",maximumFractionDigits:t}).format(e)}function N(e,t){return void 0===t&&(t=1),e=Number(e),isNaN(e)&&(e=0),0===e?"0%":0<e&&.1>e?"<0.1%":new Intl.NumberFormat(void 0,{style:"percent",maximumFractionDigits:t}).format(e/100)}function k(e){return e?burst_settings.countries[e.toUpperCase()]||(0,g.__)("Not set","burst-statistics"):(0,g.__)("Unknown","burst-statistics")}function C(e){return e?burst_settings.continents[e.toUpperCase()]||(0,g.__)("Not set","burst-statistics"):(0,g.__)("Unknown","burst-statistics")}function A(e){void 0===e&&(e=new Date);var t=-60*e.getTimezoneOffset(),r=Math.floor(e.getTime()/1e3)+3600*burst_settings.gmt_offset-t;return new Date(1e3*r)}var O=A(),S={today:{label:(0,g.__)("Today","burst-statistics"),range:function(){return{startDate:(0,f.default)(O),endDate:(0,o.default)(O)}}},yesterday:{label:(0,g.__)("Yesterday","burst-statistics"),range:function(){return{startDate:(0,f.default)((0,s.default)(O,-1)),endDate:(0,o.default)((0,s.default)(O,-1))}}},"last-7-days":{label:(0,g.__)("Last 7 days","burst-statistics"),range:function(){return{startDate:(0,f.default)((0,s.default)(O,-7)),endDate:(0,o.default)((0,s.default)(O,-1))}}},"last-30-days":{label:(0,g.__)("Last 30 days","burst-statistics"),range:function(){return{startDate:(0,f.default)((0,s.default)(O,-30)),endDate:(0,o.default)((0,s.default)(O,-1))}}},"last-90-days":{label:(0,g.__)("Last 90 days","burst-statistics"),range:function(){return{startDate:(0,f.default)((0,s.default)(O,-90)),endDate:(0,o.default)((0,s.default)(O,-1))}}},"last-month":{label:(0,g.__)("Last month","burst-statistics"),range:function(){return{startDate:(0,p.default)((0,a.default)(O,-1)),endDate:(0,l.default)((0,a.default)(O,-1))}}},"week-to-date":{label:(0,g.__)("Week to date","burst-statistics"),range:function(){return{startDate:(0,f.default)((0,s.default)(O,-O.getDay())),endDate:(0,o.default)(O)}}},"month-to-date":{label:(0,g.__)("Month to date","burst-statistics"),range:function(){return{startDate:(0,p.default)(O),endDate:(0,o.default)(O)}}},"year-to-date":{label:(0,g.__)("Year to date","burst-statistics"),range:function(){return{startDate:(0,b.A)(O),endDate:(0,o.default)(O)}}},"last-year":{label:(0,g.__)("Last year","burst-statistics"),range:function(){return{startDate:(0,b.A)((0,i.default)(O,-1)),endDate:(0,c.A)((0,i.default)(O,-1))}}}},D=function(e){return Object.values(e).filter(Boolean).map(function(e){var t=S[e];return t.isSelected=F,t})},E=function(e,t){var r="MMMM d, yyyy";return{startDate:e?(0,u.default)(new Date(e),r):"",endDate:t?(0,u.default)(new Date(t),r):""}};function F(e){var t=this.range();return(0,d.default)(e.startDate,t.startDate)&&(0,d.default)(e.endDate,t.endDate)}function I(e,t){if(void 0===t&&(t={}),!e||!t[e])return function(e){return w(e)};var r=t[e],n=r.isPercentage,s=r.isTime,a=r.precision,i=r.suffix;return function(e){if(null==e)return"";if(n)return N(e,a);if(s)return j(e);var t=w(e,a);return i&&(t+=i),t}}function P(e,t){return new Intl.NumberFormat(void 0,{style:"currency",currency:e,maximumFractionDigits:2,minimumFractionDigits:2,trailingZeroDisplay:"stripIfInteger"}).format(t)}function R(e,t){return new Intl.NumberFormat(void 0,{style:"currency",currency:e,notation:"compact",compactDisplay:"short",maximumFractionDigits:1}).format(t)}function M(e){if(!e)return"";try{var t=e instanceof Date?e:new Date(e);return isNaN(t.getTime())?"":new Intl.DateTimeFormat(void 0,{month:"short",day:"numeric",year:"numeric"}).format(t)}catch(e){return""}}},94304:(e,t,r)=>{r.d(t,{A:()=>d});var n=r(91637),s=r(51609),a=r.n(s),i=r(42617),o=r(2573),l=r(53411),c=function(){return c=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},c.apply(this,arguments)},u=a().forwardRef(function(e,t){var r,s=e.value,a=e.onChange,o=e.options,c=(void 0===(r=void 0===o?[]:o)&&(r=[]),Array.isArray(r)?r:Object.entries(r).map(function(e){var t=e[0],r=e[1];return{value:t,label:String(r)}}));return(0,n.jsxs)(i.bL,{value:s,onValueChange:function(e){return a(e)},children:[(0,n.jsxs)(i.l9,{ref:t,className:"inline-flex items-center justify-center gap-1 rounded bg-white text-base leading-none outline outline-gray-400 px-2 py-2 hover:bg-gray-100 focus:shadow-[0_0_0_2px]",children:[(0,n.jsx)(i.WT,{placeholder:"Select an option…"}),(0,n.jsx)(i.In,{className:"text-base",children:(0,n.jsx)(l.A,{name:"chevron-down",color:"black",size:16,tooltip:"",className:""})})]}),(0,n.jsx)(i.ZL,{container:document.getElementById("modal-root"),children:(0,n.jsxs)(i.UC,{className:"bg-gray-100 text-black border border-gray-400 rounded-md shadow-lg ring-1 ring-black/5 z-[100] shadow-gray-400/50",position:"item-aligned",children:[(0,n.jsx)(i.PP,{className:"",children:(0,n.jsx)(l.A,{name:"chevron-up",color:"black",size:16,tooltip:"",className:""})}),(0,n.jsx)(i.LM,{className:"",children:c.map(function(e){return(0,n.jsx)(f,{value:e.value,children:e.label},e.value)})}),(0,n.jsx)(i.wn,{className:"text-base",children:(0,n.jsx)(l.A,{name:"chevron-down",color:"white",size:16,tooltip:"",className:""})})]})})]})});u.displayName="SelectInput";const d=u;var f=a().forwardRef(function(e,t){var r=e.children,s=e.className,a=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}(e,["children","className"]);return(0,n.jsxs)(i.q7,c({ref:t,className:(0,o.$)("cursor-default px-2 py-2 text-base select-none flex items-center gap-1 flex-row overflow-hidden","hover:bg-gray-300 hover:text-black","focus:bg-gray-300","transition-all duration-200",s)},a,{children:[(0,n.jsx)("div",{className:"w-4 flex items-center",children:(0,n.jsx)(i.VF,{children:(0,n.jsx)(l.A,{name:"check",color:"black",size:16,tooltip:"",className:""})})}),(0,n.jsx)(i.p4,{children:r}),(0,n.jsx)("div",{className:"w-4 flex items-center"})]}))});f.displayName="SelectItem"},95217:(e,t,r)=>{r.d(t,{wk:()=>b,B:()=>c});var n=r(91637),s=r(53411),a=r(50616),i=r(27723);const o=function(e){var t=e.filter,r=e.onRemove,o=e.onClick,l=e.className,c=void 0===l?"":l,u=e.showRemoveButton,d=void 0===u||u,f=e.disabled,p=void 0!==f&&f,b="".concat(p?"inline-flex items-center gap-2 px-3 py-2 bg-gray-100 border border-gray-200 shadow-sm rounded-md text-sm cursor-not-allowed opacity-60":"inline-flex items-center gap-2 px-3 py-2 bg-white border border-gray-300 hover:bg-gray-200 shadow-sm rounded-md text-sm transition-all duration-200 hover:bg-gray-50 hover:[box-shadow:0_0_0_3px_rgba(0,0,0,0.05)] cursor-pointer"," ").concat(c).trim(),g=function(e){p||e.target.closest(".remove-button")||o&&o(t)};return t&&t.config?t.key?(0,n.jsxs)("div",{className:b,onClick:g,onKeyDown:function(e){p||"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),g(e))},role:"button",tabIndex:p?-1:0,"aria-label":(0,i.__)("Edit %s filter","burst-statistics").replace("%s",t.config.label),"aria-disabled":p,title:p?"":(0,i.__)("Click to edit filter","burst-statistics"),children:[(0,n.jsx)(s.A,{name:t.config.icon,size:"16"}),(0,n.jsx)("p",{className:"font-medium ".concat(p?"text-gray-800":""),children:t.config.label}),(0,n.jsx)("span",{className:"h-4 w-px ".concat(p?"bg-gray-300":"bg-gray-400")}),(0,n.jsx)("p",{className:p?"text-gray-800":"text-gray",children:(0,a.S)(t.displayValue)}),d&&r&&!p&&(0,n.jsx)("button",{onClick:function(e){p?e.stopPropagation():r&&r(t.key)},disabled:p,className:"remove-button rounded-full p-1 transition-colors ".concat(p?"cursor-not-allowed opacity-50":"hover:bg-gray-200"),"aria-label":(0,i.__)("Remove filter","burst-statistics"),title:p?"":(0,i.__)("Remove filter","burst-statistics"),children:(0,n.jsx)(s.A,{name:"times",color:p?"var(--rsp-grey-300)":"var(--rsp-grey-500)",size:"16"})})]}):null:(localStorage.removeItem("burst-filters-storage"),null)};var l=r(74020);const c=function(e){var t=e.filters,r=void 0===t?[]:t,s=e.onRemove,a=e.onClick,i=e.className,c=void 0===i?"flex flex-wrap gap-2":i,u=e.showRemoveButton,d=void 0===u||u,f=e.emptyMessage,p=void 0===f?null:f,b=(0,l.A)(function(e){return e.userCanFilter});return Array.isArray(r)&&0!==r.length||p?0===r.length&&p?(0,n.jsx)("div",{className:"text-gray-500 text-sm",children:p}):(0,n.jsx)("div",{className:c,children:r.map(function(e){return(0,n.jsx)(o,{disabled:!b,filter:e,onRemove:s,onClick:a,showRemoveButton:d},e.key)})}):null};var u=r(2573),d=function(){return d=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},d.apply(this,arguments)},f=function(e){var t=e.onClick,r=e.icon,a=e.iconSize,i=void 0===a?16:a,o=e.label,l=e.variant,c=void 0===l?"default":l,f=e.size,p=void 0===f?"md":f,b=e.disabled,g=void 0!==b&&b,m=e.className,h=void 0===m?"":m,v=e.ariaLabel,y=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}(e,["onClick","icon","iconSize","label","variant","size","disabled","className","ariaLabel"]),x=(0,u.$)("inline-flex items-center gap-2 rounded-md transition-all duration-200 cursor-pointer","focus:outline-none focus:ring-2 focus:ring-offset-2",{"bg-transparent border border-transparent hover:bg-gray-50":"default"===c,"bg-white border border-gray-300 border-dashed shadow-sm hover:bg-gray-50 hover:[box-shadow:0_0_0_3px_rgba(0,0,0,0.05)]":"dashed"===c,"bg-gray-100 border border-gray-300 hover:bg-gray-200":"solid"===c},{"py-1 px-2 text-xs":"sm"===p,"py-2 px-3 text-sm":"md"===p,"py-3 px-4 text-base":"lg"===p},{"opacity-50 cursor-not-allowed focus:ring-0 focus:ring-offset-0":g},h),_=Object.fromEntries(Object.entries({"aria-label":v||o,"aria-disabled":!!g||void 0}).filter(function(e){return e[0],void 0!==e[1]}));return(0,n.jsxs)("button",d({type:y.type||"button",onClick:t,onKeyDown:function(e){"Enter"!==e.key&&" "!==e.key||!t||g||(e.preventDefault(),t(e)),y.onKeyDown&&y.onKeyDown(e)},className:x,disabled:g},_,y,{children:[r&&(0,n.jsx)(s.A,{name:r,size:i}),o&&(0,n.jsx)("span",{className:"font-medium text-base",children:o})]}))};f.displayName="IconButton";const p=f,b=function(e){var t=e.onClick,r=e.className,s=void 0===r?"":r,a=e.icon,o=void 0===a?"plus":a,l=e.label,c=void 0===l?(0,i.__)("Add filter","burst-statistics"):l;return(0,n.jsx)(p,{variant:"dashed",icon:o,label:c,onClick:t,className:s,ariaLabel:c})}},98371:(e,t,r)=>{r.d(t,{A:()=>i});var n=r(91637),s=r(85373),a=r(53411);const i=function(e){var t=e.title,r=e.subtitle,i=void 0===r?"":r,o=e.customHeader,l=void 0===o?null:o,c=e.content,u=e.footer,d=e.triggerClassName,f=e.children,p=e.isOpen,b=e.onClose;return(0,n.jsxs)(s.bL,{open:p,onOpenChange:function(e){e||null==b||b()},children:[d&&(0,n.jsx)(s.l9,{className:d,children:f}),(0,n.jsxs)(s.ZL,{container:document.getElementById("modal-root"),children:[(0,n.jsx)(s.hJ,{className:"bg-black/50 fixed inset-0 z-50"}),(0,n.jsxs)(s.UC,{className:"fixed top-[55px] left-1/2 -translate-x-1/2 w-[calc(100%-20px)] max-h-[90vh] m-0 px-4 py-3 rounded-md z-50 bg-gray-100 shadow-md focus:outline-none data-[state=open]:animate-contentShow flex flex-col overflow-x-visible md:w-full md:max-w-[720px] md:m-3 md:absolute md:top-0",children:[(0,n.jsx)("div",{className:"flex flex-row justify-between items-center flex-shrink-0",children:l?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"flex-1",children:l}),(0,n.jsx)(s.bm,{asChild:!0,children:(0,n.jsx)("button",{"aria-label":"Close",onClick:b,className:"bg-gray-200 rounded-full p-2 w-8 h-8 cursor-pointer hover:bg-gray-300 transition-colors duration-150 ml-4",children:(0,n.jsx)(a.A,{name:"times",size:18,color:"gray"})})})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(s.hE,{className:"text-lg font-semibold text-black",children:t}),i&&(0,n.jsx)("p",{className:"text-sm text-gray-600",children:i})]}),(0,n.jsx)(s.bm,{asChild:!0,children:(0,n.jsx)("button",{"aria-label":"Close",onClick:b,className:"bg-gray-200 rounded-full p-2 w-8 h-8 cursor-pointer hover:bg-gray-300 transition-colors duration-150",children:(0,n.jsx)(a.A,{name:"times",size:18,color:"gray"})})})]})}),(0,n.jsx)(s.VY,{className:"text-base text-black mb-6 mt-4 flex-1 overflow-y-auto overflow-x-visible min-h-0",children:c}),u&&(0,n.jsx)("div",{className:"flex flex-row justify-end gap-2 flex-shrink-0 bottom-0 bg-gray-100 pt-4 border-t border-gray-200 mx-4 px-4",children:u})]})]})]})}}}]);